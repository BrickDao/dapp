(this["webpackJsonptribute-ui"]=this["webpackJsonptribute-ui"]||[]).push([[3],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(){return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"times","data-prefix":"fal",viewBox:"0 0 320 512",children:Object(r.jsx)("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"})})}},11:function(e,t,n){"use strict";(function(e){n.d(t,"m",(function(){return V})),n.d(t,"C",(function(){return W})),n.d(t,"g",(function(){return Y})),n.d(t,"s",(function(){return H})),n.d(t,"c",(function(){return K})),n.d(t,"d",(function(){return z})),n.d(t,"k",(function(){return q})),n.d(t,"o",(function(){return J})),n.d(t,"n",(function(){return $})),n.d(t,"J",(function(){return Z})),n.d(t,"j",(function(){return ee})),n.d(t,"h",(function(){return te})),n.d(t,"b",(function(){return ne})),n.d(t,"I",(function(){return re})),n.d(t,"e",(function(){return ae})),n.d(t,"B",(function(){return ce})),n.d(t,"v",(function(){return se})),n.d(t,"q",(function(){return oe})),n.d(t,"A",(function(){return ie})),n.d(t,"t",(function(){return ue})),n.d(t,"i",(function(){return de})),n.d(t,"a",(function(){return le})),n.d(t,"y",(function(){return be})),n.d(t,"f",(function(){return je})),n.d(t,"F",(function(){return fe})),n.d(t,"l",(function(){return Oe})),n.d(t,"G",(function(){return pe})),n.d(t,"z",(function(){return he})),n.d(t,"x",(function(){return me})),n.d(t,"u",(function(){return ve})),n.d(t,"E",(function(){return xe})),n.d(t,"H",(function(){return Ne})),n.d(t,"w",(function(){return ge})),n.d(t,"p",(function(){return Ee})),n.d(t,"D",(function(){return Ae})),n.d(t,"r",(function(){return we}));var r,a,c,s,o,i,u,d,l,b,j,f,O,p,h,m,v,x,N,g,E,A,w=n(7),I=n(427),y=n(265),C=n(428),D=n.n(C);Object(I.config)({path:Object(y.resolve)(e,"../.env")});var _=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COUPON_API_URL:"https://coupon.dev.openlaw.io",REACT_APP_SNAPSHOT_SPACE:"tribute",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0xf5af0d9c3e4091a48925902eaAB2982e44E7a4C5",REACT_APP_SNAPSHOT_HUB_API_URL:"https://snapshot-hub-erc712.dev.thelao.io",REACT_APP_ENVIRONMENT:"development",REACT_APP_INFURA_PROJECT_ID_DEV:"d77d55afab36442eb530fac5e2a27ed1",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xde0Ca6340FDE1906B3c4c1A2bdEE060933e4b253",REACT_APP_GRAPH_API_URL:"https://api.thegraph.com/subgraphs/name/openlawteam/tribute-dev"}),k=_.REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS,T=_.REACT_APP_DEFAULT_CHAIN_NAME_LOCAL,S=_.REACT_APP_ENVIRONMENT,R=_.REACT_APP_GRAPH_API_URL,P=_.REACT_APP_INFURA_PROJECT_ID_DEV,F=_.REACT_APP_INFURA_PROJECT_ID_LOCAL,L=_.REACT_APP_INFURA_PROJECT_ID_PROD,M=_.REACT_APP_MULTICALL_CONTRACT_ADDRESS,B=_.REACT_APP_SNAPSHOT_HUB_API_URL,G=_.REACT_APP_COUPON_API_URL,U=_.REACT_APP_SNAPSHOT_SPACE,V=S,W="localhost"===V?"/snapshot-hub":B,Y=G,H=R,K={MAINNET:1,ROPSTEN:3,RINKEBY:4,GOERLI:5,KOVAN:42,GANACHE:1337},z=(r={},Object(w.a)(r,K.MAINNET,"Main Ethereum Network"),Object(w.a)(r,K.ROPSTEN,"Ropsten Test Network"),Object(w.a)(r,K.RINKEBY,"Rinkeby Test Network"),Object(w.a)(r,K.GOERLI,"G\xf6rli Test Network"),Object(w.a)(r,K.KOVAN,"Kovan Test Network"),Object(w.a)(r,K.GANACHE,"Ganache Test Network"),r),q="production"===S?K.MAINNET:"development"===S?K.RINKEBY:T?K[T]:K.GANACHE,J=(a={},Object(w.a)(a,K.MAINNET,"https://etherscan.io"),Object(w.a)(a,K.ROPSTEN,"https://ropsten.etherscan.io"),Object(w.a)(a,K.RINKEBY,"https://rinkeby.etherscan.io"),Object(w.a)(a,K.GOERLI,"https://goerli.etherscan.io"),Object(w.a)(a,K.KOVAN,"https://kovan.etherscan.io"),a),Q=(c={},Object(w.a)(c,K.MAINNET,"wss://mainnet.infura.io/ws/v3"),Object(w.a)(c,K.ROPSTEN,"wss://ropsten.infura.io/ws/v3"),Object(w.a)(c,K.RINKEBY,"wss://rinkeby.infura.io/ws/v3"),Object(w.a)(c,K.GOERLI,"wss://goerli.infura.io/ws/v3"),Object(w.a)(c,K.KOVAN,"wss://kovan.infura.io/ws/v3"),c),X="production"===S?L:"development"===S?P:F,$=Q[q]?"".concat(Q[q],"/").concat(X):q===K.GANACHE?"ws://127.0.0.1:7545":"",Z={injected:{display:{name:"MetaMask",description:"Connect with the provider in your Browser"},package:null},walletconnect:{display:{name:"WalletConnect",description:"Connect with your mobile wallet"},package:D.a,options:{infuraId:X,qrcodeModalOptions:{mobileLinks:["rainbow","metamask","argent","trust"]}}}},ee=k,te=(s={},Object(w.a)(s,K.MAINNET,""),Object(w.a)(s,K.ROPSTEN,""),Object(w.a)(s,K.RINKEBY,"0x392E9D1c7FaE6C62853e089466FFAE3F0a93c680"),Object(w.a)(s,K.GOERLI,""),Object(w.a)(s,K.KOVAN,""),Object(w.a)(s,K.GANACHE,"0x6d92a8E4aB80adcBbFDA44ef69fe847f82def641"),s),ne=(o={},Object(w.a)(o,K.MAINNET,""),Object(w.a)(o,K.ROPSTEN,""),Object(w.a)(o,K.RINKEBY,"0x0d316BAa42a0538f2aAca3F08D368FE9C4A87A7A"),Object(w.a)(o,K.GOERLI,""),Object(w.a)(o,K.KOVAN,""),Object(w.a)(o,K.GANACHE,"0xcD1639FD072113CC86e15f65f1505C6D58Aa7412"),o),re=(i={},Object(w.a)(i,K.MAINNET,""),Object(w.a)(i,K.ROPSTEN,""),Object(w.a)(i,K.RINKEBY,"0xf0D4BC92F8aD06CC163B96459787Dd563aAFC1f7"),Object(w.a)(i,K.GOERLI,""),Object(w.a)(i,K.KOVAN,""),Object(w.a)(i,K.GANACHE,"0xcF34FFFBba648719DAe106202674949f1679772B"),u={},Object(w.a)(u,K.MAINNET,""),Object(w.a)(u,K.ROPSTEN,""),Object(w.a)(u,K.RINKEBY,"0x69Bd1bE55Fff22bE1d5468dFf1a6d0a184c520F7"),Object(w.a)(u,K.GOERLI,""),Object(w.a)(u,K.KOVAN,""),Object(w.a)(u,K.GANACHE,"0x862d71d6E9Be8a7495EfEBa6f2b657b00E629c95"),d={},Object(w.a)(d,K.MAINNET,""),Object(w.a)(d,K.ROPSTEN,""),Object(w.a)(d,K.RINKEBY,"0xc9415afc432CC56912f54682cC2Ea80ADdE1a89B"),Object(w.a)(d,K.GOERLI,""),Object(w.a)(d,K.KOVAN,""),Object(w.a)(d,K.GANACHE,"0xfB4E7C2FD8Ceb2757D2C4cE4749ebE326fc369D4"),d),ae=(l={},Object(w.a)(l,K.MAINNET,""),Object(w.a)(l,K.ROPSTEN,""),Object(w.a)(l,K.RINKEBY,"0x92866ac08edFEAA8C52dEF0c12926FA7E95df8fB"),Object(w.a)(l,K.GOERLI,""),Object(w.a)(l,K.KOVAN,""),Object(w.a)(l,K.GANACHE,"0x65CaCA9F2638Fb2B245E9694f00343F0b6CB6F77"),l),ce=(b={},Object(w.a)(b,K.MAINNET,""),Object(w.a)(b,K.ROPSTEN,""),Object(w.a)(b,K.RINKEBY,"0xD3C2cE38c905B9207e35D7EcE51c17b22EAb4afe"),Object(w.a)(b,K.GOERLI,""),Object(w.a)(b,K.KOVAN,""),Object(w.a)(b,K.GANACHE,"0x314C824Ea4586798DF8B46121E881Defa40CB47E"),b),se=(j={},Object(w.a)(j,K.MAINNET,""),Object(w.a)(j,K.ROPSTEN,""),Object(w.a)(j,K.RINKEBY,"0x03BE4284E9F3E7d1fd19cB0442713609105db7E7"),Object(w.a)(j,K.GOERLI,""),Object(w.a)(j,K.KOVAN,""),Object(w.a)(j,K.GANACHE,"0xeD025b5BA14b8f3A085057b9D7Baa13998343aA8"),j),oe=(f={},Object(w.a)(f,K.MAINNET,""),Object(w.a)(f,K.ROPSTEN,""),Object(w.a)(f,K.RINKEBY,"0xA007fc56f540670F6ba17FD2b3B931FC72A7820a"),Object(w.a)(f,K.GOERLI,""),Object(w.a)(f,K.KOVAN,""),Object(w.a)(f,K.GANACHE,"0x4a7A5946567672c577EaF2b866BCeBc177E455E8"),f),ie=(O={},Object(w.a)(O,K.MAINNET,""),Object(w.a)(O,K.ROPSTEN,""),Object(w.a)(O,K.RINKEBY,"0x6fA3f2BC09fB13091BF40C6920a9251B72348456"),Object(w.a)(O,K.GOERLI,""),Object(w.a)(O,K.KOVAN,""),Object(w.a)(O,K.GANACHE,"0x4e1Ccf6Bca8d14B670478d8C4e2aEc9f6277A7f5"),O),ue=(p={},Object(w.a)(p,K.MAINNET,""),Object(w.a)(p,K.ROPSTEN,""),Object(w.a)(p,K.RINKEBY,"0xf6F042cB61E409dbFE34A5fbC76Db334B7a93364"),Object(w.a)(p,K.GOERLI,""),Object(w.a)(p,K.KOVAN,""),Object(w.a)(p,K.GANACHE,"0x72a011Aa67F8214a146A162A99B322017ad763fD"),p),de=(h={},Object(w.a)(h,K.MAINNET,""),Object(w.a)(h,K.ROPSTEN,""),Object(w.a)(h,K.RINKEBY,"0x35B3babfB8FF455903f6e89cEaa83140e09495F9"),Object(w.a)(h,K.GOERLI,""),Object(w.a)(h,K.KOVAN,""),Object(w.a)(h,K.GANACHE,"0x4d4243f2d605282CBd27C8391f05b77316d1a561"),h),le=(m={},Object(w.a)(m,K.MAINNET,""),Object(w.a)(m,K.ROPSTEN,""),Object(w.a)(m,K.RINKEBY,"0xed65eD0c561E77597E4D8472be1b4b184c31Fde4"),Object(w.a)(m,K.GOERLI,""),Object(w.a)(m,K.KOVAN,""),Object(w.a)(m,K.GANACHE,"0xA8EA078cF1D3837a025329c46A4E0F441Cb2eE87"),m),be=(v={},Object(w.a)(v,K.MAINNET,""),Object(w.a)(v,K.ROPSTEN,""),Object(w.a)(v,K.RINKEBY,"0xc69DF0C3855A6CaBF0c5983bD504770E5BFA8e84"),Object(w.a)(v,K.GOERLI,""),Object(w.a)(v,K.KOVAN,""),Object(w.a)(v,K.GANACHE,"0x538a4f00d64d2597717cAAd4D01C963317e3Ae40"),v),je=(x={},Object(w.a)(x,K.MAINNET,""),Object(w.a)(x,K.ROPSTEN,""),Object(w.a)(x,K.RINKEBY,"0xb5935758c16B785d3749F20D65F5B501578dCb1c"),Object(w.a)(x,K.GOERLI,""),Object(w.a)(x,K.KOVAN,""),Object(w.a)(x,K.GANACHE,"0x9A2E533FBa58Ec8b0dA34438154C48E295C80576"),x),fe=(N={},Object(w.a)(N,K.MAINNET,""),Object(w.a)(N,K.ROPSTEN,""),Object(w.a)(N,K.RINKEBY,"0xD0dCB66d60f6EbF838e22423f58B01D6F7a60187"),Object(w.a)(N,K.GOERLI,""),Object(w.a)(N,K.KOVAN,""),Object(w.a)(N,K.GANACHE,"0xa7D723BFc4deC341da03E70Af4026B3926b1E8Db"),N),Oe=(g={},Object(w.a)(g,K.MAINNET,""),Object(w.a)(g,K.ROPSTEN,""),Object(w.a)(g,K.RINKEBY,"0xB54D48D8471839D670C0e24548A7CfEA78bB1879"),Object(w.a)(g,K.GOERLI,""),Object(w.a)(g,K.KOVAN,""),Object(w.a)(g,K.GANACHE,"0x6749b9151B654A77ddA3Fa8f2b259E0E592065F6"),g),pe=(E={},Object(w.a)(E,K.MAINNET,""),Object(w.a)(E,K.ROPSTEN,""),Object(w.a)(E,K.RINKEBY,"0x939Fd23C38496aB54fa4BD0b2ED535DE100f7d8F"),Object(w.a)(E,K.GOERLI,""),Object(w.a)(E,K.KOVAN,""),Object(w.a)(E,K.GANACHE,"0x4Df3729e7B952EBE6d18b52132D2A8af2F2D167A"),E),he=(A={},Object(w.a)(A,K.MAINNET,""),Object(w.a)(A,K.ROPSTEN,""),Object(w.a)(A,K.RINKEBY,"0xDfbe754ec9c2aA26ac2f429CfcEd819910eF5926"),Object(w.a)(A,K.GOERLI,""),Object(w.a)(A,K.KOVAN,""),Object(w.a)(A,K.GANACHE,"0xae02a075290D2efD74F0D3fE2DfE64831320855a"),A),me=M,ve="0x000000000000000000000000000000000000dead",xe="0x000000000000000000000000000000000000babe",Ne="0x00000000000000000000000000000000000FF1CE",ge="0x00000000000000000000000000000000DECAFBAD",Ee="0x0000000000000000000000000000000000000000",Ae=U,we="production"===S?1e4:5e3}).call(this,"/")},13:function(e,t,n){"use strict";function r(e,t){var n=void 0!==t?e.filter((function(e){return e!==t})):e;return n[Math.floor(Math.random()*n.length)]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return v.a}));var a=n(4);function c(){var e=function(){},t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===typeof t)for(var n=0,r=Object.entries(t);n<r.length;n++){var c=Object(a.a)(r[n],2),s=c[0],o=c[1];t[s]="function"===typeof o?e:null}}function s(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}function o(e){return e<.01?e.toFixed(4):e.toFixed(2)}var i=function(e){var t=new RegExp(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g);return"number"===typeof e?e.toString().replace(/,/g,"").replace(t,"$1,"):e.replace(/,/g,"").replace(t,"$1,")};function u(e,t){return t[e]&&"message"in t[e]?t[e].message:""}var d=n(2),l=n.n(d),b=n(10);function j(e){return e.toLowerCase().trim()}function f(e,t){return O.apply(this,arguments)}function O(){return(O=Object(b.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getCode(j(t));case 3:return r=e.sent,a=!r||"0x"===r||"0x0"===r||"0x00"===r,e.abrupt("return",!1===a);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var p=n(34);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e+1-t;return Object(p.a)(Array(n)).map((function(e,n){return t+n}))}var m=function(e){return e.toString().replace(/,/g,"")};var v=n(195);n(25)},132:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return B}));var r=n(2),a=n.n(r),c=n(3),s=n(10),o=n(4),i=n(1),u=n(15),d=n(21),l=n(6),b=n(11),j=n(29),f=n(51),O=n(13),p=n(60),h=n(40),m=n(14),v=n(69),x=n(27),N=n(49),g=n(23),E=n(41),A=n(0);function w(e){var t,n=e.adapterName,r=e.proposal,w=r.daoProposalVotingAdapter,I=r.snapshotProposal,y=Object(i.useState)(l.f.STANDBY),C=Object(o.a)(y,2),D=C[0],_=C[1],k=Object(i.useState)(),T=Object(o.a)(k,2),S=T[0],R=T[1],P=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),F=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.instance.methods})),L=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi.find((function(e){return"getPriorAmount"===e.name}))})),M=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),B=null===(t=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})))||void 0===t?void 0:t.find((function(e){return"getMemberAddress"===e.name})),G=Object(u.c)((function(e){return e.contracts})),U=Object(m.f)(),V=U.account,W=U.provider,Y=U.web3Instance,H=Object(m.a)(),K=H.txEtherscanURL,z=H.txIsPromptOpen,q=H.txSend,J=H.txStatus,Q=Object(h.f)(),X=Q.isDisabled,$=Q.openWhyDisabledModal,Z=Q.WhyDisabledModal,ee=Object(m.b)().fast,te=null===w||void 0===w?void 0:w.getWeb3VotingAdapterContract().methods,ne=D===l.f.AWAITING_CONFIRM||D===l.f.PENDING||J===l.f.AWAITING_CONFIRM||J===l.f.PENDING,re=J===l.f.FULFILLED&&D===l.f.FULFILLED,ae=ne||re||z;function ce(){return(ce=Object(s.a)(a.a.mark((function e(){var t,r,s,o,i,u,h,m,v,x,N,g,E,A,w,y,C,D,k,T,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(P){e.next=5;break}throw new Error("No Bank Extension address was found.");case 5:if(B){e.next=7;break}throw new Error("No ABI for `getMemberAddress` was found.");case 7:if(L){e.next=9;break}throw new Error("No ABI for `getPriorAmount` was found.");case 9:if(I){e.next=11;break}throw new Error("No Snapshot proposal was found.");case 11:if(I.votes){e.next=13;break}throw new Error("No Snapshot proposal votes Array was found.");case 13:if(te){e.next=15;break}throw new Error('No "OffchainVotingContract" methods were found.');case 15:if(Y){e.next=17;break}throw new Error("No Web3 instance was found.");case 17:return _(l.f.AWAITING_CONFIRM),r=I.idInDAO,s=I.msg.payload.snapshot.toString(),o=Object(j.d)(n,G),e.next=23,F.getPriorAmount(b.E,b.w,s).call();case 23:return i=e.sent,u=Object(O.i)(Number(i)-1,0).map((function(e){return[M,B,[e.toString()]]})),e.next=27,Object(j.j)({calls:u,web3Instance:Y});case 27:return h=e.sent,m=h.map((function(e){return[P,L,[e,b.H,s]]})),e.next=31,Object(j.j)({calls:m,web3Instance:Y});case 31:return v=e.sent,x=h.map((function(e,t){var n,a=Object.values((null===(n=I.votes)||void 0===n?void 0:n.find((function(t){return Object(O.h)(e)===Object(O.h)(Object.values(t)[0].msg.payload.metadata.memberAddress)})))||{})[0];return Object(d.createVote)({proposalId:r,sig:(null===a||void 0===a?void 0:a.sig)||"0x",timestamp:a?Number(a.msg.timestamp):0,voteYes:(null===a||void 0===a?void 0:a.msg.payload.choice)===d.VoteChoicesIndex.Yes,weight:a?v[t]:"0"})})),e.next=35,Object(d.prepareVoteResult)({actionId:o,chainId:b.k,daoAddress:M,votes:x});case 35:return N=e.sent,g=N.voteResultTree,E=N.result,A=g.getHexRoot(),w=Object(d.getVoteResultRootDomainDefinition)(M,o,b.k),y=w.domain,C=w.types,D=JSON.stringify({domain:y,message:{root:A},primaryType:p.a,types:C}),e.next=43,Object(d.signMessage)(W,V,D);case 43:return k=e.sent,e.next=46,Object(f.a)(A);case 46:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=50;break}e.t1=void 0===t;case 50:if(!e.t1){e.next=54;break}e.t3=void 0,e.next=55;break;case 54:e.t3=t.merkle_root.length;case 55:if(e.t0=e.t3,e.t0){e.next=58;break}e.t0="";case 58:if(e.t4=e.t0,e.t4>0){e.next=63;break}return e.next=63,Object(f.f)({actionId:o,chainId:b.k,steps:E,merkleRoot:A,verifyingContract:M});case 63:return _(l.f.FULFILLED),T=[M,r,A,E[E.length-1],k],S=Object(c.a)({from:V||""},ee?{gasPrice:ee}:null),e.next=68,q("submitVoteResult",te,T,S);case 68:e.next=74;break;case 70:e.prev=70,e.t5=e.catch(0),R(e.t5),_(l.f.REJECTED);case 74:case"end":return e.stop()}}),e,null,[[0,70]])})))).apply(this,arguments)}return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{className:"proposaldetails__button",disabled:X||ae,onClick:X||ae?function(){}:function(){return ce.apply(this,arguments)},children:ne?Object(A.jsx)(E.a,{}):re?"Done":"Submit Vote Result"}),Object(A.jsx)(x.a,{error:S,renderText:"Something went wrong"}),ae&&Object(A.jsx)("div",{className:"form__submit-status-container",children:function(){if(J===l.f.AWAITING_CONFIRM||D===l.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(J){case l.f.PENDING:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(v.a,{intervalMs:2e3,messages:p.b,useFirstItemStart:!0,render:function(e){return Object(A.jsx)(g.a,{children:e},e)}}),Object(A.jsx)(N.a,{url:K,isPending:!0})]});case l.f.FULFILLED:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:"Result submitted!"}),Object(A.jsx)(N.a,{url:K})]});default:return null}}()}),X&&Object(A.jsx)("button",{className:"button--help-centered",onClick:$,children:"Why is submitting disabled?"})]}),Object(A.jsx)(Z,{title:"Why is this disabled?"})]})}var I=n(42);function y(e){var t,n,r,b=e.adapterName,j=e.proposal,p=Object(i.useState)(),v=Object(o.a)(p,2),N=v[0],g=v[1],E=Object(i.useState)(),w=Object(o.a)(E,2),y=w[0],C=w[1],D=Object(i.useRef)({addressIsDelegatedMessage:"",alreadyVotedMessage:""}),_=Object(u.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),k=Object(u.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),T=Object(m.f)().account,S=Object(I.g)(),R=S.signAndSendVote,P=S.voteDataStatus,F=Object(f.b)(null===(t=j.snapshotProposal)||void 0===t?void 0:t.votes,T||""),L=Object(h.f)(),M=L.isDisabled,G=L.openWhyDisabledModal,U=L.setOtherDisabledReasons,V=L.WhyDisabledModal,W=(null===(n=j.snapshotProposal)||void 0===n?void 0:n.idInDAO)||"",Y=(null===(r=j.snapshotProposal)||void 0===r?void 0:r.idInSnapshot)||"",H=P===l.f.AWAITING_CONFIRM||P===l.f.PENDING,K=P===l.f.FULFILLED,z=M||(H||K),q=H?N:void 0;function J(){return(J=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,W){e.next=3;break}throw new Error("No proposal hash was found.");case 3:if(Y){e.next=5;break}throw new Error("No proposal ID was found.");case 5:return g(d.VoteChoices[t]),e.next=8,R(Object(c.a)(Object(c.a)({},b?{adapterName:b}:void 0),{},{partialVoteData:{choice:t},proposalIdInDAO:W,proposalIdInSnapshot:Y}));case 8:return e.next=10,j.refetchProposalOrDraft();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(_){var e=k?(t=_,"Your member address is delegated to ".concat(Object(O.k)(t,7),". You must use that address to vote.")):"";D.current=Object(c.a)(Object(c.a)({},D.current),{},{addressIsDelegatedMessage:e})}var t;D.current=Object(c.a)(Object(c.a)({},D.current),{},{alreadyVotedMessage:F?"You have already voted.":""}),U(Object.values(D.current))}),[_,k,U,F]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(B,{onClick:z?function(){}:function(e){return J.apply(this,arguments)},buttonProps:{disabled:z,"aria-disabled":z},voteChosen:F,voteProgress:q}),Object(A.jsx)(x.a,{error:y,renderText:"Something went wrong"}),M&&Object(A.jsx)("button",{className:"button--help-centered",onClick:G,children:"Why is voting disabled?"}),Object(A.jsx)(V,{title:"Why is voting disabled?"})]})}var C=n(61);function D(e){var t=e.startLabel,n=e.startPeriodMs,r=e.endLabel,a=e.endedLabel,c=e.endPeriodMs,s=Object(i.useState)(null),u=Object(o.a)(s,2),d=u[0],l=u[1],b=Object(i.useCallback)((function(e,t){var n=function(e){var t=Date.parse(e.toString())-Date.parse((new Date).toString()),n=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:a,minutes:r,seconds:n}}(e),r=n.days,a=n.hours,c=n.minutes,s=n.seconds;return r>2&&t?"~".concat(r," days"):r>0?"".concat(j(r,"day")," : ").concat(j(a,"hr")," : ").concat(j(c,"min")):a>0?"".concat(j(a,"hr")," : ").concat(j(c,"min")):c>0?"".concat(j(c,"min")," : ").concat(j(s,"sec")):Object(A.jsx)("span",{className:"color-brightsalmon",children:j(s,"sec")})}),[]);function j(e,t){var n=0===e||e>1?"".concat(t,"s"):t;return"".concat(e," ").concat(n)}return Object(i.useEffect)((function(){var e=setInterval((function(){var s=new Date,o=new Date(n),i=new Date(c);if(s<o){var u=Object(A.jsxs)("span",{children:[Object(A.jsx)("span",{className:"votingstatus",children:t||"Starts:"})," ",Object(A.jsx)("span",{className:"votingstatus__timer",children:b(o,!0)})]});l(u)}else if(s<i){var d=Object(A.jsxs)("span",{children:[Object(A.jsx)("span",{className:"votingstatus",children:r||"Ends:"})," ",Object(A.jsx)("span",{className:"votingstatus__timer",children:b(i)})]});l(d)}else{l(Object(A.jsx)("span",{className:"votingstatus",children:a||"Ended"})),clearInterval(e)}}),1e3);return function(){clearInterval(e)}}),[b,r,c,a,t,n]),Object(A.jsx)("div",{children:d})}function _(e){return Object(A.jsxs)("svg",Object(c.a)(Object(c.a)({width:"20px",height:"20px",viewBox:"0 0 21 24",version:"1.1"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("path",{d:"M17.6516,6.408 C19.8162,8.36 21,11.02 21,13.844 C21,19.458 16.303,24 10.5,24 C4.69616,24 0,19.457 0,13.844 C0,8.506 4.22802,4.197 9.53077,3.731 L9.53077,1.875 L6.68768,1.875 C6.15238,1.875 5.71845,1.455 5.71845,0.938 C5.71845,0.42 6.15238,0 6.68768,0 L14.3123,0 C14.8476,0 15.2815,0.42 15.2815,0.938 C15.2815,1.455 14.8476,1.875 14.3123,1.875 L11.46923,1.875 L11.46923,3.731 C13.1316,3.877 14.7126,4.398 16.1059,5.252 L17.4392,3.962 C17.8177,3.596 18.4314,3.596 18.8099,3.962 C19.1885,4.328 19.1885,4.922 18.8099,5.288 L17.6516,6.408 Z M10.5,22.125 C15.2208,22.125 19.0615,18.41 19.0615,13.844 C19.0615,9.277 15.2209,5.562 10.5,5.562 C5.77913,5.562 1.93846,9.277 1.93846,13.844 C1.93846,18.41 5.77917,22.125 10.5,22.125 Z M11.46923,8.312 L11.46923,13.844 C11.46923,14.362 11.03531,14.781 10.5,14.781 C9.96469,14.781 9.53077,14.362 9.53077,13.844 L9.53077,8.312 C9.53077,7.795 9.96469,7.375 10.5,7.375 C11.03531,7.375 11.46923,7.795 11.46923,8.312 Z",id:"path-1"})}),Object(A.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(A.jsxs)("g",{id:"Group-70",children:[Object(A.jsx)("mask",{id:"mask-2",fill:"white",children:Object(A.jsx)("use",{xlinkHref:"#path-1"})}),Object(A.jsx)("use",{id:"Clip-69",fill:"currentColor",xlinkHref:"#path-1"})]})})]}))}function k(e){var t=e.hasVotingEnded,n=e.noUnits,r=e.renderStatus,a=e.renderTimer,c=e.showPercentages,s=void 0===c||c,o=e.totalUnits,i=e.yesUnits,u=r();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:"votingstatus-container",children:[Object(A.jsx)(_,{"aria-label":"Counting down until voting ends",role:"img"}),u&&Object(A.jsx)("span",{className:"votingstatus",children:u}),a(D)]}),Object(A.jsx)(M,{yesUnits:i,noUnits:n,totalUnits:o,votingExpired:t,showPercentages:s})]})}var T=Object(A.jsxs)("span",{children:["Grace period ends:",Object(A.jsx)("br",{})]}),S=Object(A.jsxs)("span",{children:["Grace period ended ",Object(A.jsx)("br",{})," ",Object(A.jsx)("span",{style:{textTransform:"none"},children:"Awaiting contract status\u2026"})]}),R={duration:150};function P(e){var t,n,r,a=e.countdownGracePeriodStartMs,c=e.proposal,s=e.votingResult,d=c.snapshotProposal,b=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),f=Object(i.useState)(),O=Object(o.a)(f,2),p=O[0],h=O[1],m=Object(i.useState)(0),v=Object(o.a)(m,2),x=v[0],N=v[1],g=Object(I.i)(null===(t=c.snapshotProposal)||void 0===t?void 0:t.msg.payload.start,null===(n=c.snapshotProposal)||void 0===n?void 0:n.msg.payload.end),E=g.hasVotingTimeStarted,w=g.hasVotingTimeEnded,y=g.votingTimeStartEndInitReady,D=Object(I.b)(s?void 0:c.snapshotProposal).offchainVotingResults,_=s||(null===(r=D[0])||void 0===r?void 0:r[1]),P=(null===d||void 0===d?void 0:d.msg.payload.start)||0,F=(null===d||void 0===d?void 0:d.msg.payload.end)||0,L=(null===_||void 0===_?void 0:_.Yes.units)||0,M=(null===_||void 0===_?void 0:_.No.units)||0,B=null===_||void 0===_?void 0:_.totalUnits;return Object(i.useEffect)((function(){w&&h(L>M)}),[w,M,L]),Object(i.useEffect)((function(){a&&b&&Object(j.f)(l.b.offchainVotingGracePeriod,b).then((function(e){return e&&N(1e3*Number(e))})).catch((function(){return N(0)}))}),[a,b]),Object(A.jsx)(k,{renderTimer:function(e){return y&&E&&!w?Object(A.jsx)(e,{startPeriodMs:1e3*P,endPeriodMs:1e3*F}):a&&x?Object(A.jsx)(e,{startPeriodMs:a,endLabel:T,endedLabel:S,endPeriodMs:a+x}):void 0},renderStatus:function(){return y?a?"":"boolean"===typeof p?p?"Approved":"Failed":void 0:Object(A.jsx)(C.a,{ariaLabel:"Getting off-chain voting status",intervalMs:200,fadeInProps:R})},hasVotingEnded:w,noUnits:M,totalUnits:B,yesUnits:L})}function F(e){return Object(A.jsx)("svg",Object(c.a)(Object(c.a)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"18",height:"18",viewBox:"0 0 512 512"},e),{},{children:Object(A.jsx)("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}))}function L(e,t){return(e/t*100).toFixed(0)}function M(e){var t=e.yesUnits,n=void 0===t?0:t,r=e.noUnits,a=void 0===r?0:r,c=e.totalUnits,s=e.votingExpired,o=e.showPercentages,i=c?L(n,c):"0",u=c?L(a,c):"0";return Object(A.jsxs)("div",{className:"votingbar-container",children:[Object(A.jsxs)("div",{className:"votingbar",children:[Object(A.jsx)("div",{className:"votingbar__segment--yes","aria-label":"".concat(i,"% yes votes"),style:{width:"".concat(i,"%")}}),Object(A.jsx)("div",{className:"votingbar__segment--no","aria-label":"".concat(u,"% no votes"),style:{width:"".concat(u,"%")}})]}),Object(A.jsx)("div",{className:"votingbar__percentages",children:o&&Object(A.jsxs)(A.Fragment,{children:[s&&n>a&&Object(A.jsx)("span",{className:"yes-check",children:Object(A.jsx)(F,{"aria-label":"Vote has passed"})}),Object(A.jsxs)("span",{className:"yes-percent",children:[i,"%"]}),Object(A.jsxs)("span",{className:"no-percent",children:[u,"%"]}),s&&n<=a&&Object(A.jsx)("span",{className:"no-check",children:Object(A.jsx)(F,{"aria-label":"Vote has failed"})})]})})]})}function B(e){var t=e.buttonProps,n=e.onClick,r=e.voteChosen,a=e.voteProgress,s=function(e){return r===e?"votingbutton--voted":""};function o(e){return a===e?{"aria-label":"Voting ".concat(e," \u2026")}:{}}function i(e){return a===e?Object(A.jsx)(E.a,{"aria-label":"Voting ".concat(e," spinner image"),role:"img"}):r===e?"Voted ".concat(e):"Vote ".concat(e)}function u(e){return function(){n(e)}}return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("button",Object(c.a)(Object(c.a)(Object(c.a)({},t),o(d.VoteChoices.Yes)),{},{className:"proposaldetails__button ".concat(s(d.VoteChoices.Yes)),onClick:u(d.VoteChoices.Yes),children:i(d.VoteChoices.Yes)})),Object(A.jsx)("button",Object(c.a)(Object(c.a)(Object(c.a)({},t),o(d.VoteChoices.No)),{},{className:"proposaldetails__button ".concat(s(d.VoteChoices.No)),onClick:u(d.VoteChoices.No),children:i(d.VoteChoices.No)}))]})}},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return l.a}));n(34);var r=n(2),a=n.n(r),c=n(10),s=n(4),o=n(1);var i=n(11),u=n(29),d=n(13),l=n(99),b=n(6);function j(){var e=Object(o.useState)(),t=Object(s.a)(e,2),n=t[0],r=t[1],j=Object(o.useState)(""),f=Object(s.a)(j,2),O=f[0],p=f[1],h=Object(o.useState)(!1),m=Object(s.a)(h,2),v=m[0],x=m[1],N=Object(o.useState)(),g=Object(s.a)(N,2),E=g[0],A=g[1],w=Object(o.useState)(b.f.STANDBY),I=Object(s.a)(w,2),y=I[0],C=I[1],D=Object(l.a)().networkId;function _(e){return function(t){C(b.f.PENDING),x(!1),D&&D!==i.c.GANACHE&&p("".concat(i.o[D],"/tx/").concat(t)),e&&e(t)}}function k(){return(k=Object(c.a)(a.a.mark((function e(){var t,n,c,s,o,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Object(d.c)(),e.prev=1,r(void 0),p(""),C(b.f.AWAITING_CONFIRM),x(!0),n=i.length,c=new Array(n),s=0;s<n;s++)c[s]=i[s];return c[4]=_(c[4]),e.next=10,u.b.apply(void 0,c);case 10:return o=e.sent,A(o),C(b.f.FULFILLED),t(),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(1),r(e.t0),C(b.f.REJECTED),x(!1),t(),e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return{txError:n,txEtherscanURL:O,txIsPromptOpen:v,txReceipt:E,txSend:function(){return k.apply(this,arguments)},txStatus:y}}var f=n(3),O=n(25),p=n(174),h=n.n(p),m=n(9),v=n(40);function x(e){return Object(O.toWei)(new h.a((e/10).toFixed(4)).toString(),"Gwei")}var N={average:void 0,fast:void 0,fastest:void 0,safeLow:void 0};function g(e){var t=(e||{}).ignoreEnvironment,n=void 0!==t&&t,r=Object(o.useState)(N),a=Object(s.a)(r,2),c=a[0],u=a[1],d=Object(o.useState)(),l=Object(s.a)(d,2),b=l[0],j=l[1],O=Object(o.useState)(m.a.STANDBY),p=Object(s.a)(O,2),h=p[0],g=p[1],E=Object(v.a)(),A=E.abortController,w=E.isMountedRef,I=!1===n&&"production"!==i.m;return Object(o.useEffect)((function(){if((null===A||void 0===A?void 0:A.signal)&&!I)return j(void 0),g(m.a.PENDING),fetch("https://ethgasstation.info/json/ethgasAPI.json",{signal:A.signal}).then((function(e){if(w.current){if(!e.ok)throw new Error("Something went wrong while getting the latest gas price.");return g(m.a.FULFILLED),e.json()}})).then((function(e){if(w.current){var t=e.average,n=e.fast,r=e.fastest,a=e.safeLow;u({average:x(t),fast:x(n),fastest:x(r),safeLow:x(a)})}})).catch((function(e){w.current&&(j(e),u(N),g(m.a.REJECTED))})),function(){A.abort()}}),[A,w,I]),Object(f.a)(Object(f.a)({},c),{},{gasPriceError:b,gasPriceStatus:h})}var E=n(15),A=n(19);function w(){var e=Object(E.b)();function t(){return(t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.web3Instance,t.prev=1,t.next=4,e(Object(A.H)(r));case 4:return t.next=6,e(Object(A.G)(r));case 6:return t.next=8,e(Object(A.D)(r));case 8:return t.next=10,e(Object(A.E)(r));case 10:return t.next=12,e(Object(A.L)(r));case 12:return t.next=14,e(Object(A.M)(r));case 14:return t.next=16,e(Object(A.N)(r));case 16:return t.next=18,e(Object(A.R)(r));case 18:return t.next=20,e(Object(A.B)(r));case 20:return t.next=22,e(Object(A.C)(r));case 22:return t.next=24,e(Object(A.N)(r));case 24:return t.next=26,e(Object(A.Q)(r));case 26:return t.next=28,e(Object(A.S)(r));case 28:return t.next=30,e(Object(A.J)(r));case 30:return t.next=32,e(Object(A.U)(r));case 32:return t.next=34,e(Object(A.T)(r));case 34:return t.next=36,e(Object(A.P)(r));case 36:return t.next=38,e(Object(A.O)(r));case 38:return t.next=40,e(Object(A.F)(r));case 40:return t.next=42,e(Object(A.I)(r));case 42:return t.next=44,e(Object(A.K)(r));case 44:t.next=49;break;case 46:throw t.prev=46,t.t0=t.catch(1),t.t0;case 49:case"end":return t.stop()}}),t,null,[[1,46]])})))).apply(this,arguments)}return Object(o.useCallback)((function(e){return t.apply(this,arguments)}),[e])}function I(){var e=Object(l.a)(),t=e.networkId,n=e.connected,r=Object(o.useState)(),a=Object(s.a)(r,2),c=a[0],u=a[1];return Object(o.useEffect)((function(){n&&t!==i.k?u(new Error("Please connect to the ".concat(i.d[i.k],"."))):u(void 0)}),[n,t]),{defaultChain:i.k,defaultChainError:c,isDefaultChain:t===i.k}}var y=n(979),C=!1;function D(e,t){var n=Object(o.useState)(C),r=Object(s.a)(n,2),i=r[0],u=r[1],l=Object(v.e)().isMountedRef,b=Object(o.useCallback)((function(e,t){return j.apply(this,arguments)}),[l]);function j(){return(j=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.g)(t,new y.a(n));case 3:if(r=e.sent,l.current){e.next=6;break}return e.abrupt("return");case 6:u(r),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(0),l.current){e.next=13;break}return e.abrupt("return");case 13:u(C);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){t&&e&&b(e,t)}),[e,b,t]),i}n(170)},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=n(147),c=n.n(a),s=n(23),o=n(0);function i(e){var t=e.children,n=e.isOpen,a=e.isOpenHandler,i=e.keyProp,u=e.modalClassNames,d=e.styleProps;return Object(o.jsx)(c.a,{ariaHideApp:!1,className:"modal-container ".concat(u),isOpen:n,onRequestClose:function(){a(n)},overlayClassName:"modal-overlay",role:"dialog",style:Object(r.a)({overlay:{zIndex:"99"}},d),children:Object(o.jsx)(s.a,{children:Object(o.jsx)("div",{className:"modal",children:t})})},i)}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return O}));var r,a=n(2),c=n.n(a),s=n(3),o=n(10),i=n(4),u=n(1),d=n(15),l=n(25),b=n(11),j=n(14),f=n(19);function O(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.CouponOnboardingContract})),n=Object(u.useState)(),a=Object(i.a)(n,2),O=a[0],p=a[1],h=Object(u.useState)(r.STANDBY),m=Object(i.a)(h,2),v=m[0],x=m[1],N=Object(j.b)().fast,g=Object(j.f)(),E=g.account,A=g.web3Instance,w=Object(j.d)().defaultChainError,I=Object(j.a)(),y=I.txError,C=I.txEtherscanURL,D=I.txIsPromptOpen,_=I.txSend,k=I.txStatus,T=Object(d.b)();function S(){return(S=Object(o.a)(c.a.mark((function n(a,o){var i,u,d;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!w){n.next=3;break}throw new Error("Wrong network connected.");case 3:if(a){n.next=5;break}throw new Error("No coupon data was found.");case 5:if(E){n.next=7;break}throw new Error("No account found.");case 7:if(e){n.next=9;break}throw new Error("No DAO Registry contract was found.");case 9:if(t){n.next=11;break}throw new Error("No Coupon Onboarding contract was found.");case 11:if(A){n.next=13;break}throw new Error("No Web3 instance was found.");case 13:return x(r.PENDING),i=Object(l.toChecksumAddress)(a.recipient),u=[e.contractAddress,i,String(a.amount),Number(a.nonce),a.signature],d=Object(s.a)({from:E||""},N?{gasPrice:N}:null),n.next=19,_("redeemCoupon",t.instance.methods,u,d);case 19:if(!n.sent){n.next=29;break}return n.next=23,fetch("".concat(b.g,"/api/coupon/redeem"),{method:"PATCH",body:JSON.stringify({signature:a.signature}),headers:{"Content-Type":"application/json"}});case 23:if(x(r.FULFILLED),a.recipient.toLowerCase()!==E.toLowerCase()){n.next=29;break}return n.next=27,T(Object(f.A)({account:E,daoRegistryContract:e,web3Instance:A}));case 27:return n.next=29,R(o);case 29:n.next=35;break;case 31:n.prev=31,n.t0=n.catch(0),p(n.t0),x(r.REJECTED);case 35:case"end":return n.stop()}}),n,null,[[0,31]])})))).apply(this,arguments)}function R(e){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return{isInProcessOrDone:v===r.PENDING||v===r.FULFILLED,redeemCoupon:function(e,t){return S.apply(this,arguments)},submitError:O,submitStatus:v,txStatus:k,txError:y,txEtherscanURL:C,txIsPromptOpen:D}}!function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},167:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return O}));var r=n(3),a=n(2),c=n.n(a),s=n(4),o=n(10),i=n(53),u=n(29),d=n(6),l=n(13),b="SET_CONNECTED_MEMBER",j="CLEAR_CONNECTED_MEMBER";function f(e){var t=e.account,n=e.daoRegistryContract,a=e.web3Instance;return function(){var e=Object(o.a)(c.a.mark((function e(o){var j,f,p,h,m,v,x,N,g,E,A,w,I,y,C,D;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j=null===n||void 0===n?void 0:n.instance.methods,f=null===n||void 0===n?void 0:n.contractAddress,p=null===n||void 0===n?void 0:n.abi.find((function(e){return"getAddressIfDelegated"===e.name})),h=null===n||void 0===n?void 0:n.abi.find((function(e){return"members"===e.name})),m=null===n||void 0===n?void 0:n.abi.find((function(e){return"isActiveMember"===e.name})),v=null===n||void 0===n?void 0:n.abi.find((function(e){return"getCurrentDelegateKey"===e.name})),t&&f&&j&&p&&v&&m&&h){e.next=9;break}return o(O()),e.abrupt("return");case 9:return e.prev=9,e.next=12,Object(u.j)({calls:[[f,p,[t]],[f,h,[t]],[f,m,[f,t]],[f,v,[t]]],web3Instance:a});case 12:x=e.sent,N=Object(s.a)(x,4),g=N[0],E=N[1],A=N[2],w=N[3],I=Object(u.i)(d.d.EXISTS,E),y=A||I?w:i.a,C=A||I?g:i.a,D=Object(l.h)(t)===Object(l.h)(C)&&Object(l.h)(t)!==Object(l.h)(y),o((c={delegateKey:y,isAddressDelegated:D,isActiveMember:A,memberAddress:C},Object(r.a)({type:b},c))),e.next=29;break;case 25:throw e.prev=25,e.t0=e.catch(9),o(O()),e.t0;case 29:case"end":return e.stop()}var c}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}()}function O(){return{type:j}}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r="CONNECT_MODAL_CLOSE",a="CONNECT_MODAL_OPEN";function c(){return{type:r}}function s(){return{type:a}}},17:function(e,t,n){"use strict";var r,a,c;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),function(e){e.BANK="bank",e.CONFIGURATION="configuration",e.COUPON_ONBOARDING="coupon-onboarding",e.DAO_REGISTRY="daoRegistry",e.DISTRIBUTE="distribute",e.EXECUTION="execution",e.FINANCING="financing",e.GUILDKICK="guildkick",e.MANAGING="managing",e.NFT="nft",e.NONVOTING_ONBOARDING="nonvoting-onboarding",e.OFFCHAINVOTING="offchainvoting",e.ONBOARDING="onboarding",e.RAGEQUIT="ragequit",e.TRIBUTE="tribute",e.TRIBUTE_NFT="tribute-nft",e.VOTING="voting"}(r||(r={})),function(e){e.BANK="bank",e.ERC20="erc20-ext",e.NFT="nft"}(a||(a={})),function(e){e.OffchainVotingContract="OffchainVotingContract",e.VotingContract="VotingContract"}(c||(c={}))},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return N}));var r,a,c,s=n(2),o=n.n(s),i=n(10),u=n(4),d=n(3),l=n(1),b=n(65),j=n.n(b),f=n(437),O=n.n(f),p=n(9),h=n(11),m=n(33);!function(e){e.DARK="dark",e.LIGHT="light"}(r||(r={})),function(e){e[e.CONNECT_WEB3MODAL=0]="CONNECT_WEB3MODAL",e[e.DEACTIVATE_PROVIDER_WEB3MODAL=1]="DEACTIVATE_PROVIDER_WEB3MODAL",e[e.ERROR_WEB3MODAL=2]="ERROR_WEB3MODAL",e[e.INITIAL_CACHED_CONNECTOR_CHECK_STATUS=3]="INITIAL_CACHED_CONNECTOR_CHECK_STATUS",e[e.NEW_WEB3MODAL=4]="NEW_WEB3MODAL",e[e.UPDATE_ACCOUNT=5]="UPDATE_ACCOUNT"}(a||(a={})),function(e){e.CONNECT="CONNECT",e.DISCONNECT="DISCONNECT"}(c||(c={}));var v={};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.CONNECT_WEB3MODAL:var c=r||{},s=c.provider,o=c.networkId,i=c.account,u=c.connected,l=c.web3Instance;return Object(d.a)(Object(d.a)({},e),{},{account:i,connected:u,networkId:o,provider:s,web3Instance:l});case a.DEACTIVATE_PROVIDER_WEB3MODAL:return v;case a.ERROR_WEB3MODAL:var b=r||{},j=b.error;return Object(d.a)(Object(d.a)({},e),{},{error:j});case a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS:var f=r||{},O=f.initialCachedConnectorCheckStatus;return Object(d.a)(Object(d.a)({},e),{},{initialCachedConnectorCheckStatus:O});case a.NEW_WEB3MODAL:var p=r||{},h=p.web3Modal;return{web3Modal:h};case a.UPDATE_ACCOUNT:var m=r||{},x=m.account;return Object(d.a)(Object(d.a)({},e),{},{account:x});default:return v}}function N(e){var t,n,r=e.defaultChain,s=e.defaultTheme,b=e.onBeforeConnect,f=e.onBeforeDisconnect,v=e.providerOptions,N=Object(l.useReducer)(x,{initialCachedConnectorCheckStatus:p.a.STANDBY}),g=Object(u.a)(N,2),E=g[0],A=g[1],w=s,I=r||h.k,y=Object(l.useCallback)(k,[b,E.web3Modal]),C=Object(l.useCallback)((function(e){var t,n;if(!(null===(t=E.web3Modal)||void 0===t?void 0:t.cachedProvider))return;y(null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider)}),[y,null===(t=E.web3Modal)||void 0===t?void 0:t.cachedProvider]);function D(e){var t=Object(u.a)(e,1)[0];A({type:a.UPDATE_ACCOUNT,payload:{account:t}})}function _(){return(_=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS,"string"===typeof t){e.next=3;break}return e.abrupt("return");case 3:if(A({type:r,payload:{initialCachedConnectorCheckStatus:p.a.PENDING}}),!t){e.next=7;break}return e.next=7,n(t);case 7:A({type:r,payload:{initialCachedConnectorCheckStatus:p.a.FULFILLED}});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(o.a.mark((function e(t){var n,r,s,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E.web3Modal){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E.web3Modal.connectTo(t);case 5:return n=e.sent,r=new j.a(n),e.next=9,r.eth.getAccounts();case 9:return s=e.sent,i=Object(u.a)(s,1),d=i[0],e.next=14,null===b||void 0===b?void 0:b();case 14:return e.t0=A,e.t1=a.CONNECT_WEB3MODAL,e.t2=d,e.next=19,r.eth.net.getId();case 19:e.t3=e.sent,e.t4=n,e.t5=r,e.t6={account:e.t2,connected:!0,networkId:e.t3,provider:e.t4,web3Instance:e.t5},e.t7={type:e.t1,payload:e.t6},(0,e.t0)(e.t7),e.next=30;break;case 27:e.prev=27,e.t8=e.catch(0),A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:t,error:new Error("Failed to connect to ".concat(t,".")),type:c.CONNECT}}});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function S(){return(S=Object(i.a)(o.a.mark((function e(){var t,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=E.provider)||void 0===t||null===(n=t.close)||void 0===n?void 0:n.call(t);case 3:if(e.t0=E.web3Modal,!e.t0){e.next=7;break}return e.next=7,E.web3Modal.clearCachedProvider();case 7:return e.next=9,null===f||void 0===f?void 0:f();case 9:A({type:a.DEACTIVATE_PROVIDER_WEB3MODAL}),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(0),s=(null===(r=E.web3Modal)||void 0===r?void 0:r.cachedProvider)||"",A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:s,error:new Error("Failed to disconnect from ".concat(s||"provider",".")),type:c.DISCONNECT}}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){var e,t,n=E.provider;return null===n||void 0===n||null===(e=n.on)||void 0===e||e.call(n,"accountsChanged",D),null===n||void 0===n||null===(t=n.on)||void 0===t||t.call(n,"chainChanged",C),function(){var e,t;null===n||void 0===n||null===(e=n.removeListener)||void 0===e||e.call(n,"accountsChanged",D),null===n||void 0===n||null===(t=n.removeListener)||void 0===t||t.call(n,"chainChanged",C)}}),[C,E.provider]),Object(l.useEffect)((function(){E.web3Modal||A({type:a.NEW_WEB3MODAL,payload:{web3Modal:new O.a({cacheProvider:!0,network:m.c[m.b[I]],providerOptions:v,theme:w})}})}),[v,E.web3Modal,I,w]),Object(l.useEffect)((function(){var e;E.initialCachedConnectorCheckStatus!==p.a.FULFILLED&&E.initialCachedConnectorCheckStatus!==p.a.PENDING&&function(e,t){_.apply(this,arguments)}(null===(e=E.web3Modal)||void 0===e?void 0:e.cachedProvider,y)}),[y,E.initialCachedConnectorCheckStatus,null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider]),Object(d.a)(Object(d.a)({},E),{},{connectWeb3Modal:k,disconnectWeb3Modal:function(){return S.apply(this,arguments)},providerOptions:v})}},19:function(e,t,n){"use strict";n.d(t,"A",(function(){return r.d})),n.d(t,"w",(function(){return r.c})),n.d(t,"y",(function(){return a.c})),n.d(t,"z",(function(){return a.d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return I})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return D})),n.d(t,"o",(function(){return _})),n.d(t,"p",(function(){return k})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return R})),n.d(t,"t",(function(){return P})),n.d(t,"u",(function(){return F})),n.d(t,"v",(function(){return L})),n.d(t,"x",(function(){return M})),n.d(t,"D",(function(){return B})),n.d(t,"G",(function(){return G})),n.d(t,"H",(function(){return U})),n.d(t,"Q",(function(){return Y})),n.d(t,"C",(function(){return H})),n.d(t,"S",(function(){return K})),n.d(t,"J",(function(){return z})),n.d(t,"N",(function(){return q})),n.d(t,"B",(function(){return J})),n.d(t,"O",(function(){return Q})),n.d(t,"I",(function(){return X})),n.d(t,"R",(function(){return $})),n.d(t,"M",(function(){return Z})),n.d(t,"L",(function(){return ee})),n.d(t,"E",(function(){return te})),n.d(t,"T",(function(){return ne})),n.d(t,"F",(function(){return re})),n.d(t,"P",(function(){return ae})),n.d(t,"K",(function(){return ce})),n.d(t,"U",(function(){return se})),n.d(t,"V",(function(){return ue.b}));var r=n(167),a=n(168),c=n(3),s=n(62),o=n(2),i=n.n(o),u=n(10),d=n(6),l=n(11),b=n(29),j=n(17),f=n(196),O=["type"],p="CLEAR_CONTRACTS",h="CONTRACT_BANK_ADAPTER",m="CONTRACT_BANK_EXTENSION",v="CONTRACT_BANK_FACTORY",x="CONTRACT_CONFIGURATION",N="CONTRACT_COUPON_ONBOARDING",g="CONTRACT_DAO_FACTORY",E="CONTRACT_DAO_REGISTRY",A="CONTRACT_DAO_REGISTRY_ADAPTER",w="CONTRACT_DISTRIBUTE",I="CONTRACT_ERC20_EXTENSION",y="CONTRACT_FINANCING",C="CONTRACT_GUILDKICK",D="CONTRACT_MANAGING",_="CONTRACT_NFT_ADAPTER",k="CONTRACT_NFT_EXTENSION",T="CONTRACT_ONBOARDING",S="CONTRACT_RAGEQUIT",R="CONTRACT_TRIBUTE",P="CONTRACT_TRIBUTE_NFT",F="CONTRACT_VOTING",L="CONTRACT_VOTING_OP_ROLLUP";function M(){return{type:p}}function B(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(13).then(n.t.bind(null,986,3));case 4:a=t.sent,c=a.default,s=c,o=l.b[l.k],u=new e.eth.Contract(s,o),r(oe({type:v,abi:s,contractAddress:o,instance:u}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function G(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(16).then(n.t.bind(null,987,3));case 4:a=t.sent,c=a.default,s=c,o=l.h[l.k],u=new e.eth.Contract(s,o),r(oe({type:g,abi:s,contractAddress:o,instance:u}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function U(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=12;break}return t.next=4,n.e(17).then(n.t.bind(null,988,3));case 4:if(a=t.sent,c=a.default,s=c,o=l.j){t.next=10;break}throw new Error("No DAO Registry contract address was found.");case 10:u=new e.eth.Contract(s,o),r(oe({type:E,abi:s,contractAddress:o,instance:u}));case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}function V(e,t){return ie({actionType:F,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.VotingContract,contractAddress:t,lazyImport:function(){return n.e(2).then(n.t.bind(null,989,3))},web3Instance:e})}function W(e,t){return ie({actionType:L,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.OffchainVotingContract,contractAddress:t,lazyImport:function(){return n.e(1).then(n.t.bind(null,990,3))},web3Instance:e})}function Y(e,t){return ie({actionType:T,adapterNameForRedux:j.a.ONBOARDING,adapterOrExtensionName:d.a.onboarding,contractAddress:t,lazyImport:function(){return n.e(27).then(n.t.bind(null,991,3))},web3Instance:e})}function H(e,t){return ie({actionType:m,adapterNameForRedux:j.b.BANK,adapterOrExtensionName:d.c.bank,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(12).then(n.t.bind(null,992,3))},web3Instance:e})}function K(e,t){return ie({actionType:R,adapterNameForRedux:j.a.TRIBUTE,adapterOrExtensionName:d.a.tribute,contractAddress:t,lazyImport:function(){return n.e(29).then(n.t.bind(null,993,3))},web3Instance:e})}function z(e,t){return ie({actionType:w,adapterNameForRedux:j.a.DISTRIBUTE,adapterOrExtensionName:d.a.distribute,contractAddress:t,lazyImport:function(){return n.e(19).then(n.t.bind(null,994,3))},web3Instance:e})}function q(e,t){return ie({actionType:D,adapterNameForRedux:j.a.MANAGING,adapterOrExtensionName:d.a.managing,contractAddress:t,lazyImport:function(){return n.e(23).then(n.t.bind(null,995,3))},web3Instance:e})}function J(e,t){return ie({actionType:h,adapterNameForRedux:j.a.BANK,adapterOrExtensionName:d.a.bank,contractAddress:t,lazyImport:function(){return n.e(11).then(n.t.bind(null,996,3))},web3Instance:e})}function Q(e,t){return ie({actionType:_,adapterNameForRedux:j.a.NFT,adapterOrExtensionName:d.a.nft,contractAddress:t,lazyImport:function(){return n.e(25).then(n.t.bind(null,997,3))},web3Instance:e})}function X(e,t){return ie({actionType:A,adapterNameForRedux:j.a.DAO_REGISTRY,adapterOrExtensionName:d.a.dao_registry,contractAddress:t,lazyImport:function(){return n.e(18).then(n.t.bind(null,998,3))},web3Instance:e})}function $(e,t){return ie({actionType:S,adapterNameForRedux:j.a.RAGEQUIT,adapterOrExtensionName:d.a.ragequit,contractAddress:t,lazyImport:function(){return n.e(28).then(n.t.bind(null,999,3))},web3Instance:e})}function Z(e,t){return ie({actionType:C,adapterNameForRedux:j.a.GUILDKICK,adapterOrExtensionName:d.a.guildkick,contractAddress:t,lazyImport:function(){return n.e(22).then(n.t.bind(null,1e3,3))},web3Instance:e})}function ee(e,t){return ie({actionType:y,adapterNameForRedux:j.a.FINANCING,adapterOrExtensionName:d.a.financing,contractAddress:t,lazyImport:function(){return n.e(21).then(n.t.bind(null,1001,3))},web3Instance:e})}function te(e,t){return ie({actionType:x,adapterNameForRedux:j.a.CONFIGURATION,adapterOrExtensionName:d.a.configuration,contractAddress:t,lazyImport:function(){return n.e(14).then(n.t.bind(null,1002,3))},web3Instance:e})}function ne(e,t){return ie({actionType:P,adapterNameForRedux:j.a.TRIBUTE_NFT,adapterOrExtensionName:d.a.tribute_nft,contractAddress:t,lazyImport:function(){return n.e(30).then(n.t.bind(null,1003,3))},web3Instance:e})}function re(e,t){return ie({actionType:N,adapterNameForRedux:j.a.COUPON_ONBOARDING,adapterOrExtensionName:d.a.coupon_onboarding,contractAddress:t,lazyImport:function(){return n.e(15).then(n.t.bind(null,1004,3))},web3Instance:e})}function ae(e,t){return ie({actionType:k,adapterNameForRedux:j.b.NFT,adapterOrExtensionName:d.c.nft,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(26).then(n.t.bind(null,1005,3))},web3Instance:e})}function ce(e,t){return ie({actionType:I,adapterNameForRedux:j.b.ERC20,adapterOrExtensionName:d.c.erc20,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(20).then(n.t.bind(null,1006,3))},web3Instance:e})}function se(e,t){return function(){var n=Object(u.a)(i.a.mark((function n(r,a){var c,s,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=29;break}if(a().contracts.DaoRegistryContract){n.next=6;break}return console.warn("Please init the DaoRegistry contract before the voting contract."),n.abrupt("return");case 6:if(c="",!(s=t||"")){n.next=12;break}return n.next=11,Object(b.h)(s,e);case 11:c=n.sent;case 12:if(s||c){n.next=19;break}return n.next=15,Object(b.c)(d.a.voting,null===(o=a().contracts.DaoRegistryContract)||void 0===o?void 0:o.instance);case 15:return s=n.sent,n.next=18,Object(b.h)(s,e);case 18:c=n.sent;case 19:n.t0=c,n.next="VotingContract"===n.t0?22:"OffchainVotingContract"===n.t0?25:28;break;case 22:return n.next=24,V(e,s)(r,a);case 24:return n.abrupt("return",n.sent);case 25:return n.next=27,W(e,s)(r,a);case 27:return n.abrupt("return",n.sent);case 28:throw new Error("Voting contract name could not be found.");case 29:n.next=34;break;case 31:n.prev=31,n.t1=n.catch(0),console.warn("The voting contract could not be found in the DAO. Are you sure you meant to add this contract's ABI?");case 34:case"end":return n.stop()}}),n,null,[[0,31]])})));return function(e,t){return n.apply(this,arguments)}}()}function oe(e){var t=e.type,n=Object(s.a)(e,O);return Object(c.a)({type:t},n)}function ie(e){var t=e.actionType,n=e.adapterNameForRedux,r=e.adapterOrExtensionName,a=e.contractAddress,c=e.isExtension,s=void 0!==c&&c,o=e.lazyImport,d=e.web3Instance;return function(){var e=Object(u.a)(i.a.mark((function e(c,u){var l,j,O,p,h,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:if(O=e.sent,p=O.default,h=p,e.t0=a,e.t0){e.next=18;break}if(!s){e.next=14;break}return e.next=11,Object(f.a)(r,null===(l=u().contracts.DaoRegistryContract)||void 0===l?void 0:l.instance);case 11:e.t1=e.sent,e.next=17;break;case 14:return e.next=16,Object(b.c)(r,null===(j=u().contracts.DaoRegistryContract)||void 0===j?void 0:j.instance);case 16:e.t1=e.sent;case 17:e.t0=e.t1;case 18:m=e.t0,c(oe({type:t,abi:h,contractAddress:m,adapterOrExtensionName:n,instance:new d.eth.Contract(h,m)})),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(0),console.warn('The contract "'.concat(r,"\" could not be found in the DAO. Are you sure you meant to add this contract's ABI?"));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}()}var ue=n(197)},195:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(81);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(null===e||"undefined"===typeof e)return"---";if(Object(r.a)(e)){var n=e.substring(0,t),a=e.substring(e.length-3);return n+"..."+a}return e}},196:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),a=n.n(r),c=n(10),s=n(65),o=n.n(s);function i(e,t){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return e.next=5,n.methods.getExtensionAddress(o.a.utils.sha3(t)).call();case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},197:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(3),a="SET_SUBGRAPH_NETWORK_STATUS";function c(e){return Object(r.a)({type:a},e)}},199:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(3),c=n(1),s=n(23),o=n(0),i=["",".",".","."],u={position:"absolute"},d={height:1,width:1};function l(e){var t=e.ariaLabel,n=e.intervalMs,l=void 0===n?1e3:n,b=e.fadeInProps,j=Object(a.a)(Object(a.a)({},b),{},{inline:!0}),f=Object(c.useState)(1),O=Object(r.a)(f,2),p=O[0],h=O[1];return Object(c.useEffect)((function(){var e=setInterval((function(){return h((function(e){return(e+1)%i.length}))}),l);return function(){clearInterval(e)}}),[l]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("span",{"aria-label":t,style:u,children:[Object(o.jsx)("span",{children:p>=0&&i[0]}),Object(o.jsx)("span",{children:p>=1&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[1]}))}),Object(o.jsx)("span",{children:p>=2&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[2]}))}),Object(o.jsx)("span",{children:p>=3&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[3]}))})]}),Object(o.jsx)("span",{style:d,children:"\xa0"})]})}},200:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2),a=n.n(r),c=n(34),s=n(10),o=n(3),i=n(4),u=n(1),d=n(15),l=n(21),b=n(29),j=n(60),f=n(14),O=n(40),p=n(42),h=n(6),m=n(69),v=n(27),x=n(49),N=n(23),g=n(41),E=n(9),A=n(0);function w(e){var t=e.checkApplicant,n=e.proposal,r=n.snapshotDraft,w=n.refetchProposalOrDraft,I=Object(u.useState)(),y=Object(i.a)(I,2),C=y[0],D=y[1],_=Object(u.useRef)({invalidApplicantMessage:""}),k=Object(d.c)((function(e){return e.contracts})),T=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),S=Object(f.f)(),R=S.account,P=S.web3Instance,F=Object(f.a)(),L=F.txEtherscanURL,M=F.txIsPromptOpen,B=F.txSend,G=F.txStatus,U=Object(O.f)(),V=U.isDisabled,W=U.openWhyDisabledModal,Y=U.WhyDisabledModal,H=U.setOtherDisabledReasons,K=Object(p.h)(),z=K.proposalSignAndSendStatus,q=K.signAndSendProposal,J=Object(f.b)().fast,Q=Object(p.a)(t),X=Q.checkApplicantError,$=Q.checkApplicantInvalidMsg,Z=Q.checkApplicantStatus,ee=Q.isApplicantValid,te=G===h.f.AWAITING_CONFIRM||G===h.f.PENDING||z===h.f.AWAITING_CONFIRM||z===h.f.PENDING,ne=G===h.f.FULFILLED&&z===h.f.FULFILLED,re=te||ne||M;function ae(){return(ae=Object(s.a)(a.a.mark((function e(){var t,n,s,i,u,d,j,f,O,p,h,m,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot draft was found.");case 5:return t=Object(b.e)(r.actionId,k),n=r.msg,s=n.payload,i=s.name,u=s.body,d=s.metadata,j=n.timestamp,e.next=9,q({partialProposalData:{name:i,body:u,metadata:d,timestamp:j},adapterAddress:t.contractAddress,type:l.SnapshotType.proposal});case 9:return f=e.sent,O=f.data,p=f.signature,h=Object(l.prepareVoteProposalData)({payload:{name:O.payload.name,body:O.payload.body,choices:O.payload.choices,snapshot:O.payload.snapshot.toString(),start:O.payload.start,end:O.payload.end},sig:p,space:O.space,timestamp:parseInt(O.timestamp)},P),m=[T,r.idInDAO].concat(Object(c.a)(d.submitActionArgs||[]),[h]),v=Object(o.a)({from:R||""},J?{gasPrice:J}:null),e.next=17,B("submitProposal",t.instance.methods,m,v);case 17:w(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),D(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){t&&(X&&console.warn("Error checking if the applicant address is valid: ".concat(X.message)),Z===E.a.FULFILLED&&!ee&&$&&(_.current=Object(o.a)(Object(o.a)({},_.current),{},{invalidApplicantMessage:$})),H(Object.values(_.current)))}),[t,X,$,Z,ee,H]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{className:"proposaldetails__button",disabled:V||re,onClick:V||re?function(){}:function(){return ae.apply(this,arguments)},children:te?Object(A.jsx)(g.a,{}):ne?"Done":"Sponsor"}),Object(A.jsx)(v.a,{error:C,renderText:"Something went wrong"}),re&&Object(A.jsx)("div",{className:"form__submit-status-container",children:function(){if(G===h.f.AWAITING_CONFIRM||z===h.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(G){case h.f.PENDING:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{intervalMs:2e3,messages:j.b,useFirstItemStart:!0,render:function(e){return Object(A.jsx)(N.a,{children:e},e)}}),Object(A.jsx)(x.a,{url:L,isPending:!0})]});case h.f.FULFILLED:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:"Proposal submitted!"}),Object(A.jsx)(x.a,{url:L})]});default:return null}}()}),V&&Object(A.jsx)("button",{className:"button--help-centered",onClick:W,children:"Why is sponsoring disabled?"})]}),Object(A.jsx)(Y,{title:"Why is sponsoring disabled?"})]})}},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(4),a=n(1),c=n(65),s=n.n(c),o=n(170),i=n(9),u=n(11),d=n(0),l=Object(a.createContext)({});function b(e){var t,n=e.children,c=e.defaultChain,b=e.defaultTheme,j=void 0===b?o.a.DARK:b,f=e.onBeforeConnect,O=e.onBeforeDisconnect,p=e.providerOptions,h=Object(a.useRef)(new s.a(new s.a.providers.WebsocketProvider(u.n))),m=Object(a.useState)(),v=Object(r.a)(m,2),x=v[0],N=v[1],g={defaultChain:c,defaultTheme:j,onBeforeConnect:f,onBeforeDisconnect:O,providerOptions:p},E=Object(o.b)(g),A=E.account,w=E.connected,I=E.connectWeb3Modal,y=E.disconnectWeb3Modal,C=E.error,D=E.initialCachedConnectorCheckStatus,_=E.networkId,k=void 0===_?x:_,T=E.provider,S=void 0===T?null===(t=h.current)||void 0===t?void 0:t.currentProvider:T,R=E.web3Instance,P=void 0===R?h.current:R,F=E.web3Modal;Object(a.useEffect)((function(){var e;w||D!==i.a.FULFILLED||(null===(e=h.current)||void 0===e||e.eth.net.getId().then(N).catch((function(){return N(void 0)})))}),[w,D]);var L={account:A,connected:w,connectWeb3Modal:I,disconnectWeb3Modal:y,error:C,initialCachedConnectorCheckStatus:D,networkId:k,provider:S,providerOptions:p,web3Instance:P,web3Modal:F};return Object(d.jsx)(l.Provider,{value:L,children:n})}},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=(n(1),n(965)),c=n(0),s=function(e){return{transition:"opacity ".concat(e.duration||300,"ms cubic-bezier(0, 0.69, 0.32, 0.64)"),opacity:0}},o={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};function i(e){var t=e.inline;return Object(c.jsx)(a.a,{appear:!0,in:void 0===e.show||e.show,timeout:e.duration||300,children:function(n){return t?Object(c.jsx)("span",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children}):Object(c.jsx)("div",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children})}})}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n(4),c=n(1),s=n(13),o=n(23),i=n(0);function u(e){var t=e.error,n=e.renderText,u=Object(c.useState)(!1),d=Object(a.a)(u,2),l=d[0],b=d[1],j="function"!==typeof t&&(4001===(null===t||void 0===t?void 0:t.code)||/^(the )?user rejected (the )?request$/g.test(Object(s.h)((null===t||void 0===t?void 0:t.message)||""))),f="string"===typeof n?n:n(),O="string"===typeof n&&"function"!==typeof t&&Object(s.h)(n)===Object(s.h)((null===t||void 0===t?void 0:t.message)||"");return!t||j?null:Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)("p",{className:"error-message",children:f}),t&&!O&&Object(i.jsxs)("details",Object(r.a)(Object(r.a)({},e.detailsProps),{},{children:[Object(i.jsx)("summary",{"aria-expanded":l,className:"error-message",onClick:function(){return b(!l)},style:{cursor:"pointer",outline:"none"},children:Object(i.jsx)("small",{children:"Details"})}),Object(i.jsx)("p",{className:"error-message",children:Object(i.jsx)("small",{children:"function"===typeof t?t():t.message})})]}))]})})}},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return k}));var r=n(2),a=n.n(r),c=n(3),s=n(34),o=n(10),i=n(174),u=n.n(i);function d(e,t,n,r,a){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(a.a.mark((function e(t,n,r,i,d){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(a.a.mark((function e(o,l){var b,j,f,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b=u.a,j=n[t],e.next=5,j.apply(void 0,Object(s.a)(r)).estimateGas({from:i.from,value:i.value});case 5:return f=e.sent,O=new b(f).decimalPlaces(0,u.a.ROUND_DOWN).toNumber(),e.next=9,j.apply(void 0,Object(s.a)(r)).send(Object(c.a)(Object(c.a)({},i),{},{gas:O})).on("transactionHash",(function(e){d&&d(e)})).on("receipt",(function(e){o(e)})).on("error",(function(e){l(e)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),l(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=n(65),j=n.n(b);function f(e,t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return e.next=5,n.methods.getAdapterAddress(j.a.utils.sha3(t)).call();case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var p=n(6);function h(e){try{var t=null===e||void 0===e?void 0:e.contractAddress;if(!t)throw new Error("Contract address was not found in the store.");return t}catch(n){throw n}}function m(e,t){try{switch(e){case p.a.configuration:return"";case p.a.distribute:return h(t.DistributeContract);case p.a.financing:case p.a.guildkick:return"";case p.a.managing:return h(t.ManagingContract);case p.a.onboarding:return h(t.OnboardingContract);case p.a.ragequit:return"";case p.a.tribute:return h(t.TributeContract);case p.a.tribute_nft:return h(t.TributeNFTContract);case p.a.voting:return h(t.VotingContract);default:throw new Error("Contract address was not found in the store.")}}catch(n){throw n}}var v,x=n(13);function N(e,t){try{var n=Object.values(t).find((function(t){return(null===t||void 0===t?void 0:t.contractAddress)&&Object(x.h)(t.contractAddress)===Object(x.h)(e)}));if(!n)throw new Error("Contract was not found in the store.");return n}catch(r){throw r}}function g(e,t){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return e.next=5,n.methods.getConfiguration(j.a.utils.sha3(t)).call();case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function A(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return n=t.methods,e.next=6,n.state().call();case 6:return r=e.sent,e.abrupt("return",0===Number(r)?v.CREATION:v.READY);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(e){e.CREATION="CREATION",e.READY="READY"}(v||(v={}));n(196);function I(e,t){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t,r){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(0).then(n.t.bind(null,984,3));case 3:return c=e.sent,s=c.default,e.next=7,new r.eth.Contract(s,t).methods.getAdapterName().call();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(e,t){return e===Math.log2(Number(t)+1)-1}var D=n(4),_=n(11);function k(e){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(a.a.mark((function e(t){var r,c,s,o,i,u,d,l,b,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blockNumber,c=void 0===r?"latest":r,s=t.calls,o=t.web3Instance,e.next=3,n.e(24).then(n.t.bind(null,985,3));case 3:if(i=e.sent,u=i.default,_.x){e.next=8;break}return console.error("No Multicall address was found. Are you sure it is set?"),e.abrupt("return");case 8:return e.prev=8,d=new o.eth.Contract(u,_.x),l=d.methods,e.next=12,l.aggregate(s.map((function(e){var t=Object(D.a)(e,3),n=t[0],r=t[1],a=t[2];return[n.toLowerCase(),o.eth.abi.encodeFunctionCall(r,a)]}))).call({},c);case 12:return b=e.sent,j=b.returnData,e.abrupt("return",j.map((function(e,t){var n=s[t][1].outputs||[],r=o.eth.abi.decodeParameters(n,e);return 1===r.__length__&&void 0!==r[0]?r[0]:o.eth.abi.decodeParameters(n||[],e)})));case 17:throw e.prev=17,e.t0=e.catch(8),e.t0;case 20:case"end":return e.stop()}}),e,null,[[8,17]])})))).apply(this,arguments)}},33:function(e,t,n){"use strict";var r,a,c,s;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s})),function(e){e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.RINKEBY=4]="RINKEBY",e[e.ROPSTEN=3]="ROPSTEN",e[e.MAINNET=1]="MAINNET"}(r||(r={})),function(e){e.GOERLI="goerli",e.KOVAN="kovan",e.RINKEBY="rinkeby",e.ROPSTEN="ropsten",e.MAINNET="mainnet"}(a||(a={})),function(e){e.REQUIRED="This field is required.",e.INVALID_BYTES32="The value is not a bytes32.",e.INVALID_BYTES32_ARRAY="The value is not a comma-separated bytes32 format, ie. 0x...,0x...",e.INVALID_EMAIL="The email address is invalid.",e.INVALID_ETHEREUM_ADDRESS="The ethereum address is invalid.",e.INVALID_NUMBER="The value is not a number.",e.INVALID_NUMBER_ARRAY="The value is not a comma-separated number format, ie. 42,5,124"}(c||(c={})),function(e){e.FAILED="Failed",e.PASSED="Passed",e.REQUESTS="Proposals",e.VOTING="Voting"}(s||(s={}))},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s}));var r,a,c,s;n(21),n(17);!function(e){e[e.EXISTS=0]="EXISTS",e[e.SPONSORED=1]="SPONSORED",e[e.PROCESSED=2]="PROCESSED"}(r||(r={})),function(e){e.Submit="Submit",e.Sponsor="Sponsor",e.OffchainVoting="OffchainVoting",e.OffchainVotingSubmitResult="OffchainVotingSubmitResult",e.OffchainVotingGracePeriod="OffchainVotingGracePeriod",e.OnchainVoting="OnchainVoting",e.Process="Process",e.Completed="Completed"}(a||(a={})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE",e[e.FAILED=3]="FAILED"}(c||(c={})),function(e){e.Governance="Governance"}(s||(s={}))},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return y}));var r=n(4),a=n(1);function c(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return s.current=!0,!n&&c(new AbortController),function(){s.current=!1,n&&n.abort()}}),[n]),{abortController:n,isMountedRef:s}}var s={count:0};function o(e,t){switch(t.type){case"increment":return{count:e.count+1};default:return e}}function i(){var e=Object(a.useReducer)(o,s),t=Object(r.a)(e,2),n=t[0],c=t[1];return[n.count,c]}var u=n(981),d=n(15),l=n(88);function b(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(u.a)(l.b,{variables:{id:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),n=Object(r.a)(t,2),c=n[0],s=n[1],o=s.called,i=s.loading,b=s.data,j=s.error,f=Object(a.useState)(),O=Object(r.a)(f,2),p=O[0],h=O[1],m=Object(a.useState)(),v=Object(r.a)(m,2),x=v[0],N=v[1],g=Object(a.useCallback)((function(){try{if(!i&&b){if(h(b.tributeDaos[0]),0===b.tributeDaos.length)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" dao address not found.'))}else if(j)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" is not a valid dao address.'))}catch(j){N(j)}}),[null===e||void 0===e?void 0:e.contractAddress,b,j,i]);return Object(a.useEffect)((function(){o||c()}),[o,c]),Object(a.useEffect)((function(){!i&&(null===e||void 0===e?void 0:e.contractAddress)&&g()}),[null===e||void 0===e?void 0:e.contractAddress,g,i]),{dao:p,gqlError:x}}var j=n(2),f=n.n(j),O=n(10),p=n(9),h=n(92),m=n(11);function v(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(d.c)((function(e){return e.subgraphNetworkStatus.status})),c=Object(u.a)(l.b,{variables:{id:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),s=Object(r.a)(c,2),o=s[0],i=s[1],b=i.called,j=i.loading,v=i.data,x=i.error,N=Object(a.useState)(),g=Object(r.a)(N,2),E=g[0],A=g[1],w=Object(a.useState)(p.a.STANDBY),I=Object(r.a)(w,2),y=I[0],C=I[1],D=Object(a.useState)(),_=Object(r.a)(D,2),k=_[0],T=_[1],S=Object(a.useCallback)((function(){return P.apply(this,arguments)}),[t]),R=Object(a.useCallback)((function(){try{if(C(p.a.PENDING),!j&&v){var e=v.tributeDaos[0].totalUnits;A(Number(e)),C(p.a.FULFILLED)}else if(x)throw new Error(x.message)}catch(x){console.log("subgraph query error: ".concat(x.message)),S()}}),[v,x,S,j]);function P(){return(P=Object(O.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(p.a.PENDING),e.next=6,t.instance.methods.balanceOf(m.E,m.H).call();case 6:n=e.sent,A(Number(n)),C(p.a.FULFILLED),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),A(void 0),T(e.t0),C(p.a.REJECTED);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){b||o()}),[b,o]),Object(a.useEffect)((function(){n===h.a.OK?!j&&(null===e||void 0===e?void 0:e.contractAddress)&&R():S()}),[null===e||void 0===e?void 0:e.contractAddress,S,R,j,n]),{totalUnits:E,totalUnitsError:k,totalUnitsStatus:y}}function x(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),{isMountedRef:e}}var N=n(147),g=n.n(N),E=n(14),A=n(23),w=n(101),I=n(0);function y(e){var t=(e||{}).skipIsActiveMemberCheck,n=void 0!==t&&t,c=Object(a.useState)([]),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(r.a)(u,2),b=l[0],j=l[1],f=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),O=Object(E.f)().connected,p=o&&o.find((function(e){return e})),h=function(){if(!O)return"Your wallet is not connected.";if(!f&&!n)return"Either you are not a member, or your membership is not active.";return p||""}(),m=!!h||!!p,v=!(!m||!h),x=Object(a.useCallback)((function(e){if(!v)return null;var t=e.title;return Object(I.jsx)(g.a,{ariaHideApp:!1,className:"modal-container",isOpen:b,onRequestClose:function(){j(!1)},overlayClassName:"modal-overlay",role:"dialog",style:{overlay:{zIndex:1e3}},children:Object(I.jsx)(A.a,{children:Object(I.jsxs)("div",{className:"modal",children:[Object(I.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(){j(!1)},children:Object(I.jsx)(w.a,{})}),Object(I.jsxs)("div",{className:"card",children:[Object(I.jsx)("h2",{className:"modal__title",children:t||"Why disabled?"}),Object(I.jsx)("p",{children:h})]})]})})})}),[v,h,b]),N=Object(a.useCallback)((function(e){i(e.filter(Boolean))}),[]);return{disabledReason:h,isDisabled:m,openWhyDisabledModal:function(){j(!0)},setOtherDisabledReasons:N,WhyDisabledModal:x}}n(148)},41:function(e,t,n){"use strict";var r=n(4),a=n(62),c=n(3),s=n(1),o=n(0),i=["showAfterMs","text","textProps"];function u(e){return Object(o.jsx)("div",Object(c.a)({className:"loader"},e))}t.a=function(e){var t=e.showAfterMs,n=e.text,d=e.textProps,l=Object(a.a)(e,i),b=Object(s.useState)(!1),j=Object(r.a)(b,2),f=j[0],O=j[1];return Object(s.useEffect)((function(){var e=t&&setTimeout((function(){return O(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),(!t||t&&f)&&e.text?Object(o.jsxs)("div",{className:"loader-container",children:[Object(o.jsx)(u,Object(c.a)({},l)),Object(o.jsx)("span",Object(c.a)(Object(c.a)({className:"loader__text"},d),{},{children:n}))]}):(!t||t&&f)&&!e.text?Object(o.jsx)(u,Object(c.a)({},l)):null}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return _})),n.d(t,"e",(function(){return T})),n.d(t,"f",(function(){return S})),n.d(t,"d",(function(){return M})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return V})),n.d(t,"i",(function(){return W}));var r=n(2),a=n.n(r),c=n(10),s=n(4),o=n(1),i=n(15),u=n(442),d=n.n(u),l=n(9),b=n(29),j=n(14),f=n(13);function O(e){var t=Object(i.c)((function(e){return e.contracts.DaoRegistryContract})),n=Object(o.useState)(),r=Object(s.a)(n,2),u=r[0],O=r[1],p=Object(o.useState)(),h=Object(s.a)(p,2),m=h[0],v=h[1],x=Object(o.useState)(l.a.STANDBY),N=Object(s.a)(x,2),g=N[0],E=N[1],A=Object(o.useState)(),w=Object(s.a)(A,2),I=w[0],y=w[1],C=Object(j.f)().web3Instance,D=d()(e),_=Object(o.useCallback)((function(){return k.apply(this,arguments)}),[t,e,C]);function k(){return(k=Object(c.a)(a.a.mark((function n(){var r,c,o,i,u,d,j,p,h,m,x,N,g,A;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&C){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,E(l.a.PENDING),r=Object(f.k)(e,7),c=t.abi,o=t.contractAddress,i=c.find((function(e){return"isNotReservedAddress"===e.name})),u=[o,i,[e]],d=c.find((function(e){return"isNotZeroAddress"===e.name})),j=[o,d,[e]],p=c.find((function(e){return"getAddressIfDelegated"===e.name})),h=[u,j,[o,p,[e]]],n.next=15,Object(b.j)({calls:h,web3Instance:C});case 15:m=n.sent,x=Object(s.a)(m,3),N=x[0],g=x[1],A=x[2],N?g?e.toLowerCase()!==A.toLowerCase()?(y(!1),v("The applicant address ".concat(r," is already in use as a delegate key. The address must be removed as a delegate before it can become a member."))):(y(!0),v(void 0)):(y(!1),v("The applicant address ".concat(r," is invalid."))):(y(!1),v("The applicant address ".concat(r," is invalid because it is a DAO reserved address."))),E(l.a.FULFILLED),n.next=30;break;case 24:n.prev=24,n.t0=n.catch(2),y(void 0),v(void 0),O(n.t0),E(l.a.REJECTED);case 30:case"end":return n.stop()}}),n,null,[[2,24]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){D&&!e&&(O(void 0),v(void 0),y(void 0),E(l.a.STANDBY)),e&&_()}),[e,_,D]),{checkApplicantError:u,checkApplicantInvalidMsg:m,checkApplicantStatus:g,isApplicantValid:I}}var p=n(443),h=n(34),m=n(7),v=n(21),x=n(11),N=n(40),g=n(6);function E(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi})),n=Object(i.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),r=Object(o.useState)([]),u=Object(s.a)(r,2),d=u[0],f=u[1],O=Object(o.useState)(l.a.STANDBY),E=Object(s.a)(O,2),A=E[0],w=E[1],I=Object(o.useState)(),y=Object(s.a)(I,2),C=y[0],D=y[1],_=Object(j.f)().web3Instance,k=Object(N.e)().isMountedRef,T=null===t||void 0===t?void 0:t.find((function(e){return"getPriorAmount"===e.name})),S=Object(o.useCallback)((function(e){return R.apply(this,arguments)}),[]);function R(){return(R=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,i,u,d,l,j,f,O,N,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bankAddress,r=t.getPriorAmountABI,c=t.snapshot,o=t.voterAddressesAndChoices,i=t.web3Instance,e.prev=1,u={},Object(m.a)(u,g.e.Yes,{percentage:0,units:0}),Object(m.a)(u,g.e.No,{percentage:0,units:0}),Object(m.a)(u,"totalUnits",0),d=u,l=[n,r,[x.E,x.H,c.toString()]],j=o.map((function(e){var t=Object(s.a)(e,1)[0];return[n,r,[t,x.H,c.toString()]]})),f=[l].concat(Object(h.a)(j)),e.next=8,Object(b.j)({calls:f,web3Instance:i});case 8:return O=e.sent,N=Object(p.a)(O),E=N[0],N.slice(1).forEach((function(e,t){var n=v.VoteChoicesIndex[o[t][1]]===v.VoteChoicesIndex[v.VoteChoicesIndex.Yes]?g.e.Yes:g.e.No;d[n].units+=Number(e)})),d[g.e.Yes].percentage=d[g.e.Yes].units/Number(E)*100,d[g.e.No].percentage=d[g.e.No].units/Number(E)*100,d.totalUnits=Number(E),e.abrupt("return",d);case 19:throw e.prev=19,e.t0=e.catch(1),e.t0;case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){var t=Array.isArray(e)?e:[e];if(n&&T&&t.length&&_){w(l.a.PENDING);var r=t.map(function(){var e=Object(c.a)(a.a.mark((function e(t){var r,c,s,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===t||void 0===t?void 0:t.msg.payload.snapshot,(s=null===t||void 0===t?void 0:t.idInSnapshot)&&c){e.next=4;break}return e.abrupt("return");case 4:if(o=null===t||void 0===t||null===(r=t.votes)||void 0===r?void 0:r.map((function(e){var t=e[Object.keys(e)[0]];return[t.msg.payload.metadata.memberAddress,t.msg.payload.choice]}))){e.next=7;break}return e.abrupt("return");case 7:return i=Object.entries(Object.fromEntries(o)),e.prev=8,e.next=11,S({bankAddress:n,getPriorAmountABI:T,snapshot:c,voterAddressesAndChoices:i,web3Instance:_});case 11:return u=e.sent,e.abrupt("return",[s,u]);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}());Promise.all(r).then((function(e){return e.filter((function(e){return e}))})).then((function(e){k.current&&(w(l.a.FULFILLED),f(e),D(void 0))})).catch((function(e){k.current&&(w(l.a.REJECTED),f([]),D(e))}))}}),[n,T,S,k,e,_]),{offchainVotingResults:d,offchainVotingResultsError:C,offchainVotingResultsStatus:A}}var A=n(3),w=n(53),I=n(51);function y(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),r=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),u=Object(j.f)().web3Instance,d=Object(o.useState)([]),f=Object(s.a)(d,2),O=f[0],p=f[1],h=Object(o.useState)(),m=Object(s.a)(h,2),v=m[0],x=m[1],N=Object(o.useState)(l.a.STANDBY),g=Object(s.a)(N,2),E=g[0],A=g[1],y=Object(o.useCallback)((function(){return C.apply(this,arguments)}),[e,r,t,u]);function C(){return(C=Object(c.a)(a.a.mark((function s(){var o,i,d,j,f,O,h,m,v,N,g;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.length&&r&&t&&u){s.next=2;break}return s.abrupt("return");case 2:if((o=e.filter(u.utils.isHexStrict)).length){s.next=7;break}return A(l.a.FULFILLED),p([]),s.abrupt("return");case 7:if(s.prev=7,i=r.find((function(e){return"votingAdapter"===e.name}))){s.next=11;break}throw new Error('No "votingAdapter" ABI function was found in the DAO registry ABI.');case 11:return d=o.map((function(e){return[t,i,[e]]})),A(l.a.PENDING),s.next=15,Object(b.j)({calls:d,web3Instance:u});case 15:return j=s.sent,s.next=18,n.e(0).then(n.t.bind(null,984,3));case 18:if(f=s.sent,O=f.default,h=O.find((function(e){return"getAdapterName"===e.name}))){s.next=23;break}throw new Error('No "getAdapterName" ABI function was found in the IVoting ABI.');case 23:if(m=o.filter((function(e,t){return j[t]!==w.a})),(v=j.filter((function(e){return e!==w.a}))).length){s.next=29;break}return A(l.a.FULFILLED),p([]),s.abrupt("return");case 29:return N=v.map((function(e){return[e,h,[]]})),s.next=32,Object(b.j)({calls:N,web3Instance:u});case 32:return g=s.sent,A(l.a.FULFILLED),s.t0=p,s.next=37,Promise.all(m.map(function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.c)(g[n]);case 2:return r=e.sent,c=v[n],e.abrupt("return",[t,{votingAdapterName:g[n],votingAdapterAddress:c,getVotingAdapterABI:function(){return r},getWeb3VotingAdapterContract:function(){return new u.eth.Contract(r,c)}}]);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 37:s.t1=s.sent,(0,s.t0)(s.t1),s.next=46;break;case 41:s.prev=41,s.t2=s.catch(7),A(l.a.REJECTED),p([]),x(s.t2);case 46:case"end":return s.stop()}}),s,null,[[7,41]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){y()}),[y]),{proposalsVotingAdapters:O,proposalsVotingAdaptersError:v,proposalsVotingAdaptersStatus:E}}var C="Something went wrong while getting the proposal.",D="Proposal was not found.";function _(e,t){var n,r=Object(o.useState)(),i=Object(s.a)(r,1)[0],u=Object(o.useState)(),d=Object(s.a)(u,2),b=d[0],j=d[1],f=Object(o.useState)(),O=Object(s.a)(f,2),p=O[0],h=O[1],m=Object(o.useState)(!1),g=Object(s.a)(m,2),E=g[0],w=g[1],I=Object(o.useState)(),_=Object(s.a)(I,2),k=_[0],T=_[1],S=Object(o.useState)(l.a.STANDBY),R=Object(s.a)(S,2),P=R[0],F=R[1],L=Object(o.useState)([e]),M=Object(s.a)(L,2),B=M[0],G=M[1],U=Object(o.useState)(l.a.STANDBY),V=Object(s.a)(U,2),W=V[0],Y=V[1],H=Object(o.useState)(),K=Object(s.a)(H,2),z=K[0],q=K[1],J=Object(N.a)(),Q=J.abortController,X=J.isMountedRef,$=Object(N.b)(),Z=Object(s.a)($,2),ee=Z[0],te=Z[1],ne=y(B),re=ne.proposalsVotingAdapters,ae=ne.proposalsVotingAdaptersError,ce=ne.proposalsVotingAdaptersStatus,se=Object(o.useCallback)((function(){return le.apply(this,arguments)}),[null===Q||void 0===Q?void 0:Q.signal,e,X]),oe=Object(o.useCallback)((function(){return be.apply(this,arguments)}),[null===Q||void 0===Q?void 0:Q.signal,e,X,t]),ie=Object(o.useCallback)((function(){return je.apply(this,arguments)}),[se,oe]),ue=p?v.SnapshotType.proposal:b?v.SnapshotType.draft:void 0,de=b||p?{daoProposal:i,daoProposalVotingAdapter:null===(n=re[0])||void 0===n?void 0:n[1],getCommonSnapshotProposalData:function(){switch(ue){case v.SnapshotType.draft:return b;case v.SnapshotType.proposal:return p;default:return}},refetchProposalOrDraft:function(){te({type:"increment"})},snapshotDraft:b,snapshotProposal:p,snapshotType:ue}:void 0;function le(){return(le=Object(c.a)(a.a.mark((function t(){var n,r,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,F(l.a.PENDING),t.next=4,fetch("".concat(x.C,"/api/").concat(x.D,"/draft/").concat(e),{signal:null===Q||void 0===Q?void 0:Q.signal});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error(C);case 7:return t.next=9,n.json();case 9:if(r=t.sent,X.current){t.next=12;break}return t.abrupt("return");case 12:if(r&&Object.keys(r).length){t.next=15;break}throw w(!0),new Error(D);case 15:return c=Object.keys(r)[0],s=Object(A.a)({idInDAO:c,idInSnapshot:c},r[c]),F(l.a.FULFILLED),j(s),t.abrupt("return",s);case 22:if(t.prev=22,t.t0=t.catch(0),X.current){t.next=26;break}return t.abrupt("return");case 26:F(l.a.REJECTED),T(t.t0);case 28:case"end":return t.stop()}}),t,null,[[0,22]])})))).apply(this,arguments)}function be(){return(be=Object(c.a)(a.a.mark((function n(){var r,c,s,o,i,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,F(l.a.PENDING),n.next=4,fetch("".concat(x.C,"/api/").concat(x.D,"/proposal/").concat(e,"?searchUniqueDraftId=true&includeVotes=true"),{signal:null===Q||void 0===Q?void 0:Q.signal});case 4:if((c=n.sent).ok){n.next=9;break}if(t!==v.SnapshotType.proposal){n.next=8;break}throw new Error(C);case 8:return n.abrupt("return");case 9:return n.next=11,c.json();case 11:if(s=n.sent,X.current){n.next=14;break}return n.abrupt("return");case 14:if(s&&Object.keys(s).length){n.next=19;break}if(t!==v.SnapshotType.proposal){n.next=18;break}throw w(!0),new Error(D);case 18:return n.abrupt("return");case 19:return o=Object.keys(s)[0],i=(null===(r=s[o])||void 0===r?void 0:r.data.erc712DraftHash)||o,u=Object(A.a)({idInDAO:i,idInSnapshot:o},s[o]),F(l.a.FULFILLED),h(u),n.abrupt("return",u);case 27:if(n.prev=27,n.t0=n.catch(0),X.current){n.next=31;break}return n.abrupt("return");case 31:F(l.a.REJECTED),T(n.t0);case 33:case"end":return n.stop()}}),n,null,[[0,27]])})))).apply(this,arguments)}function je(){return(je=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:if(t=e.sent){e.next=9;break}return e.next=6,se();case 6:return n=e.sent,j(n),e.abrupt("return");case 9:h(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){if(null===Q||void 0===Q?void 0:Q.signal)switch(t){case v.SnapshotType.draft:se();break;case v.SnapshotType.proposal:oe();break;default:ie()}}),[null===Q||void 0===Q?void 0:Q.signal,se,oe,ie,ee,t]),Object(o.useEffect)((function(){0!==ee&&G([e])}),[e,ee]),Object(o.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[P,ce];P!==e?a.some((function(e){return e===t}))&&0===ee?Y(t):a.every((function(e){return e===n}))?Y(n):P!==n||ce!==n||re.length?a.some((function(e){return e===r}))&&Y(r):Y(n):Y(e)}),[P,re.length,ce,ee]),Object(o.useEffect)((function(){q([k,ae].find((function(e){return e})))}),[k,ae]),{proposalData:de,proposalError:z,proposalNotFound:E,proposalStatus:W}}var k=n(17);function T(e){var t=e.adapterName,n=e.includeProposalsExistingOnlyOffchain,r=void 0!==n&&n,u=Object(o.useState)(),d=Object(s.a)(u,2),O=d[0],p=d[1],N=Object(o.useState)([]),g=Object(s.a)(N,2),E=g[0],w=g[1],I=Object(o.useState)([]),C=Object(s.a)(I,2),D=C[0],_=C[1],T=Object(o.useState)(),R=Object(s.a)(T,2),P=R[0],F=R[1],L=Object(o.useState)(l.a.STANDBY),M=Object(s.a)(L,2),B=M[0],G=M[1],U=Object(o.useState)(l.a.STANDBY),V=Object(s.a)(U,2),W=V[0],Y=V[1],H=Object(o.useState)(),K=Object(s.a)(H,2),z=K[0],q=K[1],J=Object(i.c)((function(e){return e.contracts})),Q=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),X=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),$=y(E),Z=$.proposalsVotingAdapters,ee=$.proposalsVotingAdaptersError,te=$.proposalsVotingAdaptersStatus,ne=S(Z),re=ne.proposalsVotingState,ae=ne.proposalsVotingStateError,ce=ne.proposalsVotingStateStatus,se=function(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),n=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),r=Object(j.f)().web3Instance,u=Object(o.useState)([]),d=Object(s.a)(u,2),f=d[0],O=d[1],p=Object(o.useState)(),h=Object(s.a)(p,2),v=h[0],x=h[1],N=Object(o.useState)(l.a.STANDBY),g=Object(s.a)(N,2),E=g[0],A=g[1],w=Object(o.useCallback)((function(){return I.apply(this,arguments)}),[e,n,t,r]);function I(){return(I=Object(c.a)(a.a.mark((function o(){var i,u,d;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.length&&n&&t&&r){o.next=2;break}return o.abrupt("return");case 2:if((i=e.filter((function(e){var t=Object(s.a)(e,1)[0];return r.utils.isHexStrict(t)}))).length){o.next=7;break}return A(l.a.FULFILLED),O([]),o.abrupt("return");case 7:return o.prev=7,A(l.a.PENDING),o.next=11,Promise.all(i.map(function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c,o,i,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(n,2),c=r[0],o=r[1],i=o.votingAdapterAddress,u=o.getVotingAdapterABI,d=o.votingAdapterName,e.t0=i,e.next=4,y(d,u());case 4:return e.t1=e.sent,e.t2=[t,c],e.abrupt("return",[e.t0,e.t1,e.t2]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return u=o.sent,o.next=14,Object(b.j)({calls:u,web3Instance:r});case 14:d=o.sent,A(l.a.FULFILLED),O(i.map((function(e,t){var n=Object(s.a)(e,2),r=n[0],a=n[1].votingAdapterName;return[r,Object(m.a)({},a,d[t])]}))),o.next=24;break;case 19:o.prev=19,o.t0=o.catch(7),A(l.a.REJECTED),O([]),x(o.t0);case 24:case"end":return o.stop()}}),o,null,[[7,19]])})))).apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===k.c.OffchainVotingContract?4:e.t0===k.c.VotingContract?8:12;break;case 4:if(r=n.find((function(e){return"votes"===e.name}))){e.next=7;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 7:return e.abrupt("return",r);case 8:if(c=n.find((function(e){return"votes"===e.name}))){e.next=11;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 11:return e.abrupt("return",c);case 12:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(0),e.t1;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){w()}),[w]),{proposalsVotes:f,proposalsVotesError:v,proposalsVotesStatus:E}}(Z),oe=se.proposalsVotes,ie=se.proposalsVotesError,ue=se.proposalsVotesStatus,de=Object(j.f)().web3Instance,le=Object(o.useCallback)((function(e){return he.apply(this,arguments)}),[r]),be=Object(o.useCallback)((function(){return me.apply(this,arguments)}),[O,le,Q,X,de]);function je(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(x.C,"/api/").concat(x.D),e.next=4,fetch("".concat(n,"/drafts/").concat(t));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot drafts.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).filter((function(e){var t=Object(s.a)(e,2);t[0];return!1===t[1].data.sponsored})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function Oe(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(x.C,"/api/").concat(x.D),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return[r.data.erc712DraftHash||n,r]})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function he(){return(he=Object(c.a)(a.a.mark((function e(t){var n,c,o,i,u,d,l,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.proposalIds,c=t.registryAbi,o=t.registryAddress,i=t.web3Instance,e.prev=1,u=c.find((function(e){return"proposals"===e.name})),d=n.map((function(e){return[o,u,[e]]})),e.next=6,Object(b.j)({calls:d,web3Instance:i});case 6:if(l=e.sent,j=n.map((function(e,t){return[e,l[t]]})),!r){e.next=12;break}return e.abrupt("return",j);case 12:return e.abrupt("return",j.filter((function(e){var t=Object(s.a)(e,2);t[0];return"0"!==t[1].flags})));case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function me(){return(me=Object(c.a)(a.a.mark((function e(){var t,n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&Q&&X&&de){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,G(l.a.PENDING),e.next=6,je(O);case 6:return t=e.sent,e.next=9,Oe(O);case 9:if(n=e.sent,(r=[].concat(Object(h.a)(t),Object(h.a)(n)).map((function(e){return e[0]}))).length){e.next=14;break}return G(l.a.FULFILLED),e.abrupt("return");case 14:return e.next=16,le({proposalIds:r,registryAbi:Q,registryAddress:X,web3Instance:de});case 16:c=e.sent,w(c.map((function(e){return Object(s.a)(e,1)[0]}))),o=c.map((function(e){var r=Object(s.a)(e,2),a=r[0],c=r[1],o=t.find((function(e){return Object(s.a)(e,1)[0]===a})),i=n.find((function(e){return Object(s.a)(e,1)[0]===a})),u=o?Object(A.a)(Object(A.a)({},o[1]),{},{idInDAO:a,idInSnapshot:o[0]}):void 0,d=i?Object(A.a)(Object(A.a)({},i[1]),{},{idInDAO:a,idInSnapshot:i[0]}):void 0;return{idInDAO:a,daoProposal:c,daoProposalVotes:void 0,daoProposalVotingAdapter:void 0,daoProposalVotingState:void 0,snapshotDraft:u,getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){},snapshotProposal:d,snapshotType:d?v.SnapshotType.proposal:v.SnapshotType.draft}})).filter((function(e){return e.snapshotDraft||e.snapshotProposal})),G(l.a.FULFILLED),_(o),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(2),G(l.a.REJECTED),_([]),F(e.t0);case 28:case"end":return e.stop()}}),e,null,[[2,23]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){var e,n,r=null===(e=Object.entries(J).find((function(e){var n=Object(s.a)(e,2),r=(n[0],n[1]);return(null===r||void 0===r?void 0:r.adapterOrExtensionName)===t})))||void 0===e||null===(n=e[1])||void 0===n?void 0:n.contractAddress;p(r)}),[O,t,J]),Object(o.useEffect)((function(){be()}),[be]),Object(o.useEffect)((function(){Z.length&&_((function(e){return e.map((function(e){var t;return Object(A.a)(Object(A.a)({},e),{},{daoProposalVotingAdapter:null===(t=Z.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e.idInDAO||"")})))||void 0===t?void 0:t[1]})}))}))}),[Z]),Object(o.useEffect)((function(){re.length&&_((function(e){return e.map((function(e){var t;return Object(A.a)(Object(A.a)({},e),{},{daoProposalVotingState:null===(t=re.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e.idInDAO||"")})))||void 0===t?void 0:t[1]})}))}))}),[re]),Object(o.useEffect)((function(){oe.length&&_((function(e){return e.map((function(e){var t;return Object(A.a)(Object(A.a)({},e),{},{daoProposalVotes:null===(t=oe.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e.idInDAO||"")})))||void 0===t?void 0:t[1]})}))}))}),[oe]),Object(o.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[B,te,ce,ue];B!==e?a.some((function(e){return e===t}))?Y(t):a.every((function(e){return e===n}))?Y(n):(B!==n||E.length)&&(B!==n||te!==n||!E.length||Z.length)?a.some((function(e){return e===r}))&&Y(r):Y(n):Y(e)}),[E.length,B,ue,Z.length,te,ce]),Object(o.useEffect)((function(){q([P,ee,ae,ie].find((function(e){return e})))}),[P,ie,ee,ae]),{proposals:D,proposalsError:z,proposalsStatus:W}}function S(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),r=Object(j.f)().web3Instance,u=Object(o.useState)([]),d=Object(s.a)(u,2),f=d[0],O=d[1],p=Object(o.useState)(),h=Object(s.a)(p,2),m=h[0],v=h[1],x=Object(o.useState)(l.a.STANDBY),N=Object(s.a)(x,2),g=N[0],E=N[1],A=Object(o.useCallback)((function(){return w.apply(this,arguments)}),[e,t,r]);function w(){return(w=Object(c.a)(a.a.mark((function c(){var o,i,u,d,j;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&e.length&&r){a.next=2;break}return a.abrupt("return");case 2:if((o=e.filter((function(e){var t=Object(s.a)(e,1)[0];return r.utils.isHexStrict(t)}))).length){a.next=6;break}return E(l.a.FULFILLED),a.abrupt("return");case 6:return a.prev=6,a.next=9,n.e(0).then(n.t.bind(null,984,3));case 9:if(i=a.sent.default,u=i.find((function(e){return"voteResult"===e.name}))){a.next=13;break}throw new Error('No "voteResult" ABI function was found on the "IVoting" contract.');case 13:return d=o.map((function(e){var n=Object(s.a)(e,2),r=n[0];return[n[1].votingAdapterAddress,u,[t,r]]})),E(l.a.PENDING),a.next=17,Object(b.j)({calls:d,web3Instance:r});case 17:j=a.sent,E(l.a.FULFILLED),O(o.map((function(e,t){return[Object(s.a)(e,1)[0],j[t]]}))),a.next=27;break;case 22:a.prev=22,a.t0=a.catch(6),E(l.a.REJECTED),O([]),v(a.t0);case 27:case"end":return a.stop()}}),c,null,[[6,22]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){A()}),[A]),{proposalsVotingState:f,proposalsVotingStateError:m,proposalsVotingStateStatus:g}}var R=n(25),P=n(37),F=n(50),L="production"===x.m?15e3:5e3;function M(e,t){var n,r,u=e.daoProposalVotingAdapter,d=e.snapshotDraft,l=e.snapshotProposal,O=(l||{}).votes,p=(null===d||void 0===d?void 0:d.idInDAO)||(null===l||void 0===l?void 0:l.idInDAO),h=(t||{}).pollInterval,m=void 0===h?L:h,v=Object(j.f)().web3Instance,x=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),N=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),g=Object(o.useState)(),E=Object(s.a)(g,2),A=E[0],y=E[1],C=Object(o.useState)(),D=Object(s.a)(C,2),_=D[0],k=D[1],T=Object(o.useState)(),S=Object(s.a)(T,2),M=S[0],B=S[1],G=Object(o.useState)(),U=Object(s.a)(G,2),V=U[0],Y=U[1],H=Object(o.useRef)(),K=Object(o.useRef)(!1),z=W(null===(n=e.snapshotProposal)||void 0===n?void 0:n.msg.payload.start,null===(r=e.snapshotProposal)||void 0===r?void 0:r.msg.payload.end),q=z.hasVotingTimeStarted,J=z.hasVotingTimeEnded,Q=z.votingTimeStartEndInitReady,X=!!A&&Object(I.d)(P.b.EXISTS,A.flags),$=!!A&&Object(I.d)(P.b.SPONSORED,A.flags),Z=!!A&&Object(I.d)(P.b.PROCESSED,A.flags),ee=null===u||void 0===u?void 0:u.votingAdapterAddress,te=null===u||void 0===u?void 0:u.getVotingAdapterABI(),ne=void 0!==_&&Object(R.isAddress)(_.reporter)&&Object(f.h)(_.reporter)!==w.a,re=void 0!==M&&F.a[M]===F.a[F.a.GRACE_PERIOD],ae=Object(o.useCallback)((function(){return se.apply(this,arguments)}),[u,N,x,te,ee,p,v]);function ce(e){return{daoProposal:A,daoProposalVoteResult:M,daoProposalVotes:_,proposalFlowStatusError:V,status:e}}function se(){return(se=Object(c.a)(a.a.mark((function e(){var t,n,r,c,o,i,d,l,j,f,O,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N&&x&&p&&v){e.next=3;break}return e.abrupt("return");case 3:if(t=N.filter((function(e){return"proposals"===e.name}))[0],u){e.next=12;break}return e.next=7,Object(b.j)({calls:[[x,t,[p]]],web3Instance:v});case 7:return n=e.sent,r=Object(s.a)(n,1),c=r[0],y(c),e.abrupt("return");case 12:if(te&&ee){e.next=14;break}return e.abrupt("return");case 14:return o=te.filter((function(e){return"voteResult"===e.name}))[0],i=te.filter((function(e){return"votes"===e.name}))[0],d=[[x,t,[p]],[ee,i,[x,p]],[ee,o,[x,p]]],e.next=19,Object(b.j)({calls:d,web3Instance:v});case 19:l=e.sent,j=Object(s.a)(l,3),f=j[0],O=j[1],h=j[2],y(f),k(O),B(h),e.next=32;break;case 29:throw e.prev=29,e.t0=e.catch(0),e.t0;case 32:case"end":return e.stop()}}),e,null,[[0,29]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){ae().catch((function(e){Y(e)}))}),[ae]),Object(o.useEffect)((function(){Z&&(K.current=!0),H.current&&clearInterval(H.current);var e=setInterval(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K.current&&H.current&&clearInterval(H.current),e.next=4,ae();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),H.current&&clearInterval(H.current),Y(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),m);H.current=e}),[Z,m,ae]),Object(o.useEffect)((function(){return Z&&H.current&&clearInterval(H.current),function(){H.current&&clearInterval(H.current)}}),[Z]),!Q||q||X?Q&&!q&&X?ce(P.c.Sponsor):Q&&q&&!J&&$?ce(P.c.OffchainVoting):Q&&J&&$&&!(null===O||void 0===O?void 0:O.length)&&!ne?ce(re?P.c.OffchainVotingGracePeriod:P.c.Process):Q&&J&&$&&!ne?ce(P.c.OffchainVotingSubmitResult):Q&&J&&$&&ne&&re?ce(P.c.OffchainVotingGracePeriod):$&&Q&&J&&ne&&!re?ce(P.c.Process):Z?ce(P.c.Completed):{daoProposal:A,daoProposalVoteResult:M,daoProposalVotes:_,proposalFlowStatusError:V,status:void 0}:ce(P.c.Submit)}var B=n(60),G=n(99);function U(){var e=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(i.c)((function(e){return e.contracts})),n=Object(i.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.memberAddress})),r=Object(G.a)(),u=r.account,d=r.provider,l=r.web3Instance,j=Object(o.useState)(),f=Object(s.a)(j,2),O=f[0],p=f[1],h=Object(o.useState)(),m=Object(s.a)(h,2),N=m[0],E=m[1],I=Object(o.useState)(g.f.STANDBY),y=Object(s.a)(I,2),C=y[0],D=y[1];function _(){return(_=Object(c.a)(a.a.mark((function r(c){var s,o,i,j,f,O,h,m,N,I,y,C,_,k,T,S,R,P,F,L,M,G;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=c.partialVoteData,o=c.adapterName,i=c.proposalIdInDAO,j=c.proposalIdInSnapshot,r.prev=1,l){r.next=4;break}throw new Error("No Web3 instance was found.");case 4:if(u){r.next=6;break}throw new Error("No account was found.");case 6:if(n){r.next=8;break}throw new Error("No member address was found.");case 8:if(e){r.next=10;break}throw new Error('No "DaoRegistry" address was found.');case 10:if(x.C){r.next=12;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 12:if(x.D){r.next=14;break}throw new Error('No Snapshot "SPACE" was found.');case 14:return D(g.f.AWAITING_CONFIRM),f=o?Object(b.d)(o,t):w.a,O=s.choice,h=s.metadata,m=void 0===h?{}:h,r.next=19,Object(v.getSpace)(x.C,x.D);case 19:return N=r.sent,I=N.data,y={chainId:x.k,choice:O,metadata:Object(A.a)(Object(A.a)({},m),{},{memberAddress:n})},C={proposalId:i,space:x.D,token:I.token},r.next=25,Object(v.buildVoteMessage)(y,C,x.C);case 25:return _=r.sent,k=Object(v.prepareVoteMessage)({timestamp:_.timestamp,payload:{proposalId:_.payload.proposalId,choice:v.VoteChoicesIndex[O]}}),T=Object(v.getDomainDefinition)(Object(A.a)(Object(A.a)({},k),{},{type:v.SnapshotType.vote}),e,f,x.k),S=T.domain,R=T.types,P=JSON.stringify({types:R,domain:S,primaryType:B.a,message:k}),r.next=31,Object(v.signMessage)(d,u,P);case 31:return F=r.sent,D(g.f.PENDING),r.next=35,Object(v.submitMessage)(x.C,u,Object(A.a)(Object(A.a)({},_),{},{payload:Object(A.a)(Object(A.a)({},_.payload),{},{proposalId:j})}),F,{actionId:S.actionId,chainId:S.chainId,verifyingContract:S.verifyingContract,message:k});case 35:return L=r.sent,M=L.data,G={data:_,signature:F,uniqueId:M.uniqueId},D(g.f.FULFILLED),p(G),r.abrupt("return",G);case 43:throw r.prev=43,r.t0=r.catch(1),D(g.f.REJECTED),E(r.t0),r.t0;case 48:case"end":return r.stop()}}),r,null,[[1,43]])})))).apply(this,arguments)}return{signAndSendVote:function(e){return _.apply(this,arguments)},voteData:O,voteDataError:N,voteDataStatus:C}}function V(){var e=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),n=Object(i.c)((function(e){return e.contracts})),r=Object(G.a)(),u=r.account,d=r.provider,l=r.web3Instance,j=Object(o.useState)(),f=Object(s.a)(j,2),O=f[0],p=f[1],h=Object(o.useState)(),m=Object(s.a)(h,2),N=m[0],E=m[1],I=Object(o.useState)(g.f.STANDBY),y=Object(s.a)(I,2),C=y[0],D=y[1];function _(e){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.C){e.next=2;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 2:if(l){e.next=4;break}throw new Error("No Web3 instance was found.");case 4:return e.next=6,l.eth.getBlockNumber();case 6:return r=e.sent,e.t0=parseInt,e.next=10,Object(b.f)(g.b.offchainVotingVotingPeriod,t);case 10:return e.t1=e.sent,c=(0,e.t0)(e.t1),e.next=14,Object(v.buildProposalMessage)(Object(A.a)(Object(A.a)({},n),{},{votingTimeSeconds:c,snapshot:r}),x.C);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(c.a)(a.a.mark((function t(r){var c,s,o,i,j,f,O,h,m,N,I,y,C,k,T,S,R,P,F,L,M,G;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r.partialProposalData,s=r.adapterAddress,o=r.adapterName,i=r.type,t.prev=1,u){t.next=4;break}throw new Error("No account was found to send.");case 4:if(l){t.next=6;break}throw new Error("No Web3 instance was found.");case 6:if(e){t.next=8;break}throw new Error('No "DaoRegistry" address was found.');case 8:if(x.C){t.next=10;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 10:if(x.D){t.next=12;break}throw new Error('No Snapshot "SPACE" was found.');case 12:if(i===v.SnapshotType.draft||i===v.SnapshotType.proposal){t.next=14;break}throw new Error('Handling for type "vote" is not implemented.');case 14:return D(g.f.AWAITING_CONFIRM),j=s||(o?Object(b.d)(o,n):w.a),f=c.body,O=c.name,h=c.metadata,m=c.timestamp,t.next=19,Object(v.getSpace)(x.C,x.D);case 19:if(N=t.sent,I=N.data,y={name:O,body:f,metadata:h,token:I.token,space:x.D},i!==v.SnapshotType.draft){t.next=28;break}return t.next=25,Object(v.buildDraftMessage)(y,x.C);case 25:t.t0=t.sent,t.next=31;break;case 28:return t.next=30,_(Object(A.a)(Object(A.a)({},y),{},{timestamp:m}));case 30:t.t0=t.sent;case 31:return C=t.t0,k=i===v.SnapshotType.draft?Object(v.prepareDraftMessage)(C):Object(v.prepareProposalMessage)(C),T=Object(v.getDomainDefinition)(Object(A.a)(Object(A.a)({},k),{},{type:i}),e,j,x.k),S=T.domain,R=T.types,P=JSON.stringify({types:R,domain:S,primaryType:B.a,message:k}),t.next=37,Object(v.signMessage)(d,u,P);case 37:return F=t.sent,D(g.f.PENDING),t.next=41,Object(v.submitMessage)(x.C,u,C,F,{actionId:S.actionId,chainId:S.chainId,verifyingContract:S.verifyingContract,message:k});case 41:return L=t.sent,M=L.data,G={data:C,signature:F,uniqueId:M.uniqueId,uniqueIdDraft:M.uniqueIdDraft||""},D(g.f.FULFILLED),p(G),t.abrupt("return",G);case 49:throw t.prev=49,t.t1=t.catch(1),D(g.f.REJECTED),E(t.t1),t.t1;case 54:case"end":return t.stop()}}),t,null,[[1,49]])})))).apply(this,arguments)}return{proposalData:O,proposalSignAndSendError:N,proposalSignAndSendStatus:C,signAndSendProposal:function(e){return T.apply(this,arguments)}}}function W(e,t){var n=Object(o.useRef)({start:l.a.STANDBY,end:l.a.STANDBY}),r=Object(o.useState)(!1),a=Object(s.a)(r,2),c=a[0],i=a[1],u=Object(o.useState)(!1),d=Object(s.a)(u,2),b=d[0],j=d[1],f=Object(o.useState)(m(n.current)),O=Object(s.a)(f,2),p=O[0],h=O[1];function m(e){return Object.values(e).every((function(e){return e===l.a.FULFILLED}))}return Object(o.useEffect)((function(){if(!c&&void 0!==e&&void 0!==t){h((function(){return n.current.start=l.a.PENDING,m(n.current)}));var r=setInterval((function(){h((function(){return n.current.start=l.a.FULFILLED,m(n.current)}));var t=Math.floor(Date.now()/1e3)>e;t&&i(t)}),1e3);return function(){clearInterval(r)}}h((function(){return n.current.start=l.a.FULFILLED,m(n.current)}))}),[t,c,e]),Object(o.useEffect)((function(){if(!b&&void 0!==e&&void 0!==t){h((function(){return n.current.end=l.a.PENDING,m(n.current)}));var r=setInterval((function(){h((function(){return n.current.end=l.a.FULFILLED,m(n.current)}));var e=Math.ceil(Date.now()/1e3)>t;e&&j(e)}),1e3);return function(){clearInterval(r)}}h((function(){return n.current.end=l.a.FULFILLED,m(n.current)}))}),[t,b,e]),{hasVotingTimeStarted:c,hasVotingTimeEnded:b,votingTimeStartEndInitReady:p}}},426:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(0),c=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,1007))})),s=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,1008))})),o={injected:Object(a.jsx)(c,{}),walletconnect:Object(a.jsx)(s,{})};function i(e){var t=e.providerName;return t&&o[t]?Object(a.jsx)(r.Suspense,{fallback:null,children:Object(a.jsx)("span",{className:"walletconnect__wallet-icon",children:o[t]})}):null}},444:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},477:function(e,t){},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=e.url,n=e.isPending,a=void 0!==n&&n;return Object(r.jsx)("small",{children:Object(r.jsx)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:a?"view progress":"view transaction"})})}},50:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.TIE=1]="TIE",e[e.PASS=2]="PASS",e[e.NOT_PASS=3]="NOT_PASS",e[e.IN_PROGRESS=4]="IN_PROGRESS",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(r||(r={}))},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return x}));var r=n(2),a=n.n(r),c=n(10),s=n(11);function o(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.C,"/api/").concat(s.D,"/offchain_proof/").concat(t));case 3:if(404!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:if(n.ok){e.next=8;break}throw new Error("Something went wrong while getting the off-chain vote proof.");case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var u=n(4),d=n(21),l=n(13),b=n(6);function j(e,t){var n=(e||[]).find((function(e){return Object.entries(e).find((function(e){var n=Object(u.a)(e,2),r=n[0];n[1];return Object(l.h)(r)===Object(l.h)(t||"")}))}));if(n)return Object.entries(n)[0][1].msg.payload.choice===d.VoteChoicesIndex.Yes?b.e.Yes:b.e.No}var f=n(17);function O(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(t){var r,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===f.c.OffchainVotingContract?4:e.t0===f.c.VotingContract?9:14;break;case 4:return e.next=6,n.e(1).then(n.t.bind(null,990,3));case 6:return r=e.sent,c=r.default,e.abrupt("return",c);case 9:return e.next=11,n.e(2).then(n.t.bind(null,989,3));case 11:return s=e.sent,o=s.default,e.abrupt("return",o);case 14:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 15:e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(0),e.t1;case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function h(e,t){return e===Math.log2(Number(t)+1)-1}var m=n(50);function v(e,t){return m.a[t]===m.a[e]}function x(e){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.C,"/api/").concat(s.D,"/offchain_proofs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Something went wrong while submitting the off-chain vote proof.");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},527:function(e,t){},529:function(e,t){},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="0x0000000000000000000000000000000000000000"},540:function(e,t){},542:function(e,t){},568:function(e,t){},574:function(e,t){},576:function(e,t){},588:function(e,t){},6:function(e,t,n){"use strict";var r,a,c,s,o,i;n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),function(e){e[e.EXISTS=0]="EXISTS"}(r||(r={})),function(e){e.bank="bank",e.configuration="configuration",e.coupon_onboarding="coupon-onboarding",e.dao_registry="daoRegistry",e.distribute="distribute",e.financing="financing",e.guildkick="guildkick",e.managing="managing",e.nft="nft",e.onboarding="onboarding",e.ragequit="ragequit",e.tribute="tribute",e.tribute_nft="tribute-nft",e.voting="voting"}(a||(a={})),function(e){e.bank="bank",e.erc20="erc20-ext",e.nft="nft"}(c||(c={})),function(e){e.offchainVotingGracePeriod="offchainvoting.gracePeriod",e.offchainVotingStakingAmount="offchainvoting.stakingAmount",e.offchainVotingVotingPeriod="offchainvoting.votingPeriod",e.onboardingChunkSize="onboarding.chunkSize",e.onboardingMaximumChunks="onboarding.maximumChunks",e.onboardingUnitsPerChunk="onboarding.unitsPerChunk",e.onboardingTokenAddr="onboarding.tokenAddr",e.votingGracePeriod="voting.gracePeriod",e.votingStakingAmount="voting.stakingAmount",e.votingVotingPeriod="voting.votingPeriod"}(s||(s={})),function(e){e.Yes="Yes",e.No="No"}(o||(o={})),function(e){e.STANDBY="STANDBY",e.AWAITING_CONFIRM="AWAITING_CONFIRM",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(i||(i={}))},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(6),a=(r.e.Yes,r.e.No,"Message"),c=["Submitting\u2026","Working\u2026","DAOing\u2026","Getting closer\u2026","Dreaming of ETH\u2026"]},61:function(e,t,n){"use strict";var r=n(199);n.d(t,"a",(function(){return r.a}))},643:function(e,t){},645:function(e,t){},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(13);function s(e){var t=e.intervalMs,n=e.messages,s=e.useFirstItemStart?n[0]:Object(c.a)(n),o=Object(a.useState)(s),i=Object(r.a)(o,2),u=i[0],d=i[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return d((function(e){return Object(c.a)(n,e)}))}),t);return function(){clearInterval(e)}}),[t,n]),e.render(u)}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(0);function s(e){var t=e.showAfterMs,n=Object(a.useState)(!1),s=Object(r.a)(n,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){var e=t&&setTimeout((function(){return i(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&o?Object(c.jsx)("div",{className:"loader--large","aria-label":"Loading content..."}):null}},767:function(e,t){},774:function(e,t){},791:function(e,t){},792:function(e,t){},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(65),a=n.n(r),c=function(e){return a.a.utils.isAddress(e)}},845:function(e,t){},88:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return p}));var r,a,c,s,o=n(117),i=n(144),u=Object(i.a)(r||(r=Object(o.a)(["\n  query GetDao($id: ID) {\n    tributeDaos(where: {id: $id}) {\n      id # dao address\n      daoAddress\n      name\n      totalUnits\n    }\n  }\n"]))),d=Object(i.a)(a||(a=Object(o.a)(["\n  query GetAdaptersAndExtensions($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      daoAddress\n      adapters {\n        id\n        acl\n        adapterId\n        adapterAddress\n      }\n      extensions {\n        id\n        extensionId\n        extensionAddress\n      }\n    }\n  }\n"]))),l=Object(i.a)(c||(c=Object(o.a)(["\n  query GetMembers($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      members(orderBy: createdAt, orderDirection: desc) {\n        createdAt\n        address: memberAddress\n        delegateKey\n        isDelegated\n        units\n        didFullyRagequit\n      }\n    }\n  }\n"]))),b=Object(i.a)(s||(s=Object(o.a)(["\n  query GetTokenHolderBalances($tokenAddress: String) {\n    tokens(where: {tokenAddress: $tokenAddress}) {\n      symbol\n      tokenAddress\n      holders {\n        balance\n        member {\n          id\n          delegateKey\n        }\n      }\n    }\n  }\n"]))),j=n(432),f=n(19),O=n(92);function p(e){return Object(j.a)((function(t){var n=t.networkError;n&&(e.getState().subgraphNetworkStatus.status!==O.a.ERR&&(e.dispatch(Object(f.V)({status:O.a.ERR})),console.error("[Subgraph network error]: ".concat(n))));n||e.getState().subgraphNetworkStatus.status!==O.a.OK&&e.dispatch(Object(f.V)({status:O.a.OK}))}))}},9:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},92:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.OK="OK",e.ERR="ERR"}(r||(r={}))},931:function(e,t){},954:function(e,t,n){},958:function(e,t,n){"use strict";n.r(t),n.d(t,"getApolloClient",(function(){return Fr}));var r=n(34),a=n(107),c=n(15),s=n(39),o=n(957),i=n(264),u=n(145),d=n(980),l=n(959),b=n(11),j=n(19),f=n(13),O=n(88),p=n(133),h=n(435),m=n(436),v=n(3),x=n(62),N=n(167),g=["type"],E=null;function A(e,t){return Object(v.a)(Object(v.a)({},e),t)}function w(){return E}var I=n(168),y={isOpen:!1};function C(e){return Object(v.a)(Object(v.a)({},e),{},{isOpen:!1})}function D(e){return Object(v.a)(Object(v.a)({},e),{},{isOpen:!0})}var _=["type"],k={BankAdapterContract:null,BankExtensionContract:null,BankFactoryContract:null,ConfigurationContract:null,CouponOnboardingContract:null,DaoFactoryContract:null,DaoRegistryAdapterContract:null,DaoRegistryContract:null,DistributeContract:null,ERC20ExtensionContract:null,FinancingContract:null,GuildBankContract:null,ManagingContract:null,NFTAdapterContract:null,NFTExtensionContract:null,OnboardingContract:null,RagequitContract:null,TributeContract:null,TributeNFTContract:null,VotingContract:null};function T(e){return Object(v.a)(Object(v.a)({},e),k)}function S(e,t){return Object(v.a)(Object(v.a)({},e),{},{BankFactoryContract:Object(v.a)({},t)})}function R(e,t){return Object(v.a)(Object(v.a)({},e),{},{DaoFactoryContract:Object(v.a)({},t)})}function P(e,t){return Object(v.a)(Object(v.a)({},e),{},{DaoRegistryContract:Object(v.a)({},t)})}function F(e,t){return Object(v.a)(Object(v.a)({},e),{},{DaoRegistryAdapterContract:Object(v.a)({},t)})}function L(e,t){return Object(v.a)(Object(v.a)({},e),{},{BankExtensionContract:Object(v.a)({},t)})}function M(e,t){return Object(v.a)(Object(v.a)({},e),{},{ConfigurationContract:Object(v.a)({},t)})}function B(e,t){return Object(v.a)(Object(v.a)({},e),{},{DistributeContract:Object(v.a)({},t)})}function G(e,t){return Object(v.a)(Object(v.a)({},e),{},{FinancingContract:Object(v.a)({},t)})}function U(e,t){return Object(v.a)(Object(v.a)({},e),{},{GuildBankContract:Object(v.a)({},t)})}function V(e,t){return Object(v.a)(Object(v.a)({},e),{},{OnboardingContract:Object(v.a)({},t)})}function W(e,t){return Object(v.a)(Object(v.a)({},e),{},{RagequitContract:Object(v.a)({},t)})}function Y(e,t){return Object(v.a)(Object(v.a)({},e),{},{TributeContract:Object(v.a)({},t)})}function H(e,t){return Object(v.a)(Object(v.a)({},e),{},{VotingContract:Object(v.a)({},t)})}function K(e,t){return Object(v.a)(Object(v.a)({},e),{},{ManagingContract:Object(v.a)({},t)})}function z(e,t){return Object(v.a)(Object(v.a)({},e),{},{BankAdapterContract:Object(v.a)({},t)})}function q(e,t){return Object(v.a)(Object(v.a)({},e),{},{NFTAdapterContract:Object(v.a)({},t)})}function J(e,t){return Object(v.a)(Object(v.a)({},e),{},{TributeNFTContract:Object(v.a)({},t)})}function Q(e,t){return Object(v.a)(Object(v.a)({},e),{},{CouponOnboardingContract:Object(v.a)({},t)})}function X(e,t){return Object(v.a)(Object(v.a)({},e),{},{NFTExtensionContract:Object(v.a)({},t)})}function $(e,t){return Object(v.a)(Object(v.a)({},e),{},{ERC20ExtensionContract:Object(v.a)({},t)})}var Z=n(197),ee=n(92),te=["type"],ne={status:ee.a.OK};function re(e,t){return Object(v.a)(Object(v.a)({},e),t)}var ae=Object(p.combineReducers)({connectModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case I.a:return C(e);case I.b:return D(e);default:return e}},connectedMember:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(x.a)(t,g);switch(n){case N.b:return A(e,r);case N.a:return w();default:return e}},contracts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(x.a)(t,_);switch(n){case j.a:return T(e);case j.b:return z(e,r);case j.c:return L(e,r);case j.d:return S(e,r);case j.e:return M(e,r);case j.f:return Q(e,r);case j.g:return R(e,r);case j.h:return P(e,r);case j.i:return F(e,r);case j.j:return B(e,r);case j.k:return $(e,r);case j.l:return G(e,r);case j.m:return U(e,r);case j.n:return K(e,r);case j.o:return q(e,r);case j.p:return X(e,r);case j.q:return V(e,r);case j.r:return W(e,r);case j.s:return Y(e,r);case j.t:return J(e,r);case j.u:case j.v:return H(e,r);default:return e}},subgraphNetworkStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(x.a)(t,te);switch(n){case Z.a:return re(e,r);default:return e}}}),ce=Object(p.createStore)(ae,Object(h.composeWithDevTools)(Object(p.applyMiddleware)(m.a))),se=n(59),oe=n(1),ie=n.n(oe),ue=n(0);function de(e){return Object(ue.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 14"},e),{},{children:Object(ue.jsx)("g",{fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:Object(ue.jsx)("g",{transform:"translate(-737 -124)",children:Object(ue.jsx)("g",{transform:"translate(596 124)",children:Object(ue.jsx)("path",{fill:"currentColor",d:"M151.166.8h-8.679c-.733 0-1.344.611-1.344 1.345v8.8c0 .734.611 1.345 1.344 1.345h7.395l-.366-1.223.855.795.795.733 1.405 1.223V2.145c-.06-.734-.61-1.345-1.405-1.345zm-2.506 8.495s-.244-.306-.428-.55c.49-.122.917-.367 1.161-.795a2.065 2.065 0 01-.733.367c-.306.122-.611.245-.917.306a4.039 4.039 0 01-1.71 0 6.007 6.007 0 01-.979-.306 1.83 1.83 0 01-.489-.244s-.06 0-.06-.061c-.123-.062-.184-.123-.184-.123.305.367.672.673 1.161.795-.183.244-.428.55-.428.55a2.579 2.579 0 01-2.017-.978c0-1.344.367-2.628.917-3.79.55-.427 1.161-.671 1.834-.671l.06.06c-.61.184-1.222.429-1.71.856l.366-.183c.49-.183.978-.367 1.467-.428h.122a4.947 4.947 0 011.345 0c.672.061 1.344.306 1.955.611a5.299 5.299 0 00-1.65-.855l.061-.122c.673.06 1.284.244 1.834.672.611 1.161.917 2.506.917 3.789-.367.733-1.1 1.1-1.895 1.1zm-2.995-3.056c-.427-.06-.733.245-.794.673-.061.427.244.733.672.794.428.061.734-.244.795-.672v-.061c0-.367-.306-.734-.673-.734zm2.384 0c-.428-.06-.733.245-.795.673-.06.427.245.733.673.794.427.061.733-.244.794-.672v-.061c0-.367-.305-.734-.672-.734z"})})})})}))}var le,be=n(20),je=n(24),fe=n(32),Oe=n(31),pe=function(e){Object(fe.a)(n,e);var t=Object(Oe.a)(n);function n(){return Object(be.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){return Object(ue.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"github","data-prefix":"fab",viewBox:"0 0 496 512",children:Object(ue.jsx)("path",{fill:"currentColor",d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})}}]),n}(ie.a.Component),he=function(e){Object(fe.a)(n,e);var t=Object(Oe.a)(n);function n(){return Object(be.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){return Object(ue.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"medium","data-prefix":"fab",viewBox:"0 0 448 512",children:Object(ue.jsx)("path",{fill:"currentColor",d:"M0 32v448h448V32H0zm372.2 106.1l-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"})})}}]),n}(ie.a.Component);function me(){return Object(ue.jsxs)("div",{className:"socialmedia",children:[Object(ue.jsx)("a",{href:le.MEDIUM,target:"_blank",rel:"noopener noreferrer",children:Object(ue.jsx)(he,{})}),Object(ue.jsx)("a",{href:le.DISCORD,target:"_blank",rel:"noopener noreferrer",children:Object(ue.jsx)(de,{})}),Object(ue.jsx)("a",{href:le.GITHUB,target:"_blank",rel:"noopener noreferrer",children:Object(ue.jsx)(pe,{})})]})}function ve(){return Object(ue.jsx)("div",{className:"footer",children:Object(ue.jsx)(me,{})})}!function(e){e.DISCORD="#",e.GITHUB="https://github.com/search?q=org%3Aopenlawteam+tribute-ui+OR+tribute-contracts+in%3Aname&type=repositories",e.MEDIUM="#"}(le||(le={}));var xe=n(4),Ne=n(14),ge=n(9),Ee=Object(oe.lazy)((function(){return n.e(9).then(n.bind(null,1011))}));function Ae(){var e=Object(c.c)((function(e){return e.connectModal.isOpen})),t=Object(oe.useState)({isOpen:e,onRequestClose:function(){f(Object(j.y)())}}),n=Object(xe.a)(t,2),r=n[0],a=n[1],s=Object(Ne.f)(),o=s.account,i=s.connected,u=s.initialCachedConnectorCheckStatus,d=s.web3Instance,l=Object(Ne.d)().isDefaultChain,b=Object(Ne.e)(o,null===d||void 0===d?void 0:d.currentProvider),f=Object(c.b)(),O=Object(se.g)().pathname;return Object(oe.useEffect)((function(){a((function(t){return Object(v.a)(Object(v.a)({},t),{},{isOpen:e})}))}),[e]),Object(oe.useEffect)((function(){u===ge.a.FULFILLED&&f(!(!i||l&&!b)?Object(j.z)():Object(j.y)())}),[i,f,u,l,b,O]),e?Object(ue.jsx)(oe.Suspense,{fallback:null,children:Object(ue.jsx)(Ee,{maybeContractWallet:b,modalProps:r})}):null}var we=n(438);function Ie(){return Object(ue.jsxs)(we.a,{children:[Object(ue.jsx)("title",{children:"Tribute"}),Object(ue.jsx)("meta",{name:"description",content:"A modular DAO framework developed and coordinated by its members"})]})}function ye(e){return Object(ue.jsx)("div",{className:"logo ".concat(e.size?"logo--".concat(e.size):""),children:"TRIBUTE"})}function Ce(){return Object(ue.jsx)("div",{className:"logo-container logo-container--center",children:Object(ue.jsx)(ye,{size:"small"})})}function De(){return Object(ue.jsx)("div",{className:"logo-container logo-container--header",children:Object(ue.jsx)(ye,{size:"medium"})})}function _e(){return Object(ue.jsx)("div",{className:"logo-container logo-container--center",children:Object(ue.jsx)(ye,{size:"large"})})}var ke=n(965),Te=n(449),Se=n(147),Re=n.n(Se);function Pe(){return Object(ue.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"bars","data-prefix":"fal",viewBox:"0 0 448 512",children:Object(ue.jsx)("path",{fill:"currentColor",d:"M442 114H6a6 6 0 01-6-6V84a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6z"})})}var Fe=n(101),Le=n(407),Me=n(426);function Be(e){var t=e.customWalletText,n=e.showWalletETHBadge,r=void 0===n||n,a=Object(Ne.f)(),s=a.account,o=a.connected,i=a.web3Modal,u=Object(Ne.d)().isDefaultChain,d=Object(c.b)(),l=!1===u;return Object(ue.jsxs)("button",{className:"walletconnect__connect-button \n        ".concat(l&&o?"walletconnect__connect-button--error":""),onClick:function(){d(Object(j.z)())},children:[Object(ue.jsx)("span",{className:"connect-button-text ".concat(o?"connect-button-text--ethAddress":""),children:t?"function"===typeof t?t({account:s,connected:o,isMobile:Le.isMobile}):t:s?Object(f.k)(s):"Connect"}),l&&o&&Object(ue.jsx)("span",{children:"Wrong Network"}),r&&Object(ue.jsx)(Me.a,{providerName:null===i||void 0===i?void 0:i.cachedProvider})]})}var Ge=n(23),Ue=n(2),Ve=n.n(Ue),We=n(10);function Ye(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(oe.useState)(),n=Object(xe.a)(t,2),r=n[0],a=n[1],s=Object(oe.useState)(ge.a.STANDBY),o=Object(xe.a)(s,2),i=o[0],u=o[1],d=Object(oe.useState)(),l=Object(xe.a)(d,2),b=l[0],j=l[1],f=Object(oe.useCallback)((function(){return O.apply(this,arguments)}),[e]);function O(){return(O=Object(We.a)(Ve.a.mark((function t(){var n,r;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,u(ge.a.PENDING),t.next=6,e.instance.methods.symbol().call();case 6:return n=t.sent,t.next=9,e.instance.methods.decimals().call();case 9:r=t.sent,a({address:e.contractAddress,symbol:n,decimals:Number(r),image:"".concat(window.location.origin,"/favicon.ico")}),u(ge.a.FULFILLED),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0),a(void 0),j(t.t0),u(ge.a.REJECTED);case 20:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){f()}),[f]),{daoTokenDetails:r,daoTokenDetailsError:b,daoTokenDetailsStatus:i}}var He=n(981);var Ke=["customStyles"],ze="".concat(window.location.origin,"/favicon.ico");function qe(e){var t=e.customStyles,n=Object(x.a)(e,Ke),r=Object(oe.useState)(),a=Object(xe.a)(r,2),s=a[0],o=a[1],i=Object(oe.useState)(),u=Object(xe.a)(i,2),d=u[0],l=u[1],j=Object(oe.useState)(""),p=Object(xe.a)(j,2),h=p[0],m=p[1],N=function(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(c.c)((function(e){return e.connectedMember})),n=Object(He.a)(O.d,{variables:{tokenAddress:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),r=Object(xe.a)(n,2),a=r[0],s=r[1],o=s.called,i=s.loading,u=s.data,d=s.error,l=s.refetch,b=Object(oe.useState)(),j=Object(xe.a)(b,2),f=j[0],p=j[1],h=Object(oe.useState)(),m=Object(xe.a)(h,2),v=m[0],x=m[1],N=Object(oe.useCallback)((function(){try{if(!i&&u){if(p(u.tokens[0]),0===u.tokens.length)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" erc20 address not found.'))}else if(d)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" is not a valid erc20 address.'))}catch(d){x(d)}}),[null===e||void 0===e?void 0:e.contractAddress,u,d,i]);return Object(oe.useEffect)((function(){o||a()}),[o,a]),Object(oe.useEffect)((function(){!i&&(null===e||void 0===e?void 0:e.contractAddress)&&N()}),[null===e||void 0===e?void 0:e.contractAddress,N,i]),Object(oe.useEffect)((function(){l&&l()}),[t,l]),{tokenHolderBalances:f,gqlError:v}}().tokenHolderBalances,g=Object(Ne.f)(),E=g.account,A=g.networkId,w=Object(oe.useCallback)((function(){try{(e=ze,fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onerror=n,r.readAsDataURL(e)}))}))).then((function(e){e&&l(e)}))}catch(t){console.log(t)}var e}),[]);return Object(oe.useEffect)((function(){if(o(void 0),E&&N){var e=N.holders,t=N.symbol,n=N.tokenAddress,r=null===e||void 0===e?void 0:e.find((function(e){var t;return(null===(t=e.member)||void 0===t?void 0:t.id.toLowerCase())===E.toLowerCase()}));r&&o({balance:r.balance,tokenAddress:n,symbol:t}),E&&A&&m("".concat(b.o[A],"/token/").concat(n,"?a=").concat(E)),w()}}),[E,A,N,w]),s?Object(ue.jsx)(Ge.a,{children:Object(ue.jsxs)("a",{className:"daotokenholder__button",rel:"noopener noreferrer",target:"_blank",href:h,style:Object(v.a)(Object(v.a)({},n),t),children:[Object(ue.jsx)("span",{className:"daotokenholder__balance",children:Object(f.e)(s.balance)}),Object(ue.jsx)("span",{className:"daotokenholder__symbol",children:s.symbol}),d&&Object(ue.jsx)("img",{src:d,alt:"Token Icon"})]})}):Object(ue.jsx)(ue.Fragment,{})}var Je={transition:"0.1s"},Qe={entering:{right:"-300px"},entered:{right:0},exiting:{right:0,opacity:0},exited:{right:"-300px",opacity:0}},Xe={entering:{right:0,opacity:1},entered:{right:"-300px",opacity:1},exiting:{right:"-300px",opacity:1},exited:{right:0,opacity:1}};function $e(){return Object(ue.jsx)("nav",{role:"navigation",id:"navigation",children:Object(ue.jsxs)("ul",{className:"nav__list","data-testid":"nav__list",children:[Object(ue.jsx)("li",{tabIndex:0,children:Object(ue.jsx)(s.c,{to:"/membership",children:Object(ue.jsx)("span",{children:"Membership"})})}),Object(ue.jsx)("li",{tabIndex:0,children:Object(ue.jsx)(s.c,{to:"/governance",children:Object(ue.jsx)("span",{children:"Governance"})})}),Object(ue.jsx)("li",{tabIndex:0,children:Object(ue.jsx)(s.c,{to:"/transfers",children:Object(ue.jsx)("span",{children:"Transfer"})})}),Object(ue.jsx)("li",{tabIndex:0,children:Object(ue.jsx)(s.c,{to:"/tributes",children:Object(ue.jsx)("span",{children:"Tribute"})})})]})})}function Ze(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(oe.useState)(!1),n=Object(xe.a)(t,2),r=n[0],a=n[1],o=Object(oe.useState)(Qe),i=Object(xe.a)(o,2),u=i[0],d=i[1],l=Object(Ne.f)().account,b=Object(oe.useRef)();Object(oe.useEffect)((function(){return function(){b.current&&clearTimeout(b.current)}}),[]);var j=!(!l||!(null===e||void 0===e?void 0:e.isActiveMember)),f=!(!l||!(null===e||void 0===e?void 0:e.isActiveMember)||l.toLowerCase()!==(null===e||void 0===e?void 0:e.memberAddress.toLowerCase()));function O(e){if(!e)return d(Xe),b.current=setTimeout((function(){return a(e)}),500),function(){return b.current&&clearTimeout(b.current)};a(e),d(Qe)}return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{tabIndex:0,className:"nav__hamburger-wrapper",children:Object(ue.jsx)("div",{className:"nav__hamburger","aria-label":"Menu","aria-controls":"navigation",onClick:function(e){e.preventDefault(),O(!0)},children:Object(ue.jsx)(Pe,{})})}),Object(ue.jsx)(Re.a,{ariaHideApp:!1,className:"nav-modal-container",isOpen:r,onRequestClose:function(){O(!1)},overlayClassName:"nav-modal-overlay",role:"dialog",style:{overlay:{zIndex:"99"}},children:Object(ue.jsx)(ke.a,{appear:!0,in:r,timeout:200,children:function(e){return Object(ue.jsx)("nav",{role:"navigation",id:"navigation",children:Object(ue.jsxs)("div",{style:Object(v.a)(Object(v.a)({},Je),u[e]),className:"nav-modal",children:[Object(ue.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(e){e.preventDefault(),O(!1)},children:Object(ue.jsx)(Fe.a,{})}),Object(ue.jsx)(Ce,{}),Object(ue.jsx)("div",{className:"nav-modal__walletconnect-button-container",children:Object(ue.jsx)(Be,{})}),Object(ue.jsxs)("ul",{className:"nav__list",children:[Object(ue.jsx)("li",{onClick:function(){O(!1)},children:Object(ue.jsx)(s.c,{to:"/membership",children:Object(ue.jsx)("span",{children:"Membership"})})}),Object(ue.jsx)("li",{onClick:function(){O(!1)},children:Object(ue.jsx)(s.c,{to:"/governance",children:Object(ue.jsx)("span",{children:"Governance"})})}),Object(ue.jsx)("li",{onClick:function(){O(!1)},children:Object(ue.jsx)(s.c,{to:"/transfers",children:Object(ue.jsx)("span",{children:"Transfer"})})}),Object(ue.jsx)("li",{onClick:function(){O(!1)},children:Object(ue.jsx)(s.c,{to:"/tributes",children:Object(ue.jsx)("span",{children:"Tribute"})})}),f&&Object(ue.jsx)("li",{onClick:function(){O(!1)},children:Object(ue.jsx)(s.c,{to:"/members/".concat(l),children:Object(ue.jsx)("span",{children:"Profile"})})}),j&&Object(ue.jsx)("li",{onClick:function(){O(!1)},children:Object(ue.jsx)(s.c,{to:"/dao-manager",children:Object(ue.jsx)("span",{children:"Manage DAO"})})})]})]})})}})})]})}function et(){return Object(ue.jsx)(Te.a,{query:"(max-width: 62em)",children:function(e){return Object(ue.jsx)("div",{className:"nav-header",children:Object(ue.jsxs)("div",{className:"nav-header__menu-container",children:[Object(ue.jsx)($e,{}),Object(ue.jsx)(qe,{border:"1px solid #c3d6dc"}),Object(ue.jsx)(Ze,{}),Object(ue.jsx)("div",{className:"nav-header__walletconnect-button-container",children:Object(ue.jsx)(Be,{})})]})})}})}function tt(){function e(e){return Object(ue.jsx)(s.b,{to:"/",children:e.children})}return Object(ue.jsxs)("header",{className:"header",children:[Object(ue.jsx)(e,{children:Object(ue.jsx)(De,{})}),Object(ue.jsx)("div",{className:"header__nav-container",children:Object(ue.jsx)(et,{})})]})}var nt=n(7),rt=n(17),at=n(65),ct=n.n(at);function st(e){return t=e,ct.a.utils.sha3(t);var t}function ot(e){var t;return{acl:it((t={},Object(nt.a)(t,rt.b.BANK,{}),Object(nt.a)(t,rt.a.CONFIGURATION,{SUBMIT_PROPOSAL:!0,PROCESS_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,SET_CONFIGURATION:!0}),Object(nt.a)(t,rt.a.DISTRIBUTE,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,INTERNAL_TRANSFER:!0}),Object(nt.a)(t,rt.a.EXECUTION,{}),Object(nt.a)(t,rt.a.TRIBUTE,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,NEW_MEMBER:!0,ADD_TO_BALANCE:!0,REGISTER_NEW_TOKEN:!0}),Object(nt.a)(t,rt.a.FINANCING,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,ADD_TO_BALANCE:!0,SUB_FROM_BALANCE:!0}),Object(nt.a)(t,rt.a.GUILDKICK,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,SUB_FROM_BALANCE:!0,ADD_TO_BALANCE:!0,JAIL_MEMBER:!0,UNJAIL_MEMBER:!0,INTERNAL_TRANSFER:!0}),Object(nt.a)(t,rt.a.MANAGING,{SUBMIT_PROPOSAL:!0,PROCESS_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,REMOVE_ADAPTER:!0,ADD_ADAPTER:!0}),Object(nt.a)(t,rt.a.OFFCHAINVOTING,{}),Object(nt.a)(t,rt.a.ONBOARDING,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,ADD_TO_BALANCE:!0,UPDATE_DELEGATE_KEY:!0,NEW_MEMBER:!0}),Object(nt.a)(t,rt.a.NONVOTING_ONBOARDING,{}),Object(nt.a)(t,rt.a.RAGEQUIT,{SUB_FROM_BALANCE:!0,JAIL_MEMBER:!0,UNJAIL_MEMBER:!0,INTERNAL_TRANSFER:!0}),Object(nt.a)(t,rt.a.VOTING,{}),Object(nt.a)(t,rt.a.BANK,{WITHDRAW:!0,SUB_FROM_BALANCE:!0,UPDATE_TOKEN:!0}),Object(nt.a)(t,rt.a.NFT,{COLLECT_NFT:!0}),Object(nt.a)(t,rt.a.COUPON_ONBOARDING,{SUBMIT_PROPOSAL:!1,ADD_TO_BALANCE:!0,UPDATE_DELEGATE_KEY:!1,NEW_MEMBER:!0}),Object(nt.a)(t,rt.a.TRIBUTE_NFT,{SUBMIT_PROPOSAL:!0,NEW_MEMBER:!0,ADD_TO_BALANCE:!0,COLLECT_NFT:!0}),Object(nt.a)(t,rt.b.NFT,{WITHDRAW_NFT:!0,COLLECT_NFT:!0,INTERNAL_TRANSFER:!0}),Object(nt.a)(t,rt.a.DAO_REGISTRY,{UPDATE_DELEGATE_KEY:!0}),t)[e])}}function it(e){var t=[e.ADD_ADAPTER,e.REMOVE_ADAPTER,e.JAIL_MEMBER,e.UNJAIL_MEMBER,e.SUBMIT_PROPOSAL,e.SPONSOR_PROPOSAL,e.PROCESS_PROPOSAL,e.UPDATE_DELEGATE_KEY,e.SET_CONFIGURATION,e.ADD_EXTENSION,e.REMOVE_EXTENSION,e.NEW_MEMBER],n=[e.TRANSFER_NFT];return function(e){return e.map((function(e,t){return void 0!==e?Math.pow(2,t):0})).reduce((function(e,t){return e+t}))}([].concat(t,n))}var ut=[{name:rt.a.CONFIGURATION,adapterId:st(rt.a.CONFIGURATION),contractAddress:b.e[b.k],abiFunctionName:"submitConfigurationProposal",description:"Manages storing and retrieving per-DAO settings required by shared adapters."},{name:rt.a.DISTRIBUTE,adapterId:st(rt.a.DISTRIBUTE),contractAddress:b.l[b.k],abiFunctionName:"submitProposal",description:"Allows the members to distribute funds to one or all members of the DAO."},{name:rt.a.FINANCING,adapterId:st(rt.a.FINANCING),contractAddress:b.q[b.k],abiFunctionName:"createFinancingRequest",description:"Allows individuals and/or organizations to request funds to finance their projects, and the members of the DAO have the power to vote and decide which projects should be funded."},{name:rt.a.GUILDKICK,adapterId:st(rt.a.GUILDKICK),contractAddress:b.t[b.k],abiFunctionName:"submitKickProposal",description:"Gives the members the freedom to choose which individuals or organizations should really be part of the DAO."},{name:rt.a.MANAGING,adapterId:st(rt.a.MANAGING),contractAddress:b.v[b.k],abiFunctionName:"submitProposal",description:"Enhances the DAO capabilities by adding/updating the DAO Adapters through a voting process."},{name:rt.a.ONBOARDING,adapterId:st(rt.a.ONBOARDING),contractAddress:b.A[b.k],abiFunctionName:"configureDao",description:"Triggers the process of minting internal tokens in exchange of a specific token at a fixed price."},{name:rt.a.RAGEQUIT,adapterId:st(rt.a.RAGEQUIT),contractAddress:b.B[b.k],abiFunctionName:"ragequit",description:"Gives the members the freedom to choose when it is the best time to exit the DAO for any given reason."},{name:rt.a.TRIBUTE,adapterId:st(rt.a.TRIBUTE),contractAddress:b.F[b.k],abiFunctionName:"configureDao",description:"Allows potential and existing DAO members to contribute any amount of ERC-20 tokens to the DAO in exchange for any amount of DAO internal tokens."},{name:rt.a.TRIBUTE_NFT,adapterId:st(rt.a.TRIBUTE_NFT),contractAddress:b.G[b.k],abiFunctionName:"provideTributeNFT",description:"Allows potential DAO members to contribute a registered ERC-721 asset to the DAO in exchange for any amount of DAO units."},{options:[{name:rt.a.VOTING,displayName:rt.a.OFFCHAINVOTING,adapterId:st(rt.a.VOTING),contractAddress:b.z[b.k],abiFunctionName:"configureDao",description:"Adds the offchain voting governance process to the DAO to support gasless voting.",setAclToExtensionForAdapter:!0},{name:rt.a.VOTING,displayName:rt.a.VOTING,adapterId:st(rt.a.VOTING),contractAddress:b.I[b.k],abiFunctionName:"configureDao",description:"Adds the simple on chain voting governance process to the DAO.",setAclToExtensionForAdapter:!0}],optionDefaultTarget:rt.a.VOTING},{name:rt.a.BANK,adapterId:st(rt.a.BANK),contractAddress:b.a[b.k],abiFunctionName:"withdraw",description:"Allows the members to withdraw their funds from the DAO bank."},{name:rt.a.NFT,adapterId:st(rt.a.NFT),contractAddress:b.y[b.k],abiFunctionName:"collect",description:"Transfers ownership of an NFT to the DAO collection."},{name:rt.a.COUPON_ONBOARDING,adapterId:st(rt.a.COUPON_ONBOARDING),contractAddress:b.f[b.k],abiFunctionName:"configureDao",description:"Provides a way to onboard an initial group of members quickly without requiring multiple proposals."},{name:rt.a.DAO_REGISTRY,adapterId:st(rt.a.DAO_REGISTRY),contractAddress:b.i[b.k],abiFunctionName:"updateDelegateKey",description:"Allows the member to update delegate key."}],dt=n(29),lt=["DaoRegistryContract"];function bt(){var e=Object(c.c)((function(e){return e.contracts})),t=e.DaoRegistryContract,n=Object(x.a)(e,lt),r=Object(He.a)(O.a,{pollInterval:b.r,variables:{daoAddress:null===t||void 0===t?void 0:t.contractAddress.toLowerCase()}}),a=Object(xe.a)(r,2),s=a[0],o=a[1],i=o.called,u=o.data,d=o.error,l=Object(oe.useState)(),j=Object(xe.a)(l,2),f=j[0],p=j[1],h=Object(oe.useState)(),m=Object(xe.a)(h,2),N=m[0],g=m[1],E=Object(oe.useState)(ge.a.STANDBY),A=Object(xe.a)(E,2),w=A[0],I=A[1],y=Object(oe.useCallback)((function(e,t){var n=[],r=[],a=function(t){return e.find((function(e){var n;return(null===(n=e.adapterId)||void 0===n?void 0:n.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())}))},c=function(e){return t.find((function(t){var n;return(null===(n=t.extensionId)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}))};return ut.forEach((function(e){if(null===e||void 0===e?void 0:e.isExtension){var t=c(e.extensionId);t?n.push(Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{name:e.name,description:e.description})):r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}else if(null===e||void 0===e?void 0:e.options){var s=null===e||void 0===e?void 0:e.options.some((function(e){return!e.isExtension&&a(e.adapterId)})),o=null===e||void 0===e?void 0:e.options.some((function(e){return e.isExtension&&c(e.extensionId)}));if(s||o){var i,u=!1;null===e||void 0===e||null===(i=e.options)||void 0===i||i.forEach((function(e){if(!u)if(null===e||void 0===e?void 0:e.isExtension){var t=c(e.extensionId);if(t)return n.push(Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{name:e.name,description:e.description})),void(u=!0);r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}else{var s=a(e.adapterId);if(s)return n.push(Object(v.a)(Object(v.a)(Object(v.a)({},s),e),{},{name:e.name,description:e.description})),void(u=!0);r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}}))}else r.push(e)}else{var d=a(e.adapterId);d?n.push(Object(v.a)(Object(v.a)(Object(v.a)({},d),e),{},{name:e.name,description:e.description})):r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}})),{registeredList:n,unRegisteredList:r}}),[]);return Object(oe.useEffect)((function(){i||s()}),[i,s]),Object(oe.useEffect)((function(){if(null===t||void 0===t?void 0:t.contractAddress)try{if(I(ge.a.PENDING),u){var e=u.tributeDaos[0],n=e.adapters,r=e.extensions,a=y(n,r),c=a.registeredList,s=a.unRegisteredList;p(c),g(s),I(ge.a.FULFILLED)}else if(d)throw new Error(d.message)}catch(d){p(void 0),g(void 0),I(ge.a.REJECTED)}}),[t,u,d,y]),{adapterExtensionStatus:w,getAdapterOrExtensionFromRedux:function(e){return Object.keys(n).map((function(e){return n[e]})).filter((function(e){return e})).filter((function(t){return t.adapterOrExtensionName===e}))[0]},registeredAdaptersOrExtensions:f,unRegisteredAdaptersOrExtensions:N}}var jt,ft=n(33);function Ot(){var e=Object(Ne.d)().defaultChain;return{isParamInputValid:function(t,n){var r=t.toString();return n===jt.ADDRESS?function(t){try{return!!t&&(ct.a.utils.checkAddressChecksum(t,e)||ct.a.utils.isAddress(t,e))}catch(n){return!1}}(r):n===jt.BYTES32?function(e){try{return!!e&&(66===e.length&&ct.a.utils.isHex(e))}catch(t){return!1}}(r):n===jt.BYTES32_ARRAY?function(e){try{return Array.from(e.split(",")).every((function(e){return 66===e.length&&ct.a.utils.isHex(e)}))}catch(t){return!1}}(r):n===jt.UINT256?function(e){return!isNaN(Number(e))}(r):n!==jt.UINT256_ARRAY||function(e){return Array.from(e.split(",")).every((function(e){return Number(e)}))}(r)},getFormFieldError:function(e){return e===jt.ADDRESS?ft.a.INVALID_ETHEREUM_ADDRESS:e===jt.BYTES32?ft.a.INVALID_BYTES32:e===jt.BYTES32_ARRAY?ft.a.INVALID_BYTES32_ARRAY:e===jt.UINT256?ft.a.INVALID_NUMBER:e===jt.UINT256_ARRAY?ft.a.INVALID_NUMBER_ARRAY:ft.a.REQUIRED},formatInputByType:function(e,t){return t===jt.BYTES32_ARRAY?Array.from(e.split(",")):t===jt.UINT256_ARRAY?Array.from(e.split(",").map((function(e){return Number(e)}))):t===jt.UINT256?Number(e):e}}}!function(e){e.ADDRESS="address",e.BYTES32="bytes32",e.BYTES32_ARRAY="bytes32[]",e.UINT256="uint256",e.UINT256_ARRAY="uint256[]"}(jt||(jt={}));var pt=n(40);function ht(e){var t=e.adapterOrExtension,n=e.defaultTarget,r=e.renderActions,a=e.renderCheckboxAction,c=Object(oe.useState)(n||null),s=Object(xe.a)(c,2),o=s[0],i=s[1],u=Object(oe.useState)({}),d=Object(xe.a)(u,2),l=d[0],b=d[1];return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{className:"adapter-extension__inner-wrapper ",children:[a({selectedTargetOption:o}),Object(ue.jsxs)("div",{className:"adapter-extension__info",children:[Object(ue.jsxs)("span",{className:"adapter-extension__name",children:[null===t||void 0===t?void 0:t.optionDefaultTarget,(null===t||void 0===t?void 0:t.isExtension)&&"(EXTENSION)"]}),Object(ue.jsxs)("select",{className:"select",onChange:function(e){var n=e.target.value;i(n);var r=null===t||void 0===t?void 0:t.options.find((function(e){return e.displayName===n}));b(r)},children:[Object(ue.jsxs)("option",{value:"",disabled:null!==o,children:["Select a ",null===t||void 0===t?void 0:t.optionDefaultTarget," type\u2026"]},"adapterOrExtensionSelect"),null===t||void 0===t?void 0:t.options.map((function(e){return Object(ue.jsx)("option",{value:e.displayName,children:e.displayName.toUpperCase()},e.displayName)}))]}),function(e){if(!e)return null;try{var n=(null===t||void 0===t?void 0:t.options.find((function(t){return t.displayName===e})).description)||"";return Object(ue.jsx)("span",{className:"adapter-extension__desc",children:n})}catch(r){console.warn(r)}}(o)]})]}),r({selectedTargetOption:o,selectedTargetOptionProps:l})]})}var mt=n(89),vt=n(6),xt=n(53),Nt=n(27),gt=["error"];function Et(e){var t=e.error,n=Object(x.a)(e,gt);return Object(ue.jsx)(ue.Fragment,{children:t&&Object(ue.jsx)(Ge.a,{children:Object(ue.jsx)("p",Object(v.a)(Object(v.a)({},n),{},{className:"error-message ".concat(n.className||""),children:t}))})})}var At=n(41);function wt(e){var t=e.abiConfigurationInputs,n=e.abiMethodName,r=e.adapterOrExtension,a=e.closeHandler,s=Object(c.c)((function(e){return e.contracts})).DaoRegistryContract,o=Object(oe.useState)(),i=Object(xe.a)(o,2),u=i[0],d=i[1],l=Object(oe.useState)(vt.f.STANDBY),b=Object(xe.a)(l,2),j=b[0],O=b[1],p=Object(oe.useState)(vt.f.STANDBY),h=Object(xe.a)(p,2),m=h[0],x=h[1],N=Object(Ne.a)(),g=N.txError,E=N.txIsPromptOpen,A=N.txSend,w=N.txStatus,I=Object(Ne.b)().fast,y=Object(Ne.f)(),C=y.connected,D=y.account,_=Ot(),k=_.isParamInputValid,T=_.getFormFieldError,S=_.formatInputByType,R=bt().getAdapterOrExtensionFromRedux,P=Object(mt.a)({mode:"onBlur",reValidateMode:"onChange"}),F=P.errors,L=P.formState,M=P.getValues,B=P.setValue,G=P.register,U=P.trigger,V=u||g,W=C&&D,Y=(null===r||void 0===r?void 0:r.isExtension)?"extension":"adapter",H=L.isValid,K=(w===vt.f.AWAITING_CONFIRM||w===vt.f.PENDING)&&(j===vt.f.AWAITING_CONFIRM||j===vt.f.PENDING),z=(w===vt.f.AWAITING_CONFIRM||w===vt.f.PENDING)&&(m===vt.f.AWAITING_CONFIRM||m===vt.f.PENDING),q=w===vt.f.FULFILLED&&j===vt.f.FULFILLED,J=w===vt.f.FULFILLED&&m===vt.f.FULFILLED,Q=(K||q)&&E,X=(z||J)&&E;function $(){return($=Object(We.a)(Ve.a.mark((function e(){var t,n,c;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,x(vt.f.AWAITING_CONFIRM),t=[null===r||void 0===r?void 0:r.extensionId],n=[null===r||void 0===r?void 0:r.adapterId,xt.a,0,[],[]],c=Object(v.a)({from:D||""},I?{gasPrice:I}:null),e.next=9,A((null===r||void 0===r?void 0:r.isExtension)?"removeExtension":"replaceAdapter",s.instance.methods,(null===r||void 0===r?void 0:r.isExtension)?t:n,c);case 9:x(vt.f.FULFILLED),a&&setTimeout((function(){a()}),3e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),d(e.t0),x(vt.f.REJECTED);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Z(){return(Z=Object(We.a)(Ve.a.mark((function e(a){var c,s,o,i,u;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O(vt.f.PENDING),c=R(null===r||void 0===r?void 0:r.name),s=c.contractAddress,o=c.instance.methods,W){e.next=5;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 5:if(s){e.next=7;break}throw new Error("No ".concat(null===r||void 0===r?void 0:r.name," contract found."));case 7:if(D){e.next=9;break}throw new Error("No account found.");case 9:return i=[],null===t||void 0===t||t.forEach((function(e){var t=Object.entries(a).find((function(t){return t[0]===e.name}));if(t){var n=S(t[1],e.type);i.push(n)}})),u=Object(v.a)({from:D||""},I?{gasPrice:I}:null),O(vt.f.AWAITING_CONFIRM),e.next=15,A(n,o,i,u);case 15:O(vt.f.FULFILLED),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),d(e.t0),O(vt.f.REJECTED);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}return Object(ue.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[t&&t.map((function(e){return Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:e.name}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(e.name),"aria-invalid":F[e.name]?"true":"false",name:e.name,placeholder:e.type,type:"text",onChange:function(){return B(e.name[0],M()[e.name])},ref:G({validate:function(t){return""===t?ft.a.REQUIRED:!!k(t,e.type)||T(e.type)}}),disabled:Q}),Object(ue.jsx)(Et,{error:Object(f.f)(e.name,F),id:"error-".concat(e.name)})]})]},e.name)})),Object(ue.jsx)("button",{className:"button",disabled:Q||X,onClick:function(){Q||(H?function(e){Z.apply(this,arguments)}(M()):U())},type:"submit",children:K?Object(ue.jsx)(At.a,{}):q?"Done":"Submit"}),V&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while submitting the adapter configuration.",error:V})}),Object(ue.jsxs)("div",{className:"adapter-extension__remove",children:[Object(ue.jsxs)("p",{children:["Delete this ",Y,". Once you delete this"," ",Y,", it can be re-added if the DAO isn't finalized."]}),Object(ue.jsx)("button",{className:"button--secondary",disabled:X||Q,onClick:function(){return J?{}:function(){return $.apply(this,arguments)}()},children:z?Object(ue.jsx)(At.a,{}):J?"Done":"Remove"})]})]})}var It=n(146);function yt(e){var t=e.abiMethodName,n=e.adapterOrExtension,r=e.configurationInputs,a=e.isOpen,c=e.closeHandler;return Object(ue.jsx)(It.a,{keyProp:"adapter-extension-configuration",modalClassNames:"adapter-extension-configure-modal",isOpen:a,isOpenHandler:function(){c()},children:Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("span",{className:"modal__close-button",onClick:function(){c()},children:Object(ue.jsx)(Fe.a,{})}),Object(ue.jsx)("h1",{children:null===n||void 0===n?void 0:n.name.toUpperCase()}),Object(ue.jsx)("p",{children:null===n||void 0===n?void 0:n.description}),Object(ue.jsx)(wt,{abiConfigurationInputs:r,abiMethodName:t,adapterOrExtension:n,closeHandler:c})]})})}var Ct,Dt=["size"];function _t(e){var t=e.size,n=Object(x.a)(e,Dt);return Object(ue.jsxs)(oe.Fragment,{children:[Object(ue.jsx)("input",Object(v.a)(Object(v.a)({},n),{},{"aria-checked":n.checked,checked:n.checked,className:"checkbox-input ".concat(n.className||""," "),id:n.id,name:n.name,onChange:n.onChange,type:"checkbox"})),Object(ue.jsxs)("label",{className:"checkbox-label",htmlFor:n.id,children:[Object(ue.jsx)("span",{className:"checkbox-box ".concat(t||Ct.SMALL)}),Object(ue.jsx)("span",{className:"checkbox-text",children:n.label})]})]})}!function(e){e.LARGE="large",e.SMALL="small"}(Ct||(Ct={}));var kt=n(60),Tt=n(61),St=n(69),Rt=n(49);function Pt(e){var t=e.isOpen,n=e.closeHandler,r=Object(oe.useState)(),a=Object(xe.a)(r,2),s=a[0],o=a[1],i=Object(c.c)((function(e){return e.contracts})).DaoRegistryContract,u=Object(Ne.a)(),d=u.txError,l=u.txEtherscanURL,b=u.txIsPromptOpen,j=u.txSend,O=u.txStatus,p=Object(Ne.b)().fast,h=Object(pt.c)().dao,m=Object(Ne.f)(),x=m.connected,N=m.account,g=x&&N,E=O===vt.f.AWAITING_CONFIRM||O===vt.f.PENDING,A=O===vt.f.FULFILLED,w=E||A||b,I=s||d;function y(){return(y=Object(We.a)(Ve.a.mark((function e(){var t;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(i){e.next=5;break}throw new Error("No DAO Registry contract was found.");case 5:return t=Object(v.a)({from:N||""},p?{gasPrice:p}:null),e.next=9,j("finalizeDao",i.instance.methods,[],t);case 9:n&&setTimeout((function(){n()}),3e3),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),o(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(ue.jsx)(It.a,{keyProp:"adapter-extension-finalize",isOpen:t,isOpenHandler:function(){n()},children:Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("span",{className:"modal__close-button",onClick:function(){n()},children:Object(ue.jsx)(Fe.a,{})}),Object(ue.jsx)("h1",{children:"Finalize"}),Object(ue.jsxs)("h2",{children:[h&&h.name," ",Object(ue.jsx)("small",{children:h&&Object(f.k)(h.daoAddress,7)})]}),Object(ue.jsx)("p",{children:"After your DAO is finalized you will need to submit a proposal to make changes."}),Object(ue.jsx)("button",{className:"button",disabled:w,onClick:function(){w||function(){y.apply(this,arguments)}()},type:"submit",children:E?Object(ue.jsx)(At.a,{}):A?"Done":"Submit"}),w&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){switch(O){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Awaiting your confirmation",Object(ue.jsx)(Tt.a,{})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:l,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Finalized!"}),Object(ue.jsx)(Rt.a,{url:l})]});default:return null}}()}),I&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while trying to finalize the DAO.",error:I})})]})})}var Ft,Lt=["children"],Mt=function(e){var t=e.children,n=Object(x.a)(e,Lt);return Object(ue.jsx)("div",Object(v.a)(Object(v.a)({style:{position:"relative"}},n),{},{children:t}))};function Bt(){var e=Object(c.c)((function(e){return e.contracts})),t=e.DaoRegistryContract,n=e.DaoFactoryContract,r=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),a=Object(oe.useState)(""),s=Object(xe.a)(a,2),o=s[0],i=s[1],u=Object(oe.useState)(),d=Object(xe.a)(u,2),l=d[0],b=d[1],O=Object(oe.useState)(),p=Object(xe.a)(O,2),h=p[0],m=p[1],x=Object(oe.useState)(),N=Object(xe.a)(x,2),g=N[0],E=N[1],A=Object(oe.useState)(),w=Object(xe.a)(A,2),I=w[0],y=w[1],C=Object(oe.useState)(!1),D=Object(xe.a)(C,2),_=D[0],k=D[1],T=Object(oe.useState)(!1),S=Object(xe.a)(T,2),R=S[0],P=S[1],F=Object(oe.useState)(!1),L=Object(xe.a)(F,2),M=L[0],B=L[1],G=Object(oe.useState)(0),U=Object(xe.a)(G,2),V=U[0],W=U[1],Y=Object(oe.useState)(),H=Object(xe.a)(Y,2),K=H[0],z=H[1],q=Object(oe.useState)(),J=Object(xe.a)(q,2),Q=J[0],X=J[1],$=Object(oe.useState)(),Z=Object(xe.a)($,2),ee=Z[0],te=Z[1],ne=Object(oe.useState)(),re=Object(xe.a)(ne,2),ae=re[0],ce=re[1],se=Object(Ne.d)().defaultChainError,ie=Object(Ne.f)(),de=ie.connected,le=ie.account,be=ie.web3Instance,je=Object(pt.c)(),fe=je.dao,Oe=je.gqlError,pe=bt(),he=pe.adapterExtensionStatus,me=pe.getAdapterOrExtensionFromRedux,ve=pe.registeredAdaptersOrExtensions,Ee=pe.unRegisteredAdaptersOrExtensions,Ae=function(){var e=Object(c.b)();function t(){return(t=Object(We.a)(Ve.a.mark((function t(n,r){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next=t.t0===rt.a.CONFIGURATION?3:t.t0===rt.a.FINANCING?6:t.t0===rt.a.GUILDKICK?9:t.t0===rt.a.MANAGING?12:t.t0===rt.a.RAGEQUIT?15:t.t0===rt.a.BANK?18:t.t0===rt.b.NFT?21:t.t0===rt.a.ONBOARDING?24:t.t0===rt.a.TRIBUTE?27:t.t0===rt.a.DISTRIBUTE?30:t.t0===rt.a.VOTING?33:t.t0===rt.a.COUPON_ONBOARDING?36:t.t0===rt.a.TRIBUTE_NFT?39:t.t0===rt.a.NFT?42:t.t0===rt.a.DAO_REGISTRY?45:t.t0===rt.b.ERC20?48:51;break;case 3:return t.next=5,e(Object(j.E)(r));case 5:return t.abrupt("break",51);case 6:return t.next=8,e(Object(j.L)(r));case 8:return t.abrupt("break",51);case 9:return t.next=11,e(Object(j.M)(r));case 11:return t.abrupt("break",51);case 12:return t.next=14,e(Object(j.N)(r));case 14:return t.abrupt("break",51);case 15:return t.next=17,e(Object(j.R)(r));case 17:return t.abrupt("break",51);case 18:return t.next=20,e(Object(j.B)(r));case 20:return t.abrupt("break",51);case 21:return t.next=23,e(Object(j.P)(r));case 23:return t.abrupt("break",51);case 24:return t.next=26,e(Object(j.Q)(r));case 26:return t.abrupt("break",51);case 27:return t.next=29,e(Object(j.S)(r));case 29:return t.abrupt("break",51);case 30:return t.next=32,e(Object(j.J)(r));case 32:return t.abrupt("break",51);case 33:return t.next=35,e(Object(j.U)(r));case 35:return t.abrupt("break",51);case 36:return t.next=38,e(Object(j.F)(r));case 38:return t.abrupt("break",51);case 39:return t.next=41,e(Object(j.T)(r));case 41:return t.abrupt("break",51);case 42:return t.next=44,e(Object(j.O)(r));case 44:return t.abrupt("break",51);case 45:return t.next=47,e(Object(j.I)(r));case 47:return t.abrupt("break",51);case 48:return t.next=50,e(Object(j.K)(r));case 50:return t.abrupt("break",51);case 51:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{initAdapterExtensionContract:function(e,n){return t.apply(this,arguments)}}}().initAdapterExtensionContract,we=Object(Ne.a)().txSend,Ie=Object(Ne.b)().fast,ye=Object(pt.f)(),Ce=ye.isDisabled,De=ye.openWhyDisabledModal,_e=ye.setOtherDisabledReasons,ke=ye.WhyDisabledModal,Te=de&&le,Se=fe,Re=l===dt.a.READY,Pe=he===ge.a.REJECTED&&void 0===ve&&void 0===Ee,Fe=he===ge.a.PENDING,Le=0===(null===Ee||void 0===Ee?void 0:Ee.length),Me=Object(oe.useCallback)((function(){return Be.apply(this,arguments)}),[t,null===fe||void 0===fe?void 0:fe.name,_e]);function Be(){return(Be=Object(We.a)(Ve.a.mark((function e(){var n,r;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n="".concat(null===fe||void 0===fe?void 0:fe.name," is already finalized"),e.next=6,Object(dt.g)(t.instance);case 6:r=e.sent,b(r),r===dt.a.READY&&_e([n]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),b(void 0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function Ge(e){new Promise((function(t,n){try{t(me(e.name).contractAddress)}catch(a){var r=e.contractAddress;r?t(r):n(a)}})).then((function(t){Ye(t,e.name,"ADAPTER")})).catch((function(t){console.warn('Dao adapter contract not found, try adding the default "'.concat(e.name,'" contract'))}))}function Ue(e){new Promise((function(t,n){try{t(me(e.name).contractAddress)}catch(a){var r=e.contractAddress;r?t(r):n(a)}})).then((function(t){Ye(t,e.name,"EXTENSION")})).catch((function(t){console.warn('Dao extension contract not found, try adding the default "'.concat(e.name,'" contract'),t)}))}function Ye(e,t,n){return He.apply(this,arguments)}function He(){return(He=Object(We.a)(Ve.a.mark((function e(n,r,a){var c,s,o,i,u,d,l;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(void 0),t){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(be){e.next=5;break}throw new Error("No Web3 instance was found.");case 5:if(e.prev=5,te((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(nt.a)({},r,!0))})),n){e.next=9;break}throw new Error("".concat(a," address must not be empty"));case 9:return c=st(r),s=ot(r),o=s.acl,i="ADAPTER"===a?[c,n,o,[],[]]:[c,n,le],u=Object(v.a)({from:le||""},Ie?{gasPrice:Ie}:null),d="ADAPTER"===a?"replaceAdapter":"addExtension",e.next=16,we(d,t.instance.methods,i,u);case 16:te((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(nt.a)({},r,!1))})),m((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(nt.a)({},r,!0))})),Ae(r,be),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(5),te((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(nt.a)({},r,!1))})),l=new Error(e.t0&&4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?e.t0.message:"Unable to add ".concat(r," ").concat(a,"; ").concat(e.t0)),y(l);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})))).apply(this,arguments)}function Ke(){return(Ke=Object(We.a)(Ve.a.mark((function e(){var t,r,a,c,s,o,i,u,d;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(void 0),n){e.next=3;break}throw new Error("DaoFactoryContract not found");case 3:if(be){e.next=5;break}throw new Error("No Web3 instance was found.");case 5:for(a in e.prev=5,t=[],r=function(e){if(K[e]){var n=ut.filter((function(t){return t.name===e}))[0],r=n.adapterId,a=n.contractAddress;if(!a){var c=me(e);a=null===c||void 0===c?void 0:c.contractAddress}var s=ot(e).acl;r&&a&&(t.push([r,a,s]),te((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(nt.a)({},e,!0))})))}},K)r(a);return c=[null===fe||void 0===fe?void 0:fe.daoAddress,t],s=Object(v.a)({from:le||""},Ie?{gasPrice:Ie}:null),e.next=13,we("addAdapters",n.instance.methods,c,s);case 13:for(o in K)K[o]&&o&&Ae(o,be);e.next=23;break;case 16:for(d in e.prev=16,e.t0=e.catch(5),i=new Error(e.t0&&4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?e.t0.message:"Unable to add adapters; ".concat(e.t0)),y(i),qe(!1),u=function(e){te((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(nt.a)({},e,!1))}))},K)u(d);case 23:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}function ze(){return(ze=Object(We.a)(Ve.a.mark((function e(t){var n,r,a,c,s,o;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(void 0),e.prev=1,n=t.abiFunctionName,r=t.name,n){e.next=5;break}throw new Error("ABI function not found for ".concat(r));case 5:a=me(r),c=a.abi,s=c.filter((function(e){return e.name===n}))[0].inputs,i(n),X(t),E(s),k(!0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=new Error(e.t0&&4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?e.t0.message:"".concat(t.name," contract not found")),y(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function qe(e){B(e);var t=function(t){z((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(nt.a)({},t,e))}))};for(var n in K)t(n)}return Object(oe.useEffect)((function(){Me()}),[Me,t]),Object(oe.useEffect)((function(){B(!1),Ee&&Ee&&(null===Ee||void 0===Ee||Ee.forEach((function(e){!(null===e||void 0===e?void 0:e.options)&&!e.isExtension&&z((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(nt.a)({},e.name,!1))}))})))}),[Ce,Ee]),Object(oe.useEffect)((function(){K&&W(Object.values(K).filter((function(e){return!0===e})).length)}),[K]),Te&&r&&!se?Object(ue.jsx)(Gt,{children:Object(ue.jsxs)("div",{className:"adaptermanager",children:[!fe&&Oe?(window.scrollTo({top:0,left:200,behavior:"smooth"}),Object(ue.jsx)(Nt.a,{error:Oe,renderText:"Something went wrong"})):fe?Object(ue.jsxs)("h3",{children:[fe.name," ",Object(ue.jsx)("small",{children:Object(f.k)(fe.daoAddress,7)})]}):void 0,I?(window.scrollTo({top:0,left:200,behavior:"smooth"}),Object(ue.jsx)(Nt.a,{error:I,renderText:"Something went wrong"})):Object(ue.jsx)(ue.Fragment,{}),Object(ue.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."}),Object(ue.jsxs)("div",{className:"adapter-extension__selection",children:[Object(ue.jsx)("div",{children:Object(ue.jsx)(_t,{"data-testid":"selectall",role:"checkbox",id:"selectall",label:"".concat(V," selected"),checked:!0===M,disabled:Ce||Pe||Le||!Se,name:"selectall",size:Ct.LARGE,onChange:function(e){qe(e.target.checked)}})}),Object(ue.jsx)("div",{children:Object(ue.jsx)("button",{className:"button--secondary",disabled:0===V||Ce,onClick:function(){return Ke.apply(this,arguments)},children:"Add selected"})})]}),Fe&&Object(ue.jsx)("div",{className:"adapter-extension__loader",children:Object(ue.jsx)(At.a,{text:"Loading data from subgraph..."})}),Pe&&Object(ue.jsx)("p",{children:"No adapters/extensions available"}),Se&&Ee&&(null===Ee||void 0===Ee?void 0:Ee.length)>0&&Ee.map((function(e,t){return Object(ue.jsx)("div",{className:"adapter-extension__grid unregistered",children:(null===e||void 0===e?void 0:e.options)?Object(ue.jsx)(ht,{adapterOrExtension:e,renderCheckboxAction:function(t){var n=t.selectedTargetOption;return Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsx)("div",{className:"adapter-extension__checkbox",children:Object(ue.jsx)(_t,{id:n||"empty",label:"",checked:n&&K&&!0===K[n]||!1,disabled:Ce||null===n||(null===e||void 0===e?void 0:e.isExtension),name:n||"",size:Ct.LARGE,onChange:function(e){n&&function(e){var t=e.event,n=e.selectedTargetOption;z((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(nt.a)({},n,t.target.checked))}))}({event:e,selectedTargetOption:n})}})})})},renderActions:function(e){var t=e.selectedTargetOption,n=e.selectedTargetOptionProps;return Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsx)("div",{className:"adapter-extension__add",children:Object(ue.jsx)("button",{className:"button--secondary",disabled:null===t||ee&&ee[n.name]||Ce,onClick:function(){return(null===n||void 0===n?void 0:n.isExtension)?Ue(n):Ge(n)},children:ee&&ee[n.name]?Object(ue.jsx)(At.a,{}):h&&h[n.name]?"Done":"Add"})})})}}):Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{className:"adapter-extension__inner-wrapper ",children:[Object(ue.jsx)("div",{className:"adapter-extension__checkbox",children:!(null===e||void 0===e?void 0:e.isExtension)&&Object(ue.jsx)(_t,{id:e.name,label:"",checked:K&&!0===K[e.name]||!1,disabled:Ce,name:e.name,size:Ct.LARGE,onChange:function(t){z((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(nt.a)({},e.name,t.target.checked))}))}})}),Object(ue.jsxs)("div",{className:"adapter-extension__info",children:[Object(ue.jsxs)("span",{className:"adapter-extension__name",children:[e.name," ",(null===e||void 0===e?void 0:e.isExtension)&&"(EXTENSION)"]}),Object(ue.jsx)("span",{className:"adapter-extension__desc",children:e.description})]})]}),Object(ue.jsx)("div",{className:"adapter-extension__add",children:Object(ue.jsx)("button",{className:"button--secondary",disabled:ee&&ee[e.name]||h&&h[e.name]||Ce,onClick:function(){return(null===e||void 0===e?void 0:e.isExtension)?Ue(e):Ge(e)},children:ee&&ee[e.name]?Object(ue.jsx)(At.a,{}):h&&h[e.name]?"Done":"Add"})})]})},t)})),Se&&ve&&(null===ve||void 0===ve?void 0:ve.length)>0&&ve.map((function(e,t){return Object(ue.jsxs)("div",{className:"adapter-extension__grid registered",children:[Object(ue.jsxs)("div",{className:"adapter-extension__info",children:[Object(ue.jsxs)("span",{className:"adapter-extension__name",children:[e.name," ",(null===e||void 0===e?void 0:e.isExtension)&&"(EXTENSION)"]}),Object(ue.jsx)("span",{className:"adapter-extension__desc",children:e.description})]}),Object(ue.jsx)("div",{className:"adapter-extension__configure",children:Object(ue.jsx)("button",{className:"button--secondary",disabled:Ce||(null===e||void 0===e?void 0:e.isExtension),onClick:function(){return function(e){return ze.apply(this,arguments)}(e)},children:"Configure"})})]},"".concat(e.id,"-").concat(t))})),Ce&&Object(ue.jsx)("div",{children:Object(ue.jsx)("button",{className:"button--help",onClick:function(){De(),ce(Ft.CONFIGURATION_REASON)},children:Ft.CONFIGURATION_REASON})}),Object(ue.jsxs)("div",{className:"adapter-adapter-extension__finalize",children:[Object(ue.jsx)("p",{children:"If you're happy with your setup, you can finalize your DAO. After your DAO is finalized you will need to submit a proposal to make changes."}),Object(ue.jsx)("div",{children:Object(ue.jsx)("button",{"data-testid":"finalizedao",className:"button--secondary finalize",disabled:Pe||!Se||Re,onClick:function(){return P(!0)},children:"Finalize Dao"})}),Ce&&Object(ue.jsx)("div",{children:Object(ue.jsx)("button",{className:"button--help",onClick:function(){De(),ce(Ft.FINALIZED_REASON)},children:Ft.FINALIZED_REASON})}),Object(ue.jsx)(ke,{title:ae})]}),_&&Object(ue.jsx)(yt,{abiMethodName:o,adapterOrExtension:Q,configurationInputs:g,isOpen:_,closeHandler:function(){k(!1)}}),R&&Object(ue.jsx)(Pt,{isOpen:R,closeHandler:function(){P(!1),Me()}})]})}):Object(ue.jsx)(Gt,{children:Object(ue.jsx)("div",{className:"adapter-extension__unauthorized-message",children:Object(ue.jsx)("p",{children:Te?se?se.message:r?void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to manage the DAO adapters and extensions."})})})}function Gt(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Adapter/Extension Manager"})}),e.children]})})}!function(e){e.FINALIZED_REASON="Why is finalizing disabled?",e.CONFIGURATION_REASON="Why are configurations disabled?"}(Ft||(Ft={}));var Ut,Vt=n(21),Wt=n(37),Yt=n(42),Ht=n(207);function Kt(e){var t=e.value;return t?Object(ue.jsxs)("details",{children:[Object(ue.jsx)("summary",{style:{cursor:"pointer",outline:"none"},children:Object(ue.jsx)("small",{children:"Preview Markdown"})}),Object(ue.jsx)("div",{style:{marginTop:"1em"},children:Object(ue.jsx)(Ht.a,{children:t})})]}):null}function zt(){var e=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),t=Object(oe.useState)(),n=Object(xe.a)(t,2),r=n[0],a=n[1],s=Object(Ne.f)(),o=s.connected,i=s.account,u=Object(Yt.h)(),d=u.proposalSignAndSendStatus,l=u.signAndSendProposal,b=Object(Ne.d)().defaultChainError,j=Object(mt.a)({mode:"onBlur",reValidateMode:"onChange"}),O=Object(se.f)(),p=j.errors,h=j.getValues,m=j.register,v=j.trigger,x=j.watch,N=o&&i,g=d===vt.f.AWAITING_CONFIRM||d===vt.f.PENDING,E=d===vt.f.FULFILLED,A=g||E;function w(e){return I.apply(this,arguments)}function I(){return(I=Object(We.a)(Ve.a.mark((function e(t){var n,r;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({partialProposalData:{name:t.title,body:t.description,metadata:{type:Wt.d.Governance}},type:Vt.SnapshotType.proposal});case 3:n=e.sent,r=n.uniqueId,O.push("/governance/".concat(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return N&&e&&!b?Object(ue.jsx)(qt,{children:Object(ue.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",htmlFor:Ut.title,children:"Title"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(Ut.title),"aria-invalid":p.title?"true":"false",id:Ut.title,name:Ut.title,ref:m({required:ft.a.REQUIRED}),type:"text",disabled:A}),Object(ue.jsx)(Et,{error:Object(f.f)(Ut.title,p),id:"error-".concat(Ut.title)})]})]}),Object(ue.jsxs)("div",{className:"form__textarea-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",htmlFor:Ut.description,children:"Description"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("textarea",{"aria-describedby":"error-".concat(Ut.description),"aria-invalid":p.description?"true":"false",id:Ut.description,name:Ut.description,placeholder:"Say something about your governance proposal...",ref:m({required:ft.a.REQUIRED}),disabled:A}),Object(ue.jsx)(Et,{error:Object(f.f)(Ut.description,p),id:"error-".concat(Ut.description)}),Object(ue.jsx)(Kt,{value:x(Ut.description)})]})]}),Object(ue.jsx)("button",{"aria-label":g?"Submitting your proposal...":"",className:"button",disabled:A,onClick:Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:w(h());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:g?Object(ue.jsx)(At.a,{}):E?"Done":"Submit"}),A&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){switch(d){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Awaiting your confirmation",Object(ue.jsx)(Tt.a,{intervalMs:500})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:["Submitting",Object(ue.jsx)(Tt.a,{intervalMs:500})]});case vt.f.FULFILLED:return"Done!";default:return""}}()}),r&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while submitting the proposal.",error:r})})]})}):Object(ue.jsx)(qt,{children:Object(ue.jsx)("div",{className:"form__description--unauthorized",children:Object(ue.jsx)("p",{children:N?b?b.message:e?void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to submit a governance proposal."})})})}function qt(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Governance Proposal"})}),Object(ue.jsxs)("div",{className:"form-wrapper",children:[Object(ue.jsx)("div",{className:"form__description",children:Object(ue.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."})}),e.children]})]})})}!function(e){e.title="title",e.description="description"}(Ut||(Ut={}));var Jt,Qt=n(25),Xt=n(81);function $t(){var e=Object(Ne.d)().defaultChainError,t=Object(Ne.f)(),n=t.connected,r=t.account,a=t.web3Instance,c=Object(Yt.h)(),s=c.proposalData,o=c.proposalSignAndSendError,i=c.proposalSignAndSendStatus,u=c.signAndSendProposal,d=Object(mt.a)({mode:"onBlur",reValidateMode:"onChange"}),l=Object(se.f)(),j=Object(oe.useState)(),O=Object(xe.a)(j,2),p=O[0],h=O[1],m=Object(oe.useState)(),v=Object(xe.a)(m,2),x=v[0],N=v[1],g=d.errors,E=d.getValues,A=d.setValue,w=d.register,I=d.trigger,y=(0,d.watch)(Jt.ethAddress),C=p||o,D=n&&r,_=i===vt.f.AWAITING_CONFIRM||i===vt.f.PENDING,k=i===vt.f.FULFILLED,T=_||k,S=Object(Yt.a)(y),R=S.checkApplicantError,P=S.checkApplicantInvalidMsg,F=S.checkApplicantStatus,L=S.isApplicantValid,M=Object(oe.useCallback)((function(){return B.apply(this,arguments)}),[r,a]);function B(){return(B=Object(We.a)(Ve.a.mark((function e(){var t;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&r){e.next=3;break}return N(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,a.eth.getBalance(r);case 6:t=e.sent,N(a.utils.fromWei(t,"ether")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),N(void 0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function G(e){return U.apply(this,arguments)}function U(){return(U=Object(We.a)(Ve.a.mark((function e(t){var n,a,c,o,i,d,j,O,p,m,v;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,D){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(r){e.next=5;break}throw new Error("No account found.");case 5:if(R&&console.warn("Error checking if the applicant address is valid: ".concat(R.message)),F!==ge.a.FULFILLED||L||!P){e.next=8;break}throw new Error(P);case 8:if(n=(null===s||void 0===s?void 0:s.uniqueId)||"",a=t.ethAddress,c=t.ethAmount,o=Object(Qt.toChecksumAddress)(a),i=Object(Qt.toWei)(Object(f.j)(c),"ether"),d=Object(Qt.toChecksumAddress)(r),j={tributeAmount:c,tributeAmountUnit:"ETH"},O=[o,b.H,i],n){e.next=22;break}return p=Object(f.h)(a)===Object(f.h)(r)?"Membership for ".concat(Object(f.k)(o,7),"."):"Membership proposal from ".concat(Object(f.k)(d,7)," for applicant ").concat(Object(f.k)(o,7),"."),e.next=19,u({partialProposalData:{name:o,body:p,metadata:{proposalAmountValues:j,submitActionArgs:O,accountAuthorizedToProcessPassedProposal:d}},adapterName:vt.a.onboarding,type:Vt.SnapshotType.draft});case 19:m=e.sent,v=m.uniqueId,n=v;case 22:l.push("/membership/".concat(n)),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),h(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){M()}),[M]),Object(oe.useEffect)((function(){A(Jt.ethAddress,r)}),[r,A]),!D||e?Object(ue.jsx)(Zt,{children:Object(ue.jsx)("div",{className:"form__description--unauthorized",children:Object(ue.jsx)("p",{children:D?e?e.message:void 0:"Connect your wallet to submit a membership proposal."})})}):Object(ue.jsx)(Zt,{children:Object(ue.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",htmlFor:Jt.ethAddress,children:"Applicant Address"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(Jt.ethAddress),"aria-invalid":g.ethAddress?"true":"false",id:Jt.ethAddress,name:Jt.ethAddress,ref:w({validate:function(e){return e?!!Object(Xt.a)(e)||ft.a.INVALID_ETHEREUM_ADDRESS:ft.a.REQUIRED}}),type:"text",disabled:T}),Object(ue.jsx)(Et,{error:Object(f.f)(Jt.ethAddress,g),id:"error-".concat(Jt.ethAddress)})]})]}),Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",htmlFor:Jt.ethAmount,children:"Amount"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ue.jsxs)("div",{className:"input__suffix-wrap",children:[Object(ue.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Jt.ethAmount),"aria-invalid":g.ethAmount?"true":"false",id:Jt.ethAmount,name:Jt.ethAmount,onChange:function(){return A(Jt.ethAmount,Object(f.e)(E().ethAmount))},ref:w({validate:function(e){var t=Number(Object(f.j)(e));return""===e?ft.a.REQUIRED:isNaN(t)?ft.a.INVALID_NUMBER:t<=0?"The value must be greater than 0 ETH.":!(t>=Number(x))||"Insufficient funds."}}),type:"text",disabled:T}),Object(ue.jsx)("div",{className:"input__suffix-item",children:"ETH"})]}),Object(ue.jsx)(Et,{error:Object(f.f)(Jt.ethAmount,g),id:"error-".concat(Jt.ethAmount)})]}),Object(ue.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(ue.jsx)("span",{children:x?Number.isInteger(Number(x))?x:Object(f.d)(Number(x)):"---"})]})]}),Object(ue.jsx)("button",{"aria-label":_?"Submitting your proposal.":"",className:"button",disabled:T,onClick:Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(E());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:_?Object(ue.jsx)(At.a,{}):k?"Done":"Submit"}),T&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){switch(i){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Awaiting your confirmation",Object(ue.jsx)(Tt.a,{intervalMs:500})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:["Submitting",Object(ue.jsx)(Tt.a,{intervalMs:500})]});case vt.f.FULFILLED:return"Done!";default:return""}}()}),C&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while submitting the proposal.",error:C})})]})})}function Zt(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Join"})}),Object(ue.jsxs)("div",{className:"form-wrapper",children:[Object(ue.jsx)("div",{className:"form__description",children:Object(ue.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."})}),e.children]})]})})}!function(e){e.ethAddress="ethAddress",e.ethAmount="ethAmount"}(Jt||(Jt={}));var en,tn,nn=n(444);function rn(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),t=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DaoRegistryContract})),n=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.BankExtensionContract})),a=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),s=Object(Ne.d)().defaultChainError,o=Object(Ne.f)(),i=o.connected,u=o.account,d=o.web3Instance,l=Object(Ne.b)().fast,j=Object(Ne.a)(),O=j.txError,p=j.txEtherscanURL,h=j.txIsPromptOpen,m=j.txSend,x=j.txStatus,N=Object(Yt.h)(),g=N.proposalData,E=N.proposalSignAndSendStatus,A=N.signAndSendProposal,w=Object(mt.a)({mode:"onBlur",reValidateMode:"onChange"}),I=Object(se.f)(),y=Object(oe.useState)(),C=Object(xe.a)(y,2),D=C[0],_=C[1],k=Object(oe.useState)(),T=Object(xe.a)(k,2),S=T[0],R=T[1],P=Object(oe.useState)(),F=Object(xe.a)(P,2),L=F[0],M=F[1],B=w.errors,G=w.getValues,U=w.setValue,V=w.register,W=w.trigger,Y=w.watch,H="all members"===Y("type"),K=Y("selectedToken"),z=D||O,q=i&&u,J=nn,Q=x===vt.f.AWAITING_CONFIRM||x===vt.f.PENDING||E===vt.f.AWAITING_CONFIRM||E===vt.f.PENDING,X=x===vt.f.FULFILLED&&E===vt.f.FULFILLED,$=Q||X||h,Z=Object(oe.useCallback)((function(){return te.apply(this,arguments)}),[n,u,J,d]),ee=Object(oe.useCallback)((function(){return ne.apply(this,arguments)}),[u,K]);function te(){return(te=Object(We.a)(Ve.a.mark((function e(){var t,a,c,s,o,i,l,j,f,O,p,h,m,x,N,g,E,A,w,I,y,C,D,_,k,T,S;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&n&&d){e.next=3;break}return R(void 0),e.abrupt("return");case 3:return e.prev=3,t=n.abi,a=n.contractAddress,c=n.instance.methods,e.next=7,c.nbTokens().call();case 7:if(s=e.sent,!(Number(s)<1)){e.next=12;break}R([]),e.next=44;break;case 12:return o=[],i=t.find((function(e){return"getToken"===e.name})),l=Object(r.a)(Array(Number(s)).keys()).map((function(e){return[a,i,[e.toString()]]})),e.next=17,Object(dt.j)({calls:l,web3Instance:d});case 17:return j=e.sent,f=t.find((function(e){return"balanceOf"===e.name})),O=j.map((function(e){return[a,f,[b.u,e]]})),e.next=22,Object(dt.j)({calls:O,web3Instance:d});case 22:if(p=e.sent,h=j.map((function(e,t){return{address:e,daoBalance:p[t]}})).filter((function(e){return Object(Qt.toBN)(e.daoBalance).gt(Object(Qt.toBN)(0))})),(m=h.find((function(e){return e.address===b.p})))&&o.push(Object(v.a)(Object(v.a)({},m),{},{name:"Ether",symbol:"ETH",decimals:18})),!((x=h.filter((function(e){return e.address!==b.p}))).length>0)){e.next=43;break}return N=J.find((function(e){return"name"===e.name})),g=x.map((function(e){return[e.address,N,[]]})),E=J.find((function(e){return"symbol"===e.name})),A=x.map((function(e){return[e.address,E,[]]})),w=J.find((function(e){return"decimals"===e.name})),I=x.map((function(e){return[e.address,w,[]]})),y=[].concat(Object(r.a)(g),Object(r.a)(A),Object(r.a)(I)),e.next=37,Object(dt.j)({calls:y,web3Instance:d});case 37:for(C=e.sent,D=[];C.length;)D.push(C.splice(0,x.length));_=D[0],k=D[1],T=D[2],S=x.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{name:_[t],symbol:k[t],decimals:T[t]})})).sort((function(e,t){return e.name.localeCompare(t.name)})),o=[].concat(Object(r.a)(o),Object(r.a)(S));case 43:R(o);case 44:e.next=50;break;case 46:e.prev=46,e.t0=e.catch(3),console.error(e.t0),R(void 0);case 50:case"end":return e.stop()}}),e,null,[[3,46]])})))).apply(this,arguments)}function ne(){return(ne=Object(We.a)(Ve.a.mark((function e(){var t,n,r,a,c,s,o,i;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&K){e.next=3;break}return M(void 0),e.abrupt("return");case 3:try{t=JSON.parse(K),n=t.daoBalance,r=Object(Qt.toBN)(n),a=t.decimals,c=Object(Qt.toBN)(10).pow(Object(Qt.toBN)(a)),s=r.div(c),o=r.mod(c),i=o.eq(Object(Qt.toBN)(0))?s.toString():"".concat(s.toString(),".").concat(o.toString()),M(i)}catch(d){console.error(d),M(void 0)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(We.a)(Ve.a.mark((function n(r){var a,c,s,o,i,j,O,p,h,x,N,E,w,y,C,D,k,T,S,R,P,F,L,M,B,G,U,V;return Ve.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,q){n.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(e){n.next=5;break}throw new Error("No DistributeContract found.");case 5:if(t){n.next=7;break}throw new Error("No DaoRegistryContract found.");case 7:if(u){n.next=9;break}throw new Error("No account found.");case 9:if(d){n.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(a=r.selectedToken,c=r.memberAddress,s=r.amount,o=r.notes,i=Object(Qt.toChecksumAddress)(c),j=JSON.parse(a),O=j.symbol,p=j.decimals,(h=j.address)===b.p?x=Object(Qt.toWei)(Object(f.j)(s),"ether"):(N=Object(Qt.toBN)(10).pow(Object(Qt.toBN)(p)),E=Object(Qt.toBN)(Object(f.j)(s)).mul(N),x=E.toString()),w=(null===g||void 0===g?void 0:g.uniqueId)||"",y=null===g||void 0===g?void 0:g.data,C=(null===g||void 0===g?void 0:g.signature)||"",D=H?"Transfer to all members pro rata.":"Transfer to ".concat(Object(f.k)(i,7),"."),k={transferAmount:s,transferAmountUnit:O},w){n.next=34;break}return T=o?"".concat(D,"\n").concat(o):D,S=H?"All members":i,R=Math.floor(Date.now()/1e3),n.next=27,A({partialProposalData:{name:S,body:T,metadata:{proposalAmountValues:k,isTypeAllMembers:H},timestamp:R.toString()},adapterName:vt.a.distribute,type:Vt.SnapshotType.proposal});case 27:P=n.sent,F=P.uniqueId,L=P.data,M=P.signature,w=F,y=L,C=M;case 34:return B=H?xt.a:i,G=y?Object(Vt.prepareVoteProposalData)({payload:{name:y.payload.name,body:y.payload.body,choices:y.payload.choices,snapshot:y.payload.snapshot.toString(),start:y.payload.start,end:y.payload.end},sig:C,space:y.space,timestamp:parseInt(y.timestamp)},d):"",U=[t.contractAddress,w,B,h,x,G],V=Object(v.a)({from:u||""},l?{gasPrice:l}:null),n.next=40,m("submitProposal",e.instance.methods,U,V);case 40:I.push("/transfers/".concat(w)),n.next=46;break;case 43:n.prev=43,n.t0=n.catch(0),_(n.t0);case 46:case"end":return n.stop()}}),n,null,[[0,43]])})))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(We.a)(Ve.a.mark((function e(t){var r;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.error("No BankExtensionContract found."),e.abrupt("return",!1);case 3:return e.next=5,n.instance.methods.balanceOf(t,b.H).call();case 5:return r=e.sent,e.abrupt("return",Object(Qt.toBN)(r).gt(Object(Qt.toBN)(0)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(oe.useEffect)((function(){Z()}),[Z]),Object(oe.useEffect)((function(){ee()}),[ee]),q&&!s&&a?Object(ue.jsx)(an,{children:Object(ue.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Type"}),Object(ue.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(ue.jsxs)("select",{name:en.type,ref:V,disabled:$,children:[Object(ue.jsx)("option",{value:"single member",children:"Single member"}),Object(ue.jsx)("option",{value:"all members",children:"All members"})]})})]}),!H&&Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Member Address"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(en.memberAddress),"aria-invalid":B.memberAddress?"true":"false",name:en.memberAddress,ref:V({validate:function(){var e=Object(We.a)(Ve.a.mark((function e(t){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}e.t0=ft.a.REQUIRED,e.next=17;break;case 4:if(Object(Xt.a)(t)){e.next=8;break}e.t1=ft.a.INVALID_ETHEREUM_ADDRESS,e.next=16;break;case 8:return e.next=10,ce(t);case 10:if(e.sent){e.next=14;break}e.t2="The address is not an active member with membership tokens.",e.next=15;break;case 14:e.t2=!0;case 15:e.t1=e.t2;case 16:e.t0=e.t1;case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),type:"text",disabled:$}),Object(ue.jsx)(Et,{error:Object(f.f)(en.memberAddress,B),id:"error-".concat(en.memberAddress)})]})]}),Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Asset"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsxs)("select",{"aria-describedby":"error-".concat(en.selectedToken),"aria-invalid":B.selectedToken?"true":"false",name:en.selectedToken,ref:V({validate:function(e){return!S||S.length<1?"No tokens available for distribution.":!!e||ft.a.REQUIRED}}),disabled:$,children:[Object(ue.jsx)("option",{value:"",children:"Select from DAO assets"}),null===S||void 0===S?void 0:S.map((function(e){return Object(ue.jsx)("option",{value:JSON.stringify(e),children:"".concat(e.name," (").concat(e.symbol,")")},e.address)}))]}),Object(ue.jsx)(Et,{error:Object(f.f)(en.selectedToken,B),id:"error-".concat(en.selectedToken)})]})]}),Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ue.jsxs)("div",{className:"input__suffix-wrap",children:[Object(ue.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(en.amount),"aria-invalid":B.amount?"true":"false",name:en.amount,onChange:function(){return U(en.amount,Object(f.e)(G().amount))},ref:V({validate:function(e){var t=Number(Object(f.j)(e)),n=K&&JSON.parse(K),r=(null===n||void 0===n?void 0:n.address)===b.p;return""===e?ft.a.REQUIRED:isNaN(t)?ft.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(L)?"Insufficient funds.":!!r||(!!Number.isInteger(t)||"The value must be an integer for an ERC20 token.")}}),type:"text",disabled:$}),Object(ue.jsx)("div",{className:"input__suffix-item",children:K&&JSON.parse(K).symbol||"___"})]}),Object(ue.jsx)(Et,{error:Object(f.f)(en.amount,B),id:"error-".concat(en.amount)}),Object(ue.jsx)("div",{className:"form__input-description",children:H?"If the proposal passes, this total amount will be distributed pro rata to all members' internal accounts, based on the current number of membership tokens held by each member.":"If the proposal passes, this amount will be distributed to the member's internal account."})]}),Object(ue.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(ue.jsx)("span",{children:L?Number.isInteger(Number(L))?L:Object(f.d)(Number(L)):"---"})]})]}),Object(ue.jsxs)("div",{className:"form__textarea-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Notes"}),Object(ue.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(ue.jsx)("textarea",{name:en.notes,placeholder:"Transactions purpose...",ref:V,disabled:$})})]}),Object(ue.jsx)("button",{className:"button",disabled:$,onClick:Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:re(G());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:Q?Object(ue.jsx)(At.a,{}):X?"Done":"Submit"}),$&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){if(x===vt.f.AWAITING_CONFIRM||E===vt.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(x){case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:p,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Proposal submitted!"}),Object(ue.jsx)(Rt.a,{url:p})]});default:return null}}()}),z&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while submitting the proposal.",error:z})})]})}):Object(ue.jsx)(an,{children:Object(ue.jsx)("div",{className:"form__description--unauthorized",children:Object(ue.jsx)("p",{children:q?s?s.message:a?void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to submit a transfer proposal."})})})}function an(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Transfer Proposal"})}),Object(ue.jsxs)("div",{className:"form-wrapper",children:[Object(ue.jsx)("div",{className:"form__description",children:Object(ue.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."})}),e.children]})]})})}function cn(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(Ne.d)().defaultChainError,r=Object(Ne.f)(),a=r.connected,s=r.account,o=r.web3Instance,i=Object(Yt.h)(),u=i.proposalData,d=i.proposalSignAndSendError,l=i.proposalSignAndSendStatus,j=i.signAndSendProposal,O=Object(mt.a)({mode:"onBlur",reValidateMode:"onChange"}),p=Object(se.f)(),h=Object(oe.useState)(),m=Object(xe.a)(h,2),v=m[0],x=m[1],N=Object(oe.useState)(),g=Object(xe.a)(N,2),E=g[0],A=g[1],w=Object(oe.useState)(),I=Object(xe.a)(w,2),y=I[0],C=I[1],D=Object(oe.useState)(),_=Object(xe.a)(D,2),k=_[0],T=_[1],S=O.errors,R=O.getValues,P=O.setValue,F=O.register,L=O.trigger,M=O.watch,B=M(tn.erc20Address),G=M(tn.applicantAddress),U=v||d,V=a&&s,W=l===vt.f.AWAITING_CONFIRM||l===vt.f.PENDING,Y=l===vt.f.FULFILLED,H=W||Y,K=Object(Yt.a)(G),z=K.checkApplicantError,q=K.checkApplicantInvalidMsg,J=K.checkApplicantStatus,Q=K.isApplicantValid,X=Object(oe.useCallback)((function(){return ee.apply(this,arguments)}),[B,o]),$=Object(oe.useCallback)((function(){return te.apply(this,arguments)}),[s,k]),Z=Object(oe.useCallback)((function(){return ne.apply(this,arguments)}),[s,k]);function ee(){return(ee=Object(We.a)(Ve.a.mark((function e(){var t,r,a,c;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&B){e.next=3;break}return T(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.resolve().then(n.t.bind(null,444,3));case 6:t=e.sent,r=t.default,a=r,c=new o.eth.Contract(a,B),T(c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),T(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function te(){return(te=Object(We.a)(Ve.a.mark((function e(){var t,n;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&k){e.next=3;break}return C(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,k.methods.symbol().call();case 6:return t=e.sent,e.next=9,k.methods.decimals().call();case 9:n=e.sent,C({symbol:t,decimals:Number(n)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),C(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function ne(){return(ne=Object(We.a)(Ve.a.mark((function e(){var t,n,r,a,c,o,i;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&k){e.next=3;break}return A(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,k.methods.balanceOf(s).call();case 6:return t=e.sent,n=Object(Qt.toBN)(t),e.next=10,k.methods.decimals().call();case 10:r=e.sent,a=Object(Qt.toBN)(10).pow(Object(Qt.toBN)(r)),c=n.div(a),o=n.mod(a),i=o.eq(Object(Qt.toBN)(0))?c.toString():"".concat(c.toString(),".").concat(o.toString()),A(i),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0),A(void 0);case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(We.a)(Ve.a.mark((function t(){return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.abrupt("return","UNITS");case 4:return t.prev=4,t.next=7,e.instance.methods.symbol().call();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(4),console.log(t.t0),t.abrupt("return","UNITS");case 14:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(We.a)(Ve.a.mark((function e(t){var n,r,a,c,o,i,d,l,O,h,m,v,N,g,E,A,w;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,V){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(s){e.next=5;break}throw new Error("No account found.");case 5:if(k){e.next=7;break}throw new Error("No ERC20Contract found.");case 7:if(y){e.next=9;break}throw new Error("No ERC20 details found.");case 9:if(z&&console.warn("Error checking if the applicant address is valid: ".concat(z.message)),J!==ge.a.FULFILLED||Q||!q){e.next=12;break}throw new Error(q);case 12:if(n=t.applicantAddress,r=t.erc20Address,a=t.tributeAmount,c=t.requestAmount,o=t.description,i=Object(Qt.toBN)(10).pow(Object(Qt.toBN)(y.decimals)),d=Object(Qt.toBN)(Object(f.j)(a)).mul(i),l=Object(f.j)(c),O=Object(Qt.toChecksumAddress)(n),h=Object(Qt.toChecksumAddress)(s),m=(null===u||void 0===u?void 0:u.uniqueId)||""){e.next=35;break}return v=Object(f.h)(n)===Object(f.h)(s)?"Tribute from ".concat(Object(f.k)(O,7),"."):"Tribute from ".concat(Object(f.k)(h,7)," for applicant ").concat(Object(f.k)(O,7),"."),N=o?"".concat(v,"\n").concat(o):v,e.t0=c,e.next=25,re();case 25:return e.t1=e.sent,e.t2=a,e.t3=y.symbol,g={requestAmount:e.t0,requestAmountUnit:e.t1,tributeAmount:e.t2,tributeAmountUnit:e.t3},E=[O,b.H,l,Object(Qt.toChecksumAddress)(r),d.toString(),h],e.next=32,j({partialProposalData:{name:O,body:N,metadata:{proposalAmountValues:g,submitActionArgs:E,accountAuthorizedToProcessPassedProposal:h}},adapterName:vt.a.tribute,type:Vt.SnapshotType.draft});case 32:A=e.sent,w=A.uniqueId,m=w;case 35:p.push("/tributes/".concat(m)),e.next=41;break;case 38:e.prev=38,e.t4=e.catch(0),x(e.t4);case 41:case"end":return e.stop()}}),e,null,[[0,38]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){X()}),[X]),Object(oe.useEffect)((function(){$()}),[$]),Object(oe.useEffect)((function(){Z()}),[Z]),Object(oe.useEffect)((function(){P(tn.applicantAddress,s)}),[s,P]),!V||t?Object(ue.jsx)(sn,{children:Object(ue.jsx)("div",{className:"form__description--unauthorized",children:Object(ue.jsx)("p",{children:V?t?t.message:void 0:"Connect your wallet to submit a tribute proposal."})})}):Object(ue.jsx)(sn,{children:Object(ue.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Applicant Address"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(tn.applicantAddress),"aria-invalid":S.applicantAddress?"true":"false",name:tn.applicantAddress,ref:F({validate:function(e){return e?!!Object(Xt.a)(e)||ft.a.INVALID_ETHEREUM_ADDRESS:ft.a.REQUIRED}}),type:"text",disabled:H}),Object(ue.jsx)(Et,{error:Object(f.f)(tn.applicantAddress,S),id:"error-".concat(tn.applicantAddress)})]})]}),Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"ERC20 Address"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(tn.erc20Address),"aria-invalid":S.erc20Address?"true":"false",name:tn.erc20Address,ref:F({validate:function(e){return e?!!Object(Xt.a)(e)||ft.a.INVALID_ETHEREUM_ADDRESS:ft.a.REQUIRED}}),type:"text",disabled:H}),Object(ue.jsx)(Et,{error:Object(f.f)(tn.erc20Address,S),id:"error-".concat(tn.erc20Address)})]})]}),Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ue.jsxs)("div",{className:"input__suffix-wrap",children:[Object(ue.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(tn.tributeAmount),"aria-invalid":S.tributeAmount?"true":"false",name:tn.tributeAmount,onChange:function(){return P(tn.tributeAmount,Object(f.e)(R().tributeAmount))},ref:F({validate:function(e){var t=Number(Object(f.j)(e));return""===e?ft.a.REQUIRED:isNaN(t)?ft.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(E)?"Insufficient funds.":!!Number.isInteger(t)||"The value must be an integer for an ERC20 token."}}),type:"text",disabled:H}),Object(ue.jsx)("div",{className:"input__suffix-item",children:(null===y||void 0===y?void 0:y.symbol)||"___"})]}),Object(ue.jsx)(Et,{error:Object(f.f)(tn.tributeAmount,S),id:"error-".concat(tn.tributeAmount)}),Object(ue.jsx)("div",{className:"form__input-description",children:"This amount will be held in escrow pending a member vote. If the proposal passes, the funds will automatically be sent to the DAO. If the proposal fails, the funds will be refunded to you."})]}),Object(ue.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(ue.jsx)("span",{children:E?Number.isInteger(Number(E))?E:Object(f.d)(Number(E)):"---"})]})]}),Object(ue.jsxs)("div",{className:"form__input-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Request Amount"}),Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(tn.requestAmount),"aria-invalid":S.requestAmount?"true":"false",name:tn.requestAmount,onChange:function(){return P(tn.requestAmount,Object(f.e)(R().requestAmount))},ref:F({validate:function(e){var t=Number(Object(f.j)(e));return""===e?ft.a.REQUIRED:isNaN(t)?ft.a.INVALID_NUMBER:!(t<0)||"The value must be at least 0."}}),type:"text",disabled:H}),Object(ue.jsx)(Et,{error:Object(f.f)(tn.requestAmount,S),id:"error-".concat(tn.requestAmount)}),Object(ue.jsx)("div",{className:"form__input-description",children:"This is the amount of DAO membership tokens you are requesting be sent to the Applicant Address in exchange for your tribute."})]})]}),Object(ue.jsxs)("div",{className:"form__textarea-row",children:[Object(ue.jsx)("label",{className:"form__input-row-label",children:"Description"}),Object(ue.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(ue.jsx)("textarea",{name:tn.description,placeholder:"Say something about your tribute...",ref:F,disabled:H})})]}),Object(ue.jsx)("button",{className:"button",disabled:H,onClick:Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,L();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:ce(R());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:W?Object(ue.jsx)(At.a,{}):Y?"Done":"Submit"}),H&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){switch(l){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Awaiting your confirmation",Object(ue.jsx)(Tt.a,{intervalMs:500})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:["Submitting",Object(ue.jsx)(Tt.a,{intervalMs:500})]});case vt.f.FULFILLED:return"Done!";default:return""}}()}),U&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while submitting the proposal.",error:U})})]})})}function sn(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Tribute Proposal"})}),Object(ue.jsxs)("div",{className:"form-wrapper",children:[Object(ue.jsx)("div",{className:"form__description",children:Object(ue.jsx)("p",{children:"Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus dictum fermentum vel tincidunt neque. Sed sed lacinia..."})}),e.children]})]})})}!function(e){e.type="type",e.selectedToken="selectedToken",e.memberAddress="memberAddress",e.amount="amount",e.notes="notes"}(en||(en={})),function(e){e.applicantAddress="applicantAddress",e.erc20Address="erc20Address",e.tributeAmount="tributeAmount",e.requestAmount="requestAmount",e.description="description"}(tn||(tn={}));var on=n(445),un=n.n(on),dn=(n(953),Object(oe.memo)((function(){return Object(ue.jsxs)("div",{className:"cube","data-testid":"cube","data-aos":"fade-up","data-aos-delay":"150",children:[Object(ue.jsx)("div",{className:"cube__segment--top"}),Object(ue.jsx)("div",{className:"cube__segment--left"}),Object(ue.jsx)("div",{className:"cube__segment--right"})]})})));function ln(){return Object(ue.jsxs)("div",{"data-testid":"get-started-header",className:"landing__header",children:[Object(ue.jsx)(me,{}),Object(ue.jsx)(Ze,{})]})}function bn(){var e=Object(se.f)();return Object(oe.useEffect)((function(){un.a.init({duration:800,offset:40,delay:120,mirror:!1,once:!0})}),[]),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(ln,{}),Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)(_e,{}),Object(ue.jsxs)("div",{className:"landing",children:[Object(ue.jsx)("div",{className:"landing__subtitle",children:"A next generation DAO framework"}),Object(ue.jsx)("div",{className:"landing__img",children:Object(ue.jsx)(dn,{})}),Object(ue.jsx)("div",{className:"landing__button",children:Object(ue.jsx)("button",{className:"button",onClick:function(){e.push("/join")},children:"Join"})})]})]})})]})}var jn=n(132);function fn(e){var t,n,r=e.proposal,a=Object(Yt.i)(null===(t=r.snapshotProposal)||void 0===t?void 0:t.msg.payload.start,null===(n=r.snapshotProposal)||void 0===n?void 0:n.msg.payload.end),c=a.hasVotingTimeEnded,s=a.hasVotingTimeStarted,o=a.votingTimeStartEndInitReady;return Object(ue.jsxs)(ue.Fragment,{children:[o&&s&&Object(ue.jsx)(jn.c,{proposal:r}),o&&s&&!c&&Object(ue.jsx)(jn.b,{proposal:r})]})}var On=n(74);function pn(){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsx)(Ge.a,{children:Object(ue.jsx)("div",{style:{textAlign:"center",fontSize:"5rem"},children:Object(ue.jsxs)("h3",{children:["4",Object(ue.jsx)("span",{className:"pulse",role:"img","aria-label":"404, not found",style:{display:"inline-block"},children:"\ud83d\ude35"}),"4"]})})})})}function hn(e){var t=e.proposal,n=e.renderAmountBadge,r=e.renderActions,a=t.getCommonSnapshotProposalData();return a?Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"proposaldetails__header",children:"Proposal Details"}),Object(ue.jsxs)("div",{className:"proposaldetails",children:[Object(ue.jsxs)("div",{className:"proposaldetails__content",children:[Object(ue.jsx)("h3",{children:Object(f.k)(a.msg.payload.name||"",7)}),Object(ue.jsx)(Ht.a,{children:a.msg.payload.body})]}),Object(ue.jsxs)("div",{className:"proposaldetails__status",children:[n&&n(),r()]})]})]}):null}function mn(){var e=Object(se.h)().proposalId,t=Object(Yt.c)(e,Vt.SnapshotType.proposal),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(Ne.d)().defaultChainError,o=r||s;return c===ge.a.PENDING&&!o?Object(ue.jsx)(vn,{children:Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})})}):a?Object(ue.jsx)(vn,{children:Object(ue.jsx)(pn,{})}):o?Object(ue.jsx)(vn,{children:Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:o,renderText:"Something went wrong while getting the proposal."})})}):n?Object(ue.jsx)(vn,{children:Object(ue.jsx)(hn,{proposal:n,renderActions:function(){return Object(ue.jsx)(fn,{proposal:n})}})}):Object(ue.jsx)(ue.Fragment,{})}function vn(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance")},children:"View all"})]}),e.children]})})}var xn=n(446),Nn=n(447),gn="View Proposal",En=n.n(Nn)()()(xn.a);function An(e){var t=e.buttonText,n=void 0===t?gn:t,r=e.proposalOnClickId,a=e.linkPath,c=e.onClick,o=e.name,i=e.renderStatus,u=Object(se.f)().location,d="/"===u.pathname?"":u.pathname,l="function"===typeof a?a(r):a||"".concat(d,"/").concat(r);return Object(ue.jsx)(s.b,{className:"proposalcard__link",to:l,onClick:function(){null===c||void 0===c||c(r)},children:Object(ue.jsxs)("div",{className:"proposalcard",children:[Object(ue.jsx)("h3",{className:"proposalcard__title",children:function(e){return Object(Xt.a)(e)?Object(f.k)(e,7):Object(ue.jsx)(En,{text:e,maxLine:1,ellipsis:"...",trimRight:!0,basedOn:"letters"})}(o)}),i&&i(),Object(ue.jsx)("button",{className:"proposalcard__button",children:n||gn})]})})}function wn(e){var t=e.actionId,n=void 0===t?xt.a:t,r=e.onProposalClick,a=void 0===r?function(){}:r,c=e.proposalLinkPath,s=e.renderProposalCard,o=Object(oe.useState)([]),i=Object(xe.a)(o,2),u=i[0],d=i[1],l=Object(oe.useState)({failedProposals:[],passedProposals:[],votingProposals:[]}),j=Object(xe.a)(l,2),O=j[0],p=j[1],h=function(e){var t=e.actionId,n=void 0===t?xt.a:t,r=Object(oe.useState)([]),a=Object(xe.a)(r,2),c=a[0],s=a[1],o=Object(oe.useState)(),i=Object(xe.a)(o,2),u=i[0],d=i[1],l=Object(oe.useState)(ge.a.STANDBY),j=Object(xe.a)(l,2),f=j[0],O=j[1],p=Object(pt.e)().isMountedRef,h=Object(oe.useCallback)((function(){return N.apply(this,arguments)}),[n,p]);function m(e){return x.apply(this,arguments)}function x(){return(x=Object(We.a)(Ve.a.mark((function e(t){var n,r,a;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(b.C,"/api/").concat(b.D),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return a=e.sent,e.abrupt("return",Object.entries(a).map((function(e){var t=Object(xe.a)(e,2),n=t[0],r=t[1];return{daoProposal:void 0,snapshotDraft:void 0,snapshotProposal:Object(v.a)(Object(v.a)({},r),{},{idInSnapshot:n,idInDAO:""}),getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){},snapshotType:Vt.SnapshotType.proposal}})));case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function N(){return(N=Object(We.a)(Ve.a.mark((function e(){var t;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(ge.a.PENDING),e.next=4,m(n);case 4:if(t=e.sent,p.current){e.next=7;break}return e.abrupt("return");case 7:O(ge.a.FULFILLED),s(t),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(0),p.current){e.next=15;break}return e.abrupt("return");case 15:O(ge.a.REJECTED),s([]),d(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){h()}),[h]),{governanceProposals:c,governanceProposalsError:u,governanceProposalsStatus:f}}({actionId:n}),m=h.governanceProposals,x=h.governanceProposalsError,N=h.governanceProposalsStatus,g=Object(Yt.b)(u),E=g.offchainVotingResults,A=g.offchainVotingResultsError,w=g.offchainVotingResultsStatus,I=Object(Ne.d)().defaultChainError,y=O.failedProposals,C=O.passedProposals,D=O.votingProposals,_=N===ge.a.STANDBY||N===ge.a.PENDING||w===ge.a.STANDBY&&u.length>0||w===ge.a.PENDING,k=x||A||I;function T(e){return e.map((function(e){var t,n,r,o=null===(t=e.snapshotProposal)||void 0===t?void 0:t.idInSnapshot,i=(null===(n=e.snapshotProposal)||void 0===n?void 0:n.msg.payload.name)||"";if(!o)return null;var u=null===(r=E.find((function(e){var t=Object(xe.a)(e,2),n=t[0];t[1];return Object(f.h)(n)===Object(f.h)(o)})))||void 0===r?void 0:r[1];return s?Object(ue.jsx)(oe.Fragment,{children:s({proposalData:e,votingResult:u})},o):Object(ue.jsx)(An,{name:i,linkPath:c,onClick:a,proposalOnClickId:o,renderStatus:function(){return Object(ue.jsx)(jn.c,{proposal:e,votingResult:u})}},o)}))}return Object(oe.useEffect)((function(){d(m.map((function(e){return e.snapshotProposal})))}),[m]),Object(oe.useEffect)((function(){if(N===ge.a.FULFILLED){var e={failedProposals:[],passedProposals:[],votingProposals:[]};m.forEach((function(t){var n,r;if(((null===(n=t.snapshotProposal)||void 0===n?void 0:n.msg.payload.end)||0)<Math.ceil(Date.now()/1e3)){var a=null===(r=E.find((function(e){var n,r=Object(xe.a)(e,2),a=r[0];r[1];return Object(f.h)(a)===Object(f.h)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInSnapshot)||"")})))||void 0===r?void 0:r[1];if(a){var c,s=(c=a).Yes.units>c.No.units;s?e.passedProposals.push(t):s||e.failedProposals.push(t)}}else e.votingProposals.push(t)})),p((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}}),[m,N,E]),_&&!k?Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})}):m.length||Object.values(O).flatMap((function(e){return e})).length||N!==ge.a.FULFILLED?k?Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:k,renderText:"Something went wrong while getting the proposals."})}):Object(ue.jsxs)("div",{className:"grid--fluid grid-container",children:[D.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.VOTING}),Object(ue.jsx)("div",{className:"grid__cards",children:T(D)})]}),C.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.PASSED}),Object(ue.jsx)("div",{className:"grid__cards",children:T(C)})]}),y.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.FAILED}),Object(ue.jsx)("div",{className:"grid__cards",children:T(y)})]})]}):Object(ue.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function In(){return Object(ue.jsx)(yn,{children:Object(ue.jsx)(wn,{actionId:xt.a,proposalLinkPath:function(e){return"/governance/".concat(e)}})})}function yn(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance-proposal")},children:"New Proposal"})]}),e.children]})})}var Cn=["createdAt","didFullyRagequit"];function Dn(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(c.c)((function(e){return e.subgraphNetworkStatus.status})),a=Object(Ne.f)().web3Instance,s=Object(He.a)(O.c,{pollInterval:b.r,variables:{daoAddress:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),o=Object(xe.a)(s,2),i=o[0],u=o[1],d=u.called,l=u.loading,j=u.data,p=u.error,h=u.stopPolling,m=Object(oe.useState)([]),N=Object(xe.a)(m,2),g=N[0],E=N[1],A=Object(oe.useState)(ge.a.STANDBY),w=Object(xe.a)(A,2),I=w[0],y=w[1],C=Object(oe.useState)(),D=Object(xe.a)(C,2),_=D[0],k=D[1],T=Object(oe.useCallback)((function(){return R.apply(this,arguments)}),[t,e,a]),S=Object(oe.useCallback)((function(){try{if(y(ge.a.PENDING),!l&&j){var e=j.tributeDaos[0].members.filter((function(e){return!e.didFullyRagequit})).map((function(e){e.createdAt,e.didFullyRagequit;var t=Object(x.a)(e,Cn);return Object(v.a)(Object(v.a)({},t),{},{address:Object(Qt.toChecksumAddress)(e.address),delegateKey:Object(Qt.toChecksumAddress)(e.delegateKey)})}));y(ge.a.FULFILLED),E(e)}else if(p)throw new Error(p.message)}catch(p){console.log("subgraph query error: ".concat(p.message)),h&&h(),T()}}),[j,p,T,l,h]);function R(){return(R=Object(We.a)(Ve.a.mark((function n(){var c,s,o,i,u,d,l,j,O,p,h,m,v,x,N,g,A;return Ve.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&a){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,y(ge.a.PENDING),c=e.abi,s=e.contractAddress,o=e.instance.methods,n.next=7,o.getNbMembers().call();case 7:if(i=n.sent,!(Number(i)>0)){n.next=28;break}return u=c.find((function(e){return"getMemberAddress"===e.name})),d=Object(r.a)(Array(Number(i)).keys()).map((function(e){return[s,u,[e.toString()]]})),n.next=13,Object(dt.j)({calls:d,web3Instance:a});case 13:return l=n.sent,j=c.find((function(e){return"memberAddressesByDelegatedKey"===e.name})),O=l.map((function(e){return[s,j,[e]]})),n.next=18,Object(dt.j)({calls:O,web3Instance:a});case 18:return p=n.sent,h=t.abi,m=t.contractAddress,v=h.find((function(e){return"balanceOf"===e.name})),x=p.map((function(e){return[m,v,[e,b.H]]})),n.next=24,Object(dt.j)({calls:x,web3Instance:a});case 24:N=n.sent,g=l.map((function(e,t){return{address:e,delegateKey:p[t],isDelegated:Object(f.h)(e)!==Object(f.h)(p[t]),units:N[t]}})),A=g.filter((function(e){return Object(Qt.toBN)(e.units).gt(Object(Qt.toBN)(0))})).reverse(),E(A);case 28:y(ge.a.FULFILLED),n.next=36;break;case 31:n.prev=31,n.t0=n.catch(2),y(ge.a.REJECTED),E([]),k(n.t0);case 36:case"end":return n.stop()}}),n,null,[[2,31]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){d||i()}),[d,i]),Object(oe.useEffect)((function(){n===ee.a.OK?!l&&(null===e||void 0===e?void 0:e.contractAddress)&&S():(h&&h(),T())}),[null===e||void 0===e?void 0:e.contractAddress,T,S,l,h,n]),{members:g,membersError:_,membersStatus:I}}var _n,kn,Tn,Sn=n(195);function Rn(e){return Object(ue.jsx)("svg",Object(v.a)(Object(v.a)({"aria-hidden":"true",focusable:"false","data-icon":"copy",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(ue.jsx)("path",{fill:"currentColor",d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"})}))}function Pn(e){return Object(ue.jsx)("svg",Object(v.a)(Object(v.a)({"aria-hidden":"true",focusable:"false","data-icon":"wallet",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),{},{children:Object(ue.jsx)("path",{fill:"currentColor",d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"})}))}function Fn(e){var t=e.daoTokenDetails;function n(){return(n=Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return t?Object(ue.jsxs)("div",{children:["Token: ",Object(ue.jsx)("span",{children:Object(Sn.a)(t.address,7)}),Object(ue.jsx)("div",{className:"daotoken__tooltip",children:Object(ue.jsxs)("button",{className:"daotoken__button",onClick:function(){if(t){var e=document.createElement("input");document.body.appendChild(e),e.setAttribute("value",t.address),e.select(),document.execCommand("copy"),document.body.removeChild(e),document.getElementById("copyTooltip").innerHTML="copied!"}},onMouseLeave:function(){document.getElementById("copyTooltip").innerHTML="copy address"},children:[Object(ue.jsx)("span",{className:"daotoken__tooltiptext",id:"copyTooltip",children:"copy address"}),Object(ue.jsx)(Rn,{})]})}),Object(ue.jsx)("div",{className:"daotoken__tooltip",children:Object(ue.jsxs)("button",{className:"daotoken__button",onClick:function(){return n.apply(this,arguments)},children:[Object(ue.jsx)("span",{className:"daotoken__tooltiptext",children:"add to wallet"}),Object(ue.jsx)(Pn,{})]})})]}):Object(ue.jsx)(ue.Fragment,{})}function Ln(e){return Object(ue.jsx)("svg",Object(v.a)(Object(v.a)({"aria-hidden":"true",focusable:"false","data-icon":"user",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(ue.jsx)("path",{fill:"currentColor",d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"})}))}function Mn(e){var t=e.isOpen,n=e.closeHandler,r=e.currentStep,a=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),s=Object(c.c)((function(e){return e.contracts.DaoRegistryAdapterContract})),o=Object(c.c)((function(e){return e.connectedMember})),i=Object(Ne.f)(),u=i.account,d=i.web3Instance,l=Object(Ne.b)().fast,b=Object(Ne.a)(),O=b.txError,p=b.txEtherscanURL,h=b.txIsPromptOpen,m=b.txSend,x=b.txStatus,N=Object(mt.a)({mode:"onBlur",reValidateMode:"onChange"}),g=Object(c.b)(),E=Object(oe.useState)(),A=Object(xe.a)(E,2),w=A[0],I=A[1],y=N.errors,C=N.getValues,D=N.register,_=N.trigger,k=N.watch,T=x===vt.f.AWAITING_CONFIRM||x===vt.f.PENDING,S=x===vt.f.FULFILLED,R=T||S||h,P=w||O,F=k(Tn.delegateAddress),L=k(Tn.confirmDelegation),M=!F||!L,B={setDelegation:function(){return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"modal__title",children:"Delegate"}),Object(ue.jsx)("p",{children:"Transfer your voting rights"}),Object(ue.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(ue.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ue.jsx)("div",{className:"form__input-row",children:Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{"aria-describedby":"error-".concat(Tn.delegateAddress),"aria-invalid":y.delegateAddress?"true":"false",name:Tn.delegateAddress,ref:D({validate:function(e){return e?!(!Object(Xt.a)(e)||e===xt.a)||ft.a.INVALID_ETHEREUM_ADDRESS:ft.a.REQUIRED}}),type:"text",disabled:R,placeholder:"Enter delegate address"}),Object(f.f)(Tn.delegateAddress,y).includes("invalid")&&Object(ue.jsx)(Et,{error:Object(f.f)(Tn.delegateAddress,y),id:"error-".concat(Tn.delegateAddress)})]})}),Object(ue.jsx)("div",{className:"form__input-row",style:{marginTop:0},children:Object(ue.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ue.jsx)("input",{className:"checkbox-input","aria-describedby":"error-".concat(Tn.confirmDelegation),"aria-invalid":y.confirmDelegation?"true":"false",id:Tn.confirmDelegation,name:Tn.confirmDelegation,ref:D({required:ft.a.REQUIRED}),type:"checkbox",disabled:R}),Object(ue.jsxs)("label",{className:"checkbox-label",htmlFor:Tn.confirmDelegation,children:[Object(ue.jsx)("span",{className:"checkbox-box ".concat(Ct.SMALL)}),Object(ue.jsx)("span",{className:"checkbox-text",children:"Confirm delegation to the above address. You can revoke this at any time from your profile."})]})]})}),Object(ue.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R||M,onClick:Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(C());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:T?Object(ue.jsx)(At.a,{}):S?"Done":"Confirm"}),R&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:Y()}),P&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong with your delegation.",error:P})})]})]})},revokeDelegation:function(){if(o)return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"modal__title",children:"Revoke Delegation"}),Object(ue.jsx)("p",{children:Object(f.k)(o.delegateKey,7)}),Object(ue.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(ue.jsxs)("p",{children:[Object(ue.jsx)(Ln,{}),"Back to you"]}),Object(ue.jsx)("div",{className:"delegation-modal__text",children:"You'll be able to resume voting from your account. You can delegate again at any time from your profile."}),Object(ue.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R,onClick:V,children:T?Object(ue.jsx)(At.a,{}):S?"Done":"Confirm"}),R&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:Y()}),P&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong with your revocation.",error:P})})]});return Object(ue.jsx)(ue.Fragment,{})}};function G(e){return U.apply(this,arguments)}function U(){return(U=Object(We.a)(Ve.a.mark((function e(t){var r,c,o,i;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return r=t.delegateAddress,c=[a.contractAddress,Object(Qt.toChecksumAddress)(r)],o=Object(v.a)({from:u||""},l?{gasPrice:l}:null),e.next=14,m("updateDelegateKey",s.instance.methods,c,o);case 14:e.sent&&setTimeout(Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(j.A)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),i=e.t0,(e.t0.message.includes("cannot overwrite existing delegated keys")||e.t0.message.includes("address already taken as delegated key"))&&(i=new Error("The provided address cannot be another member or already in use as a delegate.")),I(i);case 24:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function V(){return W.apply(this,arguments)}function W(){return(W=Object(We.a)(Ve.a.mark((function e(){var t,r;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=[a.contractAddress,Object(Qt.toChecksumAddress)(u)],r=Object(v.a)({from:u||""},l?{gasPrice:l}:null),e.next=13,m("updateDelegateKey",s.instance.methods,t,r);case 13:e.sent&&setTimeout(Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(j.A)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),I(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function Y(){switch(x){case vt.f.AWAITING_CONFIRM:return"Awaiting your confirmation\u2026";case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:p,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Submitted!"}),Object(ue.jsx)(Rt.a,{url:p})]});default:return null}}return Object(ue.jsxs)(It.a,{keyProp:"delegation",isOpen:t,isOpenHandler:function(){},modalClassNames:"delegation-modal",children:[Object(ue.jsx)("span",{className:"modal__close-button",onClick:function(){n()},children:Object(ue.jsx)(Fe.a,{})}),B[r]()]})}function Bn(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(oe.useState)(kn.SET_DELEGATION),n=Object(xe.a)(t,2),r=n[0],a=n[1],s=Object(oe.useState)(""),o=Object(xe.a)(s,2),i=o[0],u=o[1],d=Object(oe.useState)(!1),l=Object(xe.a)(d,2),b=l[0],j=l[1],O=Object(oe.useCallback)((function(){return p.apply(this,arguments)}),[e]);function p(){return(p=Object(We.a)(Ve.a.mark((function t(){var n,r;return Ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("No connected account found.");case 3:n=e.isAddressDelegated?kn.REVOKE_DELEGATION:kn.SET_DELEGATION,a(n),r=e.isAddressDelegated?_n.REVOKE_DELEGATION:_n.DELEGATE_VOTES,u(r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){O()}),[O]),e?Object(ue.jsxs)(ue.Fragment,{children:[""!==i&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"memberprofile__action-description",children:e.isAddressDelegated?Object(ue.jsxs)(ue.Fragment,{children:["Your voting rights have been delegated to"," ",Object(ue.jsx)("span",{className:"delegation__delegate-address-text",children:Object(f.k)(e.delegateKey,7)}),". You can revoke this at any time."]}):Object(ue.jsx)(ue.Fragment,{children:"You can delegate your voting rights to a different ETH address. The address cannot be another member or already in use as a delegate."})}),Object(ue.jsx)("button",{className:"memberprofile__action-button",onClick:function(){return j(!0)},children:i})]}),b&&Object(ue.jsx)(Mn,{isOpen:b,closeHandler:function(){j(!1)},currentStep:r})]}):Object(ue.jsx)(ue.Fragment,{})}function Gn(){var e=Dn(),t=e.members,n=e.membersError,r=e.membersStatus,a=Object(Ne.d)().defaultChainError,c=Object(Ne.f)().account,s=Ye(),o=s.daoTokenDetails,i=s.daoTokenDetailsStatus,u=Object(pt.d)(),d=u.totalUnits,l=u.totalUnitsStatus,b=Object(se.h)().ethereumAddress,j=Object(oe.useState)(),O=Object(xe.a)(j,2),p=O[0],h=O[1],m=Object(oe.useState)(!1),v=Object(xe.a)(m,2),x=v[0],N=v[1];Object(oe.useEffect)((function(){if(r===ge.a.FULFILLED){var e=t.find((function(e){return Object(f.h)(e.address)===Object(f.h)(b)}));h(e),e||N(!0)}}),[b,t,r]);var g=r===ge.a.STANDBY||r===ge.a.PENDING||i===ge.a.STANDBY||i===ge.a.PENDING||l===ge.a.STANDBY||l===ge.a.PENDING,E=r===ge.a.FULFILLED,A=n||a,w=!(!c||!p||Object(f.h)(c)!==Object(f.h)(p.address)),I=p&&"number"===typeof d?(Number(p.units)/d*100).toFixed(2):"";return g&&!A?Object(ue.jsx)(Un,{children:Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})})}):A?Object(ue.jsx)(Un,{children:Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:A,renderText:"Something went wrong while getting the member."})})}):x&&E?Object(ue.jsx)(Un,{children:Object(ue.jsx)("div",{className:"text-center error-message",children:Object(ue.jsx)("p",{children:"Member not found."})})}):Object(ue.jsx)(Un,{children:p?Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"memberprofile__header",children:"Member Profile"}),Object(ue.jsxs)("div",{className:"proposaldetails",children:[Object(ue.jsxs)("div",{className:"memberprofile__left-column",children:[Object(ue.jsx)("h3",{children:Object(f.k)(p.address,7)}),function(){if(p)return Object(ue.jsxs)("div",{children:[Object(ue.jsx)("div",{className:"memberprofile__info-item",children:o?Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"DAO Tokens"}),Object(ue.jsx)("div",{children:"".concat(Object(f.e)(p.units)," ").concat(o.symbol||"tokens")}),w&&Object(ue.jsx)("small",{children:Object(ue.jsx)(Fn,{daoTokenDetails:o})})]}):Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Membership Units"}),Object(ue.jsx)("div",{children:Object(f.e)(p.units)})]})}),Object(ue.jsxs)("div",{className:"memberprofile__info-item",children:[Object(ue.jsx)("div",{children:"Voting Weight"}),Object(ue.jsx)("div",{children:"".concat(I,"%")})]})]})}()]}),Object(ue.jsx)("div",{className:"memberprofile__right-column",children:w?Object(ue.jsx)("div",{children:Object(ue.jsxs)("div",{className:"memberprofile__action",children:[Object(ue.jsx)("div",{className:"memberprofile__action-header",children:"Delegation"}),Object(ue.jsx)(Bn,{})]})}):Object(ue.jsx)("div",{className:"memberprofile__actions-unavailable",children:"Connect your wallet with this member address to view available actions."})})]})]}):Object(ue.jsx)(ue.Fragment,{})})}function Un(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Members"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/members")},children:"View all"})]}),e.children]})})}!function(e){e.DELEGATE_VOTES="Delegate Votes",e.REVOKE_DELEGATION="Revoke Delegation"}(_n||(_n={})),function(e){e.SET_DELEGATION="setDelegation",e.REVOKE_DELEGATION="revokeDelegation"}(kn||(kn={})),function(e){e.delegateAddress="delegateAddress",e.confirmDelegation="confirmDelegation"}(Tn||(Tn={}));function Vn(e){var t=e.member,n=e.to,r=void 0===n?"#":n,a=Object(Ne.f)().account;return Object(ue.jsx)(s.b,{className:"membercard__link",to:r,children:Object(ue.jsx)("div",{className:"membercard ".concat(a&&a.toLowerCase()===t.address.toLowerCase()?"membercard--connected-account":""),children:Object(ue.jsx)("h3",{className:"membercard__title",children:Object(f.k)(t.address,7)})})})}function Wn(){var e=Dn(),t=e.members,n=e.membersError,r=e.membersStatus,a=Object(Ne.d)().defaultChainError,c=r===ge.a.STANDBY||r===ge.a.PENDING,s=r===ge.a.FULFILLED,o=n||a;return c&&!o?Object(ue.jsx)(Yn,{children:Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})})}):o?Object(ue.jsx)(Yn,{children:Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:o,renderText:"Something went wrong while getting the members."})})}):!Object.values(t).length&&s?Object(ue.jsx)(Yn,{children:Object(ue.jsx)("p",{className:"text-center",children:"No members, yet!"})}):Object(ue.jsx)(Yn,{children:Object(ue.jsx)("div",{className:"grid--fluid grid-container",children:Object(ue.jsxs)("div",{children:[Object(ue.jsx)("div",{className:"grid__header",children:"Active Members"}),Object(ue.jsx)("div",{className:"grid__cards",children:function(e){return e.map((function(e){return Object(ue.jsx)(Vn,{to:"/members/".concat(e.address),member:e},e.address)}))}(t)})]})})})}function Yn(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Members"})}),e.children]})})}var Hn=n(51),Kn=n(50);function zn(e){var t=e.adapterName,n=e.onProposalClick,r=void 0===n?function(){}:n,a=e.proposalLinkPath,c=e.renderProposalCard,s=e.includeProposalsExistingOnlyOffchain,o=void 0!==s&&s,i=Object(oe.useState)({failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]}),u=Object(xe.a)(i,2),d=u[0],l=u[1],b=Object(Yt.e)({adapterName:t,includeProposalsExistingOnlyOffchain:o}),j=b.proposals,f=b.proposalsError,O=b.proposalsStatus,p=Object(Ne.d)().defaultChainError,h=d.failedProposals,m=d.nonsponsoredProposals,x=d.passedProposals,N=d.votingProposals,g=O===ge.a.STANDBY||O===ge.a.PENDING,E=f||p;function A(e){return e.map((function(e){var t,n,s,o,i=(null===(t=e.snapshotDraft)||void 0===t?void 0:t.idInDAO)||(null===(n=e.snapshotProposal)||void 0===n?void 0:n.idInDAO),u=(null===(s=e.snapshotDraft)||void 0===s?void 0:s.msg.payload.name)||(null===(o=e.snapshotProposal)||void 0===o?void 0:o.msg.payload.name)||"";return i?c?Object(ue.jsx)(oe.Fragment,{children:c({proposalData:e})},i):Object(ue.jsx)(An,{linkPath:a,name:u,onClick:r,proposalOnClickId:i,renderStatus:function(){var t;switch(null===(t=e.daoProposalVotingAdapter)||void 0===t?void 0:t.votingAdapterName){case rt.c.OffchainVotingContract:return Object(ue.jsx)(jn.c,{proposal:e});default:return Object(ue.jsx)(ue.Fragment,{})}}},i):null}))}return Object(oe.useEffect)((function(){if(O===ge.a.FULFILLED){var e={failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]};j.forEach((function(t){var n,r,a,c=t.daoProposal,s=t.daoProposalVotingState,i=t.daoProposalVotes;if(c){var u=0===(null===(n=t.snapshotProposal)||void 0===n||null===(r=n.votes)||void 0===r?void 0:r.length),d=void 0!==s&&Object(Hn.e)(Kn.a.TIE,s)&&Object(Hn.d)(Wt.b.SPONSORED,c.flags)&&(null===i||void 0===i||null===(a=i.OffchainVotingContract)||void 0===a?void 0:a.reporter)===xt.a;void 0!==s?void 0!==s&&Object(Hn.e)(Kn.a.PASS,s)&&(Object(Hn.d)(Wt.b.SPONSORED,c.flags)||Object(Hn.d)(Wt.b.PROCESSED,c.flags))?e.passedProposals.push(t):d&&!1===u?e.votingProposals.push(t):void 0===s||!Object(Hn.e)(Kn.a.NOT_PASS,s)&&!Object(Hn.e)(Kn.a.TIE,s)||!Object(Hn.d)(Wt.b.SPONSORED,c.flags)&&!Object(Hn.d)(Wt.b.PROCESSED,c.flags)?void 0!==s&&(Object(Hn.e)(Kn.a.GRACE_PERIOD,s)||Object(Hn.e)(Kn.a.TIE,s))&&Object(Hn.d)(Wt.b.SPONSORED,c.flags)&&d&&u?e.failedProposals.push(t):void 0!==s&&(Object(Hn.e)(Kn.a.GRACE_PERIOD,s)||Object(Hn.e)(Kn.a.IN_PROGRESS,s))&&Object(Hn.d)(Wt.b.SPONSORED,c.flags)&&e.votingProposals.push(t):e.failedProposals.push(t):(o||Object(Hn.d)(Wt.b.EXISTS,c.flags))&&e.nonsponsoredProposals.push(t)}})),l((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}}),[o,j,O]),g&&!E?Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})}):E?Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:E,renderText:"Something went wrong while getting the proposals."})}):Object.values(d).flatMap((function(e){return e})).length||O!==ge.a.FULFILLED?Object(ue.jsxs)("div",{className:"grid--fluid grid-container",children:[N.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.VOTING}),Object(ue.jsx)("div",{className:"grid__cards",children:A(N)})]}),m.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.REQUESTS}),Object(ue.jsx)("div",{className:"grid__cards",children:A(m)})]}),x.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.PASSED}),Object(ue.jsx)("div",{className:"grid__cards",children:A(x)})]}),h.length>0&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{className:"grid__header",children:ft.d.FAILED}),Object(ue.jsx)("div",{className:"grid__cards",children:A(h)})]})]}):Object(ue.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function qn(){return Object(ue.jsx)(Jn,{children:Object(ue.jsx)(zn,{adapterName:rt.a.ONBOARDING,proposalLinkPath:function(e){return"/membership/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function Jn(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Membership"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/members")},children:"View members"})]}),e.children]})})}var Qn={skipIsActiveMemberCheck:!0};function Xn(e){var t=e.disabled,n=e.proposal.snapshotProposal,r=Object(oe.useState)(),a=Object(xe.a)(r,2),s=a[0],o=a[1],i=Object(oe.useState)(),u=Object(xe.a)(i,2),d=u[0],l=u[1],b=Object(oe.useRef)({notProposerMessage:""}),f=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.OnboardingContract})),O=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),p=Object(Ne.f)(),h=p.account,m=p.web3Instance,x=Object(Ne.a)(),N=x.txEtherscanURL,g=x.txIsPromptOpen,E=x.txSend,A=x.txStatus,w=Object(pt.f)(Qn),I=w.isDisabled,y=w.openWhyDisabledModal,C=w.WhyDisabledModal,D=w.setOtherDisabledReasons,_=Object(Ne.b)().fast,k=Ye().daoTokenDetails,T=Object(c.b)(),S=A===vt.f.AWAITING_CONFIRM||A===vt.f.PENDING,R=A===vt.f.FULFILLED,P=S||R||g,F=I||P||t,L=Object(oe.useCallback)((function(){return M.apply(this,arguments)}),[f,null===O||void 0===O?void 0:O.contractAddress,n]);function M(){return(M=Object(We.a)(Ve.a.mark((function e(){var t;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&f){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.instance.methods.proposals(null===O||void 0===O?void 0:O.contractAddress,n.idInDAO).call();case 5:t=e.sent,l(t.amount),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),l(void 0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function B(){return(B=Object(We.a)(Ve.a.mark((function e(){var t,r;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(n){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(f){e.next=7;break}throw new Error("No OnboardingContract found.");case 7:if(h){e.next=9;break}throw new Error("No account found.");case 9:if(m){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:return t=[O.contractAddress,n.idInDAO],r=Object(v.a)({from:h||"",value:d},_?{gasPrice:_}:null),e.next=15,E("processProposal",f.instance.methods,t,r);case 15:if(!e.sent){e.next=21;break}return e.next=19,T(Object(j.A)({account:h,daoRegistryContract:O,web3Instance:m}));case 19:return e.next=21,G();case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),o(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}function G(){return U.apply(this,arguments)}function U(){return(U=Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:k}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){L()}),[L]),Object(oe.useEffect)((function(){var e=n.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&h&&(b.current=Object(v.a)(Object(v.a)({},b.current),{},{notProposerMessage:e.toLowerCase()!==h.toLowerCase()?"Only the original proposer can process the proposal.":""})),D(Object.values(b.current))}),[h,D,n]),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("button",{className:"proposaldetails__button",disabled:F,onClick:F?function(){}:function(){return B.apply(this,arguments)},children:S?Object(ue.jsx)(At.a,{}):R?"Done":"Process"}),Object(ue.jsx)(Nt.a,{error:s,renderText:"Something went wrong"}),P&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){switch(A){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Confirm to process the proposal",Object(ue.jsx)(Tt.a,{})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:N,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Proposal submitted!"}),Object(ue.jsx)(Rt.a,{url:N})]});default:return null}}()}),I&&Object(ue.jsx)("button",{className:"button--help-centered",onClick:y,children:"Why is processing disabled?"})]}),Object(ue.jsx)(C,{title:"Why is processing disabled?"})]})}var $n=Object(oe.lazy)((function(){return n.e(8).then(n.bind(null,1010))})),Zn={duration:150},er={display:"inline-block",width:"100%",fontSize:"1.5rem"};function tr(e){var t,n=e.adapterName,r=e.proposal,a=e.renderAction,s=Object(c.c)((function(e){var t;return null===(t=e.contracts.VotingContract)||void 0===t?void 0:t.adapterOrExtensionName})),o=(null===(t=r.daoProposalVotingAdapter)||void 0===t?void 0:t.votingAdapterName)||s;return Object(ue.jsx)(oe.Suspense,{fallback:Object(ue.jsx)("span",{className:"text-center",style:er,children:Object(ue.jsx)(Tt.a,{intervalMs:200,fadeInProps:Zn})}),children:function(){if(!o)return Object(ue.jsx)(ue.Fragment,{});switch(o){case rt.c.OffchainVotingContract:return Object(ue.jsx)($n,{adapterName:n,proposal:r,renderAction:a});case rt.c.VotingContract:return Object(ue.jsx)(ue.Fragment,{});default:return Object(ue.jsx)(Nt.a,{error:new Error('"'.concat(o,'" is not a valid voting adapter name.')),renderText:"Something went wrong"})}}()})}var nr=n(200);function rr(e){var t=e.amount,n=e.amountUnit,r=e.amount2,a=e.amount2Unit;return Object(ue.jsx)("div",{className:"proposaldetails__amount",children:Object(ue.jsxs)("span",{children:["".concat(t," ").concat(n),r&&Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("br",{}),Object(ue.jsx)("small",{children:"for"}),Object(ue.jsx)("br",{}),"".concat(r," ").concat(a)]})]})})}function ar(){var e=Object(se.h)().proposalId,t=Object(Yt.c)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(Ne.d)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===Wt.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(ue.jsx)(nr.a,{checkApplicant:s,proposal:r})}return a===Wt.c.Process||a===Wt.c.OffchainVotingGracePeriod?n&&Kn.a[n]!==Kn.a[Kn.a.PASS]?Object(ue.jsx)(ue.Fragment,{}):Object(ue.jsx)(Xn,{disabled:a===Wt.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===ge.a.PENDING&&!o)return Object(ue.jsx)(cr,{children:Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})})});if(a)return Object(ue.jsx)(cr,{children:Object(ue.jsx)(pn,{})});if(o)return Object(ue.jsx)(cr,{children:Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:o,renderText:"Something went wrong while getting the proposal."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.tributeAmount,l=b.tributeAmountUnit}catch(o){d="\u2014",l=""}return Object(ue.jsx)(cr,{children:Object(ue.jsx)(hn,{proposal:n,renderAmountBadge:function(){return Object(ue.jsx)(rr,{amount:d,amountUnit:l})},renderActions:function(){return Object(ue.jsx)(tr,{adapterName:vt.a.onboarding,proposal:n,renderAction:i})}})})}return Object(ue.jsx)(ue.Fragment,{})}function cr(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Membership"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/membership")},children:"View all"})]}),e.children]})})}function sr(e){var t=e.showAfterMs,n=Object(oe.useState)(!1),r=Object(xe.a)(n,2),a=r[0],c=r[1];return Object(oe.useEffect)((function(){var e=t&&setTimeout((function(){return c(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&a?Object(ue.jsx)("div",{className:"loader--emoji",children:Object(ue.jsx)("span",{role:"img","aria-label":"Loading content...",children:e.emoji})}):null}var or=n(199),ir=n(148),ur={skipIsActiveMemberCheck:!0};function dr(e){var t=e.redeemables,n=e.daoTokenDetails;return Object(ue.jsx)(br,{children:Object(ue.jsx)(lr,{redeemable:t[0],daoTokenDetails:n})})}function lr(e){var t=e.redeemable,n=e.daoTokenDetails,r=Object(oe.useRef)({invalidApplicantMessage:""}),a=Object(ir.b)(),c=a.redeemCoupon,s=a.submitStatus,o=a.submitError,i=a.txStatus,u=a.txEtherscanURL,d=a.txIsPromptOpen,l=Object(pt.f)(ur),b=l.isDisabled,j=l.openWhyDisabledModal,O=l.WhyDisabledModal,p=l.setOtherDisabledReasons,h=Object(Yt.a)(t.recipient),m=h.checkApplicantError,x=h.checkApplicantInvalidMsg,N=h.checkApplicantStatus,g=h.isApplicantValid,E=s===ir.a.PENDING||i===vt.f.AWAITING_CONFIRM||i===vt.f.PENDING,A=s===ir.a.FULFILLED||i===vt.f.FULFILLED||t.isRedeemd,w=E||A||d;return Object(oe.useEffect)((function(){t.recipient&&(m&&console.warn("Error checking if the applicant address '".concat(t.recipient,"' is valid: ").concat(m.message)),N===ge.a.FULFILLED&&!g&&x&&(r.current=Object(v.a)(Object(v.a)({},r.current),{},{invalidApplicantMessage:x})),p(Object.values(r.current)))}),[m,x,N,g,t.recipient,p]),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{className:"redeemcard redeemcard__content ".concat(A?"fireworks":""," "),children:[Object(ue.jsxs)("p",{className:"redeemcard__recipient",children:["Recipient:"," ",Object(f.k)(Object(Qt.toChecksumAddress)(t.recipient),7)]}),Object(ue.jsxs)("p",{className:"redeemcard__unit",children:[Object(f.e)(t.amount),Object(ue.jsx)("sup",{children:Object(ue.jsx)("small",{children:(null===n||void 0===n?void 0:n.symbol)||"tokens"})})]}),Object(ue.jsx)(Fn,{daoTokenDetails:n}),A&&Object(ue.jsx)("p",{className:"redeemcard__redeemed",children:Object(ue.jsx)("span",{className:"pulse",role:"img","aria-label":"Redeemed!",style:{display:"inline-block"},children:"\ud83e\udd73"})}),Object(ue.jsx)("button",{className:"button",style:{marginTop:A?"1rem":"1.5rem"},onClick:Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,n);case 2:case"end":return e.stop()}}),e)}))),disabled:b||w,children:E?Object(ue.jsx)(At.a,{}):A?"Redeemed!":"Redeem"}),w&&!t.isRedeemd&&Object(ue.jsx)("div",{className:"form__submit-status-container",style:{marginTop:"1rem"},children:function(){switch(i){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Awaiting your confirmation",Object(ue.jsx)(or.a,{})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:u,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Finalized!"}),Object(ue.jsx)(Rt.a,{url:u})]});default:return null}}()}),b&&Object(ue.jsx)("button",{className:"button--help-centered",onClick:j,style:{margin:"1rem auto 0"},children:"Why is redeeming disabled?"}),o&&Object(ue.jsx)("div",{className:"form__submit-error-container",children:Object(ue.jsx)(Nt.a,{renderText:"Something went wrong while redeeming the coupon.",error:o})})]}),Object(ue.jsx)(O,{title:"Why is redeeming disabled?"})]})}function br(e){return Object(ue.jsx)(Ge.a,{children:Object(ue.jsx)("div",{className:"grid--fluid grid-container",children:e.children})})}function jr(){var e=Object(oe.useState)([]),t=Object(xe.a)(e,2),n=t[0],r=t[1],a=Object(oe.useState)(ge.a.STANDBY),c=Object(xe.a)(a,2),s=c[0],o=c[1],i=Object(Ne.f)(),u=i.connected,d=i.account,l=Object(Ne.d)().defaultChainError,j=Object(pt.a)(),f=j.abortController,O=j.isMountedRef,p=Ye(),h=p.daoTokenDetails,m=p.daoTokenDetailsStatus,v=Object(se.g)(),x=new URLSearchParams(v.search).get("coupon"),N=s===ge.a.STANDBY||s===ge.a.PENDING||m===ge.a.STANDBY||m===ge.a.PENDING,g=Object(oe.useCallback)((function(){return E.apply(this,arguments)}),[null===f||void 0===f?void 0:f.signal,x,O]);function E(){return(E=Object(We.a)(Ve.a.mark((function e(){var t,n;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===f||void 0===f?void 0:f.signal){e.next=3;break}return e.abrupt("return");case 3:return o(ge.a.PENDING),e.next=6,fetch("".concat(b.g,"/api/coupon/redeem"),{method:"POST",body:JSON.stringify({signature:x}),headers:{"Content-Type":"application/json"},signal:f.signal});case 6:if(t=e.sent,O.current){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.json();case 11:n=e.sent,r(n),o(ge.a.FULFILLED),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(0),O.current){e.next=20;break}return e.abrupt("return");case 20:o(ge.a.REJECTED);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){d&&u&&!l&&g()}),[d,u,g,l]),u?l?Object(ue.jsx)(fr,{children:Object(ue.jsx)("p",{className:"color-brightsalmon",children:l.message})}):u&&N?Object(ue.jsxs)(fr,{children:[Object(ue.jsx)(sr,{emoji:"\ud83c\udf9f"}),Object(ue.jsx)("p",{children:"Checking\u2026 please wait."})]}):void 0!==x&&x?n&&n.length?Object(ue.jsx)(fr,{children:Object(ue.jsx)(dr,{daoTokenDetails:h,redeemables:n})}):Object(ue.jsx)(fr,{children:Object(ue.jsx)("p",{className:"color-brightsalmon",children:"Coupon not found."})}):Object(ue.jsx)(fr,{children:Object(ue.jsx)("p",{className:"color-brightsalmon",children:"Coupon signature missing."})}):Object(ue.jsx)(fr,{children:Object(ue.jsx)("p",{className:"color-brightsalmon",children:"Connect your wallet to view the coupon."})})}function fr(e){return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{className:"titlebar",children:Object(ue.jsx)("h2",{className:"titlebar__title",children:"Redeem Coupon"})}),Object(ue.jsxs)("div",{className:"form-wrapper",children:[Object(ue.jsx)("div",{className:"form__description",children:Object(ue.jsx)("p",{children:"Redeem coupon to issue the membership tokens."})}),e.children]})]})})}function Or(e){var t=e.proposal.snapshotProposal,n=Object(oe.useState)(),r=Object(xe.a)(n,2),a=r[0],s=r[1],o=Object(oe.useRef)({alreadyCompletedMessage:""}),i=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),u=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),d=Object(Ne.f)(),l=d.account,b=d.web3Instance,f=Object(Ne.a)(),O=f.txEtherscanURL,p=f.txIsPromptOpen,h=f.txSend,m=f.txStatus,x=Object(pt.f)(),N=x.isDisabled,g=x.openWhyDisabledModal,E=x.WhyDisabledModal,A=x.setOtherDisabledReasons,w=Object(Ne.b)().fast,I=Object(c.b)(),y=m===vt.f.AWAITING_CONFIRM||m===vt.f.PENDING,C=m===vt.f.FULFILLED,D=y||C||p,_=N||D;function k(){return(k=Object(We.a)(Ve.a.mark((function e(){var n,r,a,c;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(t){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:if(l){e.next=9;break}throw new Error("No account found.");case 9:if(b){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(n="0",!(null===t||void 0===t?void 0:t.msg.payload.metadata.isTypeAllMembers)){e.next=24;break}return e.prev=14,e.next=17,u.instance.methods.getNbMembers().call();case 17:r=e.sent,n=r.toString(),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(14),new Error("Error while retrieving number of DAO members");case 24:return a=[u.contractAddress,n],c=Object(v.a)({from:l||""},w?{gasPrice:w}:null),e.next=28,h("distribute",i.instance.methods,a,c);case 28:if(!e.sent){e.next=32;break}return e.next=32,I(Object(j.A)({account:l,daoRegistryContract:u,web3Instance:b}));case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),s(e.t1);case 37:case"end":return e.stop()}}),e,null,[[0,34],[14,21]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){function e(){return(e=Object(We.a)(Ve.a.mark((function e(){var n;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No Snapshot proposal was found.");case 3:if(u){e.next=5;break}throw new Error("No DAO Registry contract was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:return e.next=9,i.instance.methods.distributions(u.contractAddress,t.idInDAO).call();case 9:n=e.sent,o.current=Object(v.a)(Object(v.a)({},o.current),{},{alreadyCompletedMessage:Wt.a[n.status]!==Wt.a[Wt.a.IN_PROGRESS]?"The transfer has already been completed.":""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:A(Object.values(o.current));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,u,A,t]),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("button",{className:"proposaldetails__button",disabled:_,onClick:_?function(){}:function(){return k.apply(this,arguments)},children:y?Object(ue.jsx)(At.a,{}):C?"Transfer done":"Transfer assets"}),Object(ue.jsx)(Nt.a,{error:a,renderText:"Something went wrong"}),D&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){switch(m){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Confirm to transfer assets",Object(ue.jsx)(Tt.a,{})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:O,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Assets transferred!"}),Object(ue.jsx)(Rt.a,{url:O})]});default:return null}}()}),N&&Object(ue.jsx)("button",{className:"button--help-centered",onClick:g,children:"Why is action disabled?"})]}),Object(ue.jsx)(E,{title:"Why is transfer disabled?"})]})}function pr(){var e=Object(se.h)().proposalId,t=Object(Yt.c)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(Ne.d)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal;return t.status===Wt.c.Completed&&n&&Kn.a[n]===Kn.a[Kn.a.PASS]?Object(ue.jsx)(Or,{proposal:r}):null}if(c===ge.a.PENDING&&!o)return Object(ue.jsx)(hr,{children:Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})})});if(a)return Object(ue.jsx)(hr,{children:Object(ue.jsx)(pn,{})});if(o)return Object(ue.jsx)(hr,{children:Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.transferAmount,l=b.transferAmountUnit}catch(o){d="\u2014",l=""}return Object(ue.jsx)(hr,{children:Object(ue.jsx)(hn,{proposal:n,renderAmountBadge:function(){return Object(ue.jsx)(rr,{amount:d,amountUnit:l})},renderActions:function(){return Object(ue.jsx)(tr,{adapterName:vt.a.distribute,proposal:n,renderAction:i})}})})}return Object(ue.jsx)(ue.Fragment,{})}function hr(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfers")},children:"View all"})]}),e.children]})})}function mr(){return Object(ue.jsx)(vr,{children:Object(ue.jsx)(zn,{adapterName:rt.a.DISTRIBUTE,proposalLinkPath:function(e){return"/transfers/".concat(e)}})})}function vr(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfer")},children:"Make Transfer"})]}),e.children]})})}var xr={skipIsActiveMemberCheck:!0};function Nr(e){var t=e.disabled,r=e.proposal.snapshotProposal,a=Object(oe.useState)(),s=Object(xe.a)(a,2),o=s[0],i=s[1],u=Object(oe.useState)(),d=Object(xe.a)(u,2),l=d[0],b=d[1],f=Object(oe.useRef)({notProposerMessage:""}),O=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.TributeContract})),p=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),h=Object(Ne.f)(),m=h.account,x=h.web3Instance,N=Object(Ne.a)(),g=N.txEtherscanURL,E=N.txIsPromptOpen,A=N.txSend,w=N.txStatus,I=Object(Ne.a)(),y=I.txEtherscanURL,C=I.txIsPromptOpen,D=I.txSend,_=I.txStatus,k=Object(pt.f)(xr),T=k.isDisabled,S=k.openWhyDisabledModal,R=k.WhyDisabledModal,P=k.setOtherDisabledReasons,F=Object(Ne.b)().fast,L=Ye().daoTokenDetails,M=Object(c.b)(),B=w===vt.f.AWAITING_CONFIRM||w===vt.f.PENDING||_===vt.f.AWAITING_CONFIRM||_===vt.f.PENDING,G=w===vt.f.FULFILLED,U=B||G||E||C,V=T||U||t,W=Object(oe.useCallback)((function(){return Y.apply(this,arguments)}),[O,null===p||void 0===p?void 0:p.contractAddress,r]);function Y(){return(Y=Object(We.a)(Ve.a.mark((function e(){var t,n,a;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r&&O){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O.instance.methods.proposals(null===p||void 0===p?void 0:p.contractAddress,r.idInDAO).call();case 5:t=e.sent,n=t.token,a=t.tributeAmount,b({tokenAddress:n,tributeAmount:a}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),b(void 0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function H(){return K.apply(this,arguments)}function K(){return(K=Object(We.a)(Ve.a.mark((function e(){var t,r,a,c,s,o,i,u,d,b,j,f,p;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}throw new Error("No Tribute proposal details found.");case 3:if(O){e.next=5;break}throw new Error("No TributeContract found.");case 5:if(m){e.next=7;break}throw new Error("No account found.");case 7:if(x){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=l.tokenAddress,r=l.tributeAmount,e.next=12,Promise.resolve().then(n.t.bind(null,444,3));case 12:return a=e.sent,c=a.default,s=c,o=new x.eth.Contract(s,t),e.next=18,o.methods.allowance(m,O.contractAddress).call();case 18:if(i=e.sent,u=Object(Qt.toBN)(r),d=Object(Qt.toBN)(i),!u.gt(d)){e.next=34;break}return e.prev=22,b=u.sub(d),j=d.add(b),f=[O.contractAddress,j.toString()],p=Object(v.a)({from:m||""},F?{gasPrice:F}:null),e.next=29,D("approve",o.methods,f,p);case 29:e.next=34;break;case 31:throw e.prev=31,e.t0=e.catch(22),e.t0;case 34:e.next=39;break;case 36:throw e.prev=36,e.t1=e.catch(0),e.t1;case 39:case"end":return e.stop()}}),e,null,[[0,36],[22,31]])})))).apply(this,arguments)}function z(){return(z=Object(We.a)(Ve.a.mark((function e(){var t,n;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(O){e.next=7;break}throw new Error("No TributeContract found.");case 7:if(m){e.next=9;break}throw new Error("No account found.");case 9:if(x){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:return e.next=13,H();case 13:return t=[p.contractAddress,r.idInDAO],n=Object(v.a)({from:m||""},F?{gasPrice:F}:null),e.next=17,A("processProposal",O.instance.methods,t,n);case 17:if(!e.sent){e.next=23;break}return e.next=21,M(Object(j.A)({account:m,daoRegistryContract:p,web3Instance:x}));case 21:return e.next=23,q();case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),i(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})))).apply(this,arguments)}function q(){return J.apply(this,arguments)}function J(){return(J=Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:L}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){W()}),[W]),Object(oe.useEffect)((function(){var e=r.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&m&&(f.current=Object(v.a)(Object(v.a)({},f.current),{},{notProposerMessage:e.toLowerCase()!==m.toLowerCase()?"Only the original proposer can process the proposal.":""})),P(Object.values(f.current))}),[m,P,r]),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{children:[Object(ue.jsx)("button",{className:"proposaldetails__button",disabled:V,onClick:V?function(){}:function(){return z.apply(this,arguments)},children:B?Object(ue.jsx)(At.a,{}):G?"Done":"Process"}),Object(ue.jsx)(Nt.a,{error:o,renderText:"Something went wrong"}),U&&Object(ue.jsx)("div",{className:"form__submit-status-container",children:function(){if(_===vt.f.AWAITING_CONFIRM)return Object(ue.jsxs)(ue.Fragment,{children:["Confirm to transfer your tokens",Object(ue.jsx)(Tt.a,{})]});if(_===vt.f.PENDING)return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("div",{children:["Approving your tokens for transfer",Object(ue.jsx)(Tt.a,{})]}),Object(ue.jsx)(Rt.a,{url:y,isPending:!0})]});switch(w){case vt.f.AWAITING_CONFIRM:return Object(ue.jsxs)(ue.Fragment,{children:["Confirm to process the proposal",Object(ue.jsx)(Tt.a,{})]});case vt.f.PENDING:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(St.a,{intervalMs:2e3,messages:kt.b,useFirstItemStart:!0,render:function(e){return Object(ue.jsx)(Ge.a,{children:e},e)}}),Object(ue.jsx)(Rt.a,{url:g,isPending:!0})]});case vt.f.FULFILLED:return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)("div",{children:"Proposal submitted!"}),Object(ue.jsx)(Rt.a,{url:g})]});default:return null}}()}),T&&Object(ue.jsx)("button",{className:"button--help-centered",onClick:S,children:"Why is processing disabled?"})]}),Object(ue.jsx)(R,{title:"Why is processing disabled?"})]})}var gr="\u2014";function Er(){var e=Object(se.h)().proposalId,t=Object(Yt.c)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(Ne.d)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===Wt.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(ue.jsx)(nr.a,{checkApplicant:s,proposal:r})}return a===Wt.c.Process||a===Wt.c.OffchainVotingGracePeriod?n&&Kn.a[n]!==Kn.a[Kn.a.PASS]?Object(ue.jsx)(ue.Fragment,{}):Object(ue.jsx)(Nr,{disabled:a===Wt.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===ge.a.PENDING&&!o)return Object(ue.jsx)(Ar,{children:Object(ue.jsx)("div",{className:"loader--large-container",children:Object(ue.jsx)(On.a,{})})});if(a)return Object(ue.jsx)(Ar,{children:Object(ue.jsx)(pn,{})});if(o)return Object(ue.jsx)(Ar,{children:Object(ue.jsx)("div",{className:"text-center",children:Object(ue.jsx)(Nt.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d=gr,l="",b=gr,j="";try{var f=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=f.tributeAmount,l=f.tributeAmountUnit,b=f.requestAmount,j=f.requestAmountUnit}catch(o){d=gr,l="",b=gr,j=""}return Object(ue.jsx)(Ar,{children:Object(ue.jsx)(hn,{proposal:n,renderAmountBadge:function(){return Object(ue.jsx)(rr,{amount:d,amountUnit:l,amount2:b,amount2Unit:j})},renderActions:function(){return Object(ue.jsx)(tr,{adapterName:vt.a.tribute,proposal:n,renderAction:i})}})})}return Object(ue.jsx)(ue.Fragment,{})}function Ar(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tributes")},children:"View all"})]}),e.children]})})}function wr(){return Object(ue.jsx)(Ir,{children:Object(ue.jsx)(zn,{adapterName:rt.a.TRIBUTE,proposalLinkPath:function(e){return"/tributes/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function Ir(e){var t=Object(se.f)();return Object(ue.jsx)(Mt,{className:"section-wrapper",children:Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsxs)("div",{className:"titlebar",children:[Object(ue.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(ue.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tribute")},children:"Provide Tribute"})]}),e.children]})})}var yr,Cr=":proposalId";function Dr(){return Object(ue.jsx)(se.c,{children:[Object(ue.jsx)(se.a,{exact:!0,path:"/",render:function(){return Object(ue.jsx)(bn,{})}},"splash"),Object(ue.jsx)(se.a,{exact:!0,path:"/join",render:function(){return Object(ue.jsx)($t,{})}},"join"),Object(ue.jsx)(se.a,{exact:!0,path:"/membership",render:function(){return Object(ue.jsx)(qn,{})}},"membership"),Object(ue.jsx)(se.a,{exact:!0,path:"/membership/".concat(Cr),render:function(){return Object(ue.jsx)(ar,{})}},"membership-details"),Object(ue.jsx)(se.a,{exact:!0,path:"/transfer",render:function(){return Object(ue.jsx)(rn,{})}},"transfer"),Object(ue.jsx)(se.a,{exact:!0,path:"/transfers",render:function(){return Object(ue.jsx)(mr,{})}},"transfers"),Object(ue.jsx)(se.a,{exact:!0,path:"/transfers/".concat(Cr),render:function(){return Object(ue.jsx)(pr,{})}},"transfer-details"),Object(ue.jsx)(se.a,{exact:!0,path:"/tribute",render:function(){return Object(ue.jsx)(cn,{})}},"tribute"),Object(ue.jsx)(se.a,{exact:!0,path:"/tributes",render:function(){return Object(ue.jsx)(wr,{})}},"tributes"),Object(ue.jsx)(se.a,{exact:!0,path:"/tributes/".concat(Cr),render:function(){return Object(ue.jsx)(Er,{})}},"tribute-details"),Object(ue.jsx)(se.a,{exact:!0,path:"/governance-proposal",render:function(){return Object(ue.jsx)(zt,{})}},"governance-proposal"),Object(ue.jsx)(se.a,{exact:!0,path:"/governance",render:function(){return Object(ue.jsx)(In,{})}},"governance-proposals"),Object(ue.jsx)(se.a,{exact:!0,path:"/governance/".concat(Cr),render:function(){return Object(ue.jsx)(mn,{})}},"governance-proposal-details"),Object(ue.jsx)(se.a,{exact:!0,path:"/members",render:function(){return Object(ue.jsx)(Wn,{})}},"members"),Object(ue.jsx)(se.a,{exact:!0,path:"/members/:ethereumAddress",render:function(){return Object(ue.jsx)(Gn,{})}},"member-profile"),Object(ue.jsx)(se.a,{exact:!0,path:"/dao-manager",render:function(){return Object(ue.jsx)(Bt,{})}},"dao-manager"),Object(ue.jsx)(se.a,{exact:!0,path:"/redeem",render:function(){return Object(ue.jsx)(jr,{})}},"redeem"),Object(ue.jsx)(se.a,{component:pn},"no-match")]})}function _r(e){var t=Object(se.g)().pathname,n=(e||{}).renderMainContent,r=Object(ue.jsx)("main",{children:n?n():Object(ue.jsx)(Dr,{})});return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(Ie,{}),"/"===t?Object(ue.jsx)(ue.Fragment,{children:r}):Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(tt,{}),r,Object(ue.jsx)(ve,{})]}),Object(ue.jsx)(Ae,{})]})}function kr(e){var t=e.render,n=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),r=Object(oe.useState)(),a=Object(xe.a)(r,2),s=a[0],o=a[1],i=Object(oe.useState)(!1),u=Object(xe.a)(i,2),d=u[0],l=u[1],f=Object(oe.useState)(Object(nt.a)({},yr.initSnapshotAPI,ge.a.STANDBY)),O=Object(xe.a)(f,2),p=O[0],h=O[1],m=Object(Ne.f)(),x=m.account,N=m.web3Instance,g=Object(Ne.d)().isDefaultChain,E=Object(pt.e)().isMountedRef,A=Object(Ne.c)(),w=Object(c.b)(),I=Object(oe.useCallback)((function(){return _.apply(this,arguments)}),[A,g,N]),y=Object(oe.useCallback)((function(){return k.apply(this,arguments)}),[x,n,w,g,N]),C=Object(oe.useCallback)((function(){return D.apply(this,arguments)}),[E]);function D(){return(D=Object(We.a)(Ve.a.mark((function e(){var t;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.C){e.next=3;break}throw new Error("No Snapshot Hub API URL was found.");case 3:return e.next=5,Object(Vt.getApiStatus)(b.C);case 5:if(t=e.sent,t.data.version){e.next=9;break}throw new Error("Snapshot API is not ready.");case 9:if(E.current){e.next=11;break}return e.abrupt("return");case 11:h((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(nt.a)({},yr.initSnapshotAPI,ge.a.FULFILLED))})),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(0),E.current){e.next=18;break}return e.abrupt("return");case 18:o(new Error("Snapshot API is not responding."));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function _(){return(_=Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g&&N){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A({web3Instance:N});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){return(k=Object(We.a)(Ve.a.mark((function e(){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x&&n&&g&&N){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w(Object(j.A)({account:x,daoRegistryContract:n,web3Instance:N}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(oe.useEffect)((function(){l(Object.values(p).every((function(e){return e===ge.a.FULFILLED})))}),[p]),Object(oe.useEffect)((function(){I()}),[I,N]),Object(oe.useEffect)((function(){y()}),[y]),Object(oe.useEffect)((function(){C()}),[C]),t({error:s,isInitComplete:d})}function Tr(e){var t=e.error;return Object(ue.jsxs)(Ge.a,{children:[Object(ue.jsx)("div",{style:{padding:"2em 1em 1em",textAlign:"center"},children:Object(ue.jsxs)("h1",{style:{fontSize:"2rem"},children:[Object(ue.jsx)("span",{className:"pulse",role:"img","aria-label":"Emoji with eyes crossed out.",style:{display:"inline-block"},children:"\ud83d\ude35"})," ","Oops, something went wrong."]})}),Object(ue.jsx)("div",{style:{textAlign:"center",maxWidth:600,display:"block",margin:"0 auto"},children:Object(ue.jsx)(Nt.a,{error:t,renderText:""})})]})}!function(e){e.initSnapshotAPI="initSnapshotAPI"}(yr||(yr={}));var Sr=function(e){e&&e instanceof Function&&n.e(10).then(n.bind(null,1009)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Rr=n(206),Pr=(n(954),document.getElementById("root"));"production"===b.m&&Object(f.b)(),window.ethereum&&window.ethereum.autoRefreshOnNetworkChange&&(window.ethereum.autoRefreshOnNetworkChange=!1);var Fr=function(e){return new i.a({link:Object(u.concat)(Object(O.e)(e),new d.a({uri:function(e){var t=e.operationName;return"".concat(b.s,"?").concat(t)}})),cache:new l.a({typePolicies:{Adapter:{fields:{adapters:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}},Extension:{fields:{extensions:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}}}})})};null!==Pr&&Object(a.render)(Object(ue.jsx)(c.a,{store:ce,children:Object(ue.jsx)(s.a,{children:Object(ue.jsx)(Rr.b,{onBeforeDisconnect:function(){ce.dispatch(Object(j.w)()),ce.dispatch(Object(j.x)())},onBeforeConnect:function(){ce.dispatch(Object(j.x)())},providerOptions:b.J,children:Object(ue.jsx)(o.a,{client:Fr(ce),children:Object(ue.jsx)(kr,{render:function(e){var t=e.error,n=e.isInitComplete;return t?Object(ue.jsx)(_r,{renderMainContent:function(){return Object(ue.jsx)(Tr,{error:t})}}):n?Object(ue.jsx)(_r,{}):null}})})})})}),Pr),Sr()},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(206);function c(){return Object(r.useContext)(a.a)}}},[[958,4,5]]]);
//# sourceMappingURL=main.75de54a7.chunk.js.map